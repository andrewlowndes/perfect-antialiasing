"use strict";(self.webpackChunksubpixel_rendering=self.webpackChunksubpixel_rendering||[]).push([[327],{876:function(e,r,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const n=t(887),a=o(t(5)),i=o(t(938)),s=new Float32Array([-.75,-.75,0,.75,.75,-.75]),f=Float32Array.of(...s.slice(2),...s.slice(0,2)),l=Float32Array.of(...s.slice(s.length-2),...s.slice(0,s.length-2)),c=new Float32Array([1,0,0,0,1,0,0,0,1]),h=new Uint16Array([0,1,2]),u=document.getElementById("canvas1"),A=document.getElementById("canvas2"),g=A.getContext("2d");if(!g)throw new Error("Could not initialise graphics :(");const b=2*Math.PI,d=A.width/u.width,R=e=>Math.floor((s[2*h[e]]/2+.5)*A.width),v=e=>Math.floor(A.height-(s[2*h[e]+1]/2+.5)*A.height),F=u.getContext("webgl",{antialias:!1});if(!F)throw new Error("Could not initialise WebGL :(");const _=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,_),F.bufferData(F.ARRAY_BUFFER,s,F.DYNAMIC_DRAW);const m=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,m),F.bufferData(F.ARRAY_BUFFER,f,F.DYNAMIC_DRAW);const E=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,E),F.bufferData(F.ARRAY_BUFFER,l,F.DYNAMIC_DRAW);const B=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,B),F.bufferData(F.ARRAY_BUFFER,c,F.STATIC_DRAW);const S=F.createBuffer();F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,S),F.bufferData(F.ELEMENT_ARRAY_BUFFER,h,F.STATIC_DRAW);const w=F.createShader(F.VERTEX_SHADER);if(F.shaderSource(w,a.default),F.compileShader(w),""!==String(F.getShaderInfoLog(w)).trim())throw new Error(String(F.getShaderInfoLog(w)));const p=F.createShader(F.FRAGMENT_SHADER);if(F.shaderSource(p,i.default),F.compileShader(p),""!==String(F.getShaderInfoLog(p)).trim())throw new Error(String(F.getShaderInfoLog(p)));const P=F.createProgram();if(F.attachShader(P,w),F.attachShader(P,p),F.linkProgram(P),""!==String(F.getProgramInfoLog(P)).trim())throw new Error(String(F.getProgramInfoLog(P)));F.useProgram(P);const U=F.getAttribLocation(P,"pos");F.bindBuffer(F.ARRAY_BUFFER,_),F.vertexAttribPointer(U,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(U);const x=F.getAttribLocation(P,"prevPos");F.bindBuffer(F.ARRAY_BUFFER,E),F.vertexAttribPointer(x,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(x);const D=F.getAttribLocation(P,"nextPos");F.bindBuffer(F.ARRAY_BUFFER,m),F.vertexAttribPointer(D,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(D);const T=F.getAttribLocation(P,"uv");F.bindBuffer(F.ARRAY_BUFFER,B),F.vertexAttribPointer(T,3,F.FLOAT,!1,0,0),F.enableVertexAttribArray(T);const y=F.getUniformLocation(P,"offset");F.uniform1f(y,Math.sqrt(2)/u.width);const Y=F.getUniformLocation(P,"screenSize");F.uniform2fv(Y,[u.width,u.height]),F.clearColor(1,1,1,1),F.viewport(0,0,u.width,u.height),F.enable(F.DEPTH_TEST);const M=(e,r)=>{const t=2*e;s[t]=r[0],s[t+1]=r[1];const o=(t+2)%l.length;l[o]=r[0],l[o+1]=r[1];const n=(t-2+f.length)%f.length;f[n]=r[0],f[n+1]=r[1]},L=n.vec2.fromValues(1,1),C=n.vec2.fromValues(-1,-1),I=n.vec2.fromValues(-1,-1),V=n.vec2.fromValues(s[0],s[1]),k=n.vec2.fromValues(s[2],s[3]),N=n.vec2.fromValues(s[4],s[5]),O=.001,z=()=>{V[0]+=O*L[0],V[1]+=O*L[1],Math.abs(V[0])>1&&(L[0]*=-1),Math.abs(V[1])>1&&(L[1]*=-1),M(0,V),k[0]+=O*C[0],k[1]+=O*C[1],Math.abs(k[0])>1&&(C[0]*=-1),Math.abs(k[1])>1&&(C[1]*=-1),M(1,k),N[0]+=O*I[0],N[1]+=O*I[1],Math.abs(N[0])>1&&(I[0]*=-1),Math.abs(N[1])>1&&(I[1]*=-1),M(2,N),(()=>{g.clearRect(0,0,A.width,A.height),g.strokeStyle="#DDDDDD";for(let e=0;e<A.width;e+=d)g.beginPath(),g.moveTo(Math.floor(e),0),g.lineTo(Math.floor(e),A.height),g.stroke();for(let e=0;e<A.height;e+=d)g.beginPath(),g.moveTo(0,Math.floor(e)),g.lineTo(A.width,Math.floor(e)),g.stroke();const e=n.vec2.fromValues(R(0),v(0)),r=n.vec2.fromValues(R(1),v(1)),t=n.vec2.fromValues(R(2),v(2));g.strokeStyle="white",g.beginPath(),g.moveTo(e[0],e[1]),g.lineTo(r[0],r[1]),g.lineTo(t[0],t[1]),g.closePath(),g.stroke(),g.fillStyle="#AAA";for(let e=d/2;e<A.width;e+=d)for(let r=d/2;r<A.height;r+=d)g.beginPath(),g.arc(e,r,1,0,b),g.fill();g.fillStyle="blue";const o=[e,r,t];for(const e of o)g.beginPath(),g.arc(e[0],e[1],1,0,b),g.fill()})(),F.clear(F.COLOR_BUFFER_BIT),F.bindBuffer(F.ARRAY_BUFFER,_),F.bufferSubData(F.ARRAY_BUFFER,0,s),F.bindBuffer(F.ARRAY_BUFFER,m),F.bufferSubData(F.ARRAY_BUFFER,0,f),F.bindBuffer(F.ARRAY_BUFFER,E),F.bufferSubData(F.ARRAY_BUFFER,0,l),F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,S),F.drawElements(F.TRIANGLES,h.length,F.UNSIGNED_SHORT,0),requestAnimationFrame(z)};z()},938:e=>{e.exports="precision highp float;\r\n\r\nvarying vec3 vUv;\r\nvarying vec4 bounds;\r\n\r\nvoid main(void) {\r\n  if (gl_FragCoord.x < bounds.x || gl_FragCoord.y < bounds.y || gl_FragCoord.x > bounds.z || gl_FragCoord.y > bounds.w) {\r\n    discard;\r\n  }\r\n\r\n  gl_FragColor = vec4(vUv, 1.0);\r\n}"},5:e=>{e.exports="uniform vec2 screenSize;\r\nuniform float offset;\r\n\r\nattribute vec2 pos;\r\nattribute vec2 prevPos;\r\nattribute vec2 nextPos;\r\nattribute vec3 uv;\r\n\r\nvarying vec3 vUv;\r\nvarying vec4 bounds;\r\n\r\nvoid main(void) {\r\n    // determine a new vertex position such that it covers the neighbour pixel centers\r\n    vec2 a = normalize(pos - prevPos);\r\n    vec2 b = normalize(pos - nextPos);\r\n    float angle = sqrt((1.0 - dot(a, b)) / 2.0);\r\n\r\n    vec2 vecPos = pos + normalize(a + b) * (offset / angle);\r\n\r\n    // compute a bounding box and pass to the fragment shader so we don't render outside the inflated triangle bounds\r\n    bounds = screenSize.xyxy * (vec4(min(min(pos, prevPos), nextPos), max(max(pos, prevPos), nextPos)) / 2.0 + 0.5) + vec4(-0.5, -0.5, 0.5, 0.5);\r\n\r\n    // TODO: offset the uv so it is still inline with the original triangle position?\r\n    vUv = uv;\r\n\r\n    gl_Position = vec4(vecPos, 0.0, 1.0);\r\n}"}},e=>{e(e.s=876)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRzlCLEdBQ3JDeUIsRUFBR0ksV0FBV0osRUFBR0ssYUFBY0ksR0FDL0JULEVBQUdxRixjQUFjckYsRUFBR0ssYUFBYyxFQUFHM0IsR0FDckNzQixFQUFHSSxXQUFXSixFQUFHYSxxQkFBc0JELEdBQ3ZDWixFQUFHc0YsYUFBYXRGLEVBQUd1RixVQUFXMUcsRUFBUUYsT0FBUXFCLEVBQUd3RixlQUFnQixHQTZDakVDLHNCQUFzQjFCLElBRTFCQSxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VicGl4ZWwtcmVuZGVyaW5nLy4vc3JjL2RlbW9zL2NvbnNlcnZhdGl2ZVJhc3RlcmlzYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjb25zZXJ2YXRpdmVfdmVydF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9zaGFkZXJzL2NvbnNlcnZhdGl2ZS52ZXJ0XCIpKTtcclxuY29uc3QgY29uc2VydmF0aXZlX2ZyYWdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vc2hhZGVycy9jb25zZXJ2YXRpdmUuZnJhZ1wiKSk7XHJcbmNvbnN0IHZlcnRleFNpemUgPSAyO1xyXG5jb25zdCB2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgLTAuNzUsIC0wLjc1LCAwLjAsIDAuNzUsXHJcbiAgICAvLy0wLjUsIC0wLjIsXHJcbiAgICAwLjc1LCAtMC43NVxyXG5dKTtcclxuY29uc3QgbmV4dFBvcyA9IEZsb2F0MzJBcnJheS5vZiguLi52ZXJ0aWNlcy5zbGljZSh2ZXJ0ZXhTaXplKSwgLi4udmVydGljZXMuc2xpY2UoMCwgdmVydGV4U2l6ZSkpO1xyXG5jb25zdCBwcmV2UG9zID0gRmxvYXQzMkFycmF5Lm9mKC4uLnZlcnRpY2VzLnNsaWNlKHZlcnRpY2VzLmxlbmd0aCAtIHZlcnRleFNpemUpLCAuLi52ZXJ0aWNlcy5zbGljZSgwLCB2ZXJ0aWNlcy5sZW5ndGggLSB2ZXJ0ZXhTaXplKSk7XHJcbmNvbnN0IHV2ID0gbmV3IEZsb2F0MzJBcnJheShbMS4wLCAwLjAsIDAuMCwgMC4wLCAxLjAsIDAuMCwgMC4wLCAwLjAsIDEuMF0pO1xyXG5jb25zdCBpbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyXSk7XHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMxJyk7XHJcbmNvbnN0IGNhbnZhczIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzMicpO1xyXG5jb25zdCBnID0gY2FudmFzMi5nZXRDb250ZXh0KCcyZCcpO1xyXG5pZiAoIWcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGluaXRpYWxpc2UgZ3JhcGhpY3MgOignKTtcclxufVxyXG5jb25zdCBwaTIgPSBNYXRoLlBJICogMjtcclxuY29uc3QgY2FudmFzU2NhbGUgPSBjYW52YXMyLndpZHRoIC8gY2FudmFzLndpZHRoO1xyXG5jb25zdCBnZXRYID0gKGluZGV4KSA9PiBNYXRoLmZsb29yKCh2ZXJ0aWNlc1tpbmRpY2VzW2luZGV4XSAqIHZlcnRleFNpemVdIC8gMiArIDAuNSkgKiBjYW52YXMyLndpZHRoKTtcclxuY29uc3QgZ2V0WSA9IChpbmRleCkgPT4gTWF0aC5mbG9vcihjYW52YXMyLmhlaWdodCAtICh2ZXJ0aWNlc1tpbmRpY2VzW2luZGV4XSAqIHZlcnRleFNpemUgKyAxXSAvIDIgKyAwLjUpICogY2FudmFzMi5oZWlnaHQpO1xyXG5jb25zdCBkcmF3MkQgPSAoKSA9PiB7XHJcbiAgICBnLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMyLndpZHRoLCBjYW52YXMyLmhlaWdodCk7XHJcbiAgICAvL2RyYXcgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgbGluZXMgc28gd2UgY2FuIHNlZSB0aGUgcGl4ZWwgb3V0bGluZXNcclxuICAgIGcuc3Ryb2tlU3R5bGUgPSAnI0RERERERCc7XHJcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhczIud2lkdGg7IHggKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGcubW92ZVRvKE1hdGguZmxvb3IoeCksIDApO1xyXG4gICAgICAgIGcubGluZVRvKE1hdGguZmxvb3IoeCksIGNhbnZhczIuaGVpZ2h0KTtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjYW52YXMyLmhlaWdodDsgeSArPSBjYW52YXNTY2FsZSkge1xyXG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZy5tb3ZlVG8oMCwgTWF0aC5mbG9vcih5KSk7XHJcbiAgICAgICAgZy5saW5lVG8oY2FudmFzMi53aWR0aCwgTWF0aC5mbG9vcih5KSk7XHJcbiAgICAgICAgZy5zdHJva2UoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHAxID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKGdldFgoMCksIGdldFkoMCkpO1xyXG4gICAgY29uc3QgcDIgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoZ2V0WCgxKSwgZ2V0WSgxKSk7XHJcbiAgICBjb25zdCBwMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhnZXRYKDIpLCBnZXRZKDIpKTtcclxuICAgIC8vZHJhdyB0aGUgbWFpbiB0cmlhbmdsZVxyXG4gICAgZy5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8ocDFbMF0sIHAxWzFdKTtcclxuICAgIGcubGluZVRvKHAyWzBdLCBwMlsxXSk7XHJcbiAgICBnLmxpbmVUbyhwM1swXSwgcDNbMV0pO1xyXG4gICAgZy5jbG9zZVBhdGgoKTtcclxuICAgIGcuc3Ryb2tlKCk7XHJcbiAgICAvL2RyYXcgYSBkb3QgYXQgZWFjaCBpbmZsYXRlZCBwaXhlbCBjZW50ZXJcclxuICAgIGcuZmlsbFN0eWxlID0gJyNBQUEnO1xyXG4gICAgZm9yIChsZXQgeCA9IGNhbnZhc1NjYWxlIC8gMjsgeCA8IGNhbnZhczIud2lkdGg7IHggKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICBmb3IgKGxldCB5ID0gY2FudmFzU2NhbGUgLyAyOyB5IDwgY2FudmFzMi5oZWlnaHQ7IHkgKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgZy5hcmMoeCwgeSwgMSwgMCwgcGkyKTtcclxuICAgICAgICAgICAgZy5maWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9kcmF3IHRoZSBoYW5kbGVzXHJcbiAgICBnLmZpbGxTdHlsZSA9ICdibHVlJztcclxuICAgIGNvbnN0IHJhZGl1cyA9IDE7XHJcbiAgICBjb25zdCBwb2ludHMgPSBbcDEsIHAyLCBwM107XHJcbiAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHBvaW50cykge1xyXG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZy5hcmMocG9pbnRbMF0sIHBvaW50WzFdLCByYWRpdXMsIDAsIHBpMik7XHJcbiAgICAgICAgZy5maWxsKCk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgeyBhbnRpYWxpYXM6IGZhbHNlIH0pO1xyXG5pZiAoIWdsKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBpbml0aWFsaXNlIFdlYkdMIDooJyk7XHJcbn1cclxuLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlciBvYmplY3QgdG8gc3RvcmUgdmVydGV4IGJ1ZmZlclxyXG5jb25zdCBwb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc0J1ZmZlcik7XHJcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0aWNlcywgZ2wuRFlOQU1JQ19EUkFXKTtcclxuY29uc3QgbmV4dFBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbmV4dFBvc0J1ZmZlcik7XHJcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zLCBnbC5EWU5BTUlDX0RSQVcpO1xyXG5jb25zdCBwcmV2UG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwcmV2UG9zQnVmZmVyKTtcclxuZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3MsIGdsLkRZTkFNSUNfRFJBVyk7XHJcbmNvbnN0IHV2QnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1dkJ1ZmZlcik7XHJcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB1diwgZ2wuU1RBVElDX0RSQVcpO1xyXG5jb25zdCBpbmRleEJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpbmRleEJ1ZmZlcik7XHJcbmdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcclxuLy8gQ3JlYXRlIGEgdmVydGV4IHNoYWRlciBvYmplY3RcclxuY29uc3QgdmVydFNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTtcclxuZ2wuc2hhZGVyU291cmNlKHZlcnRTaGFkZXIsIGNvbnNlcnZhdGl2ZV92ZXJ0XzEuZGVmYXVsdCk7XHJcbmdsLmNvbXBpbGVTaGFkZXIodmVydFNoYWRlcik7XHJcbmlmIChTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0U2hhZGVyKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHZlcnRTaGFkZXIpKSk7XHJcbn1cclxuLy8gQ3JlYXRlIGZyYWdtZW50IHNoYWRlciBvYmplY3RcclxuY29uc3QgZnJhZ1NoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xyXG5nbC5zaGFkZXJTb3VyY2UoZnJhZ1NoYWRlciwgY29uc2VydmF0aXZlX2ZyYWdfMS5kZWZhdWx0KTtcclxuZ2wuY29tcGlsZVNoYWRlcihmcmFnU2hhZGVyKTtcclxuaWYgKFN0cmluZyhnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdTaGFkZXIpKS50cmltKCkgIT09ICcnKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ1NoYWRlcikpKTtcclxufVxyXG4vLyBDcmVhdGUgYSBzaGFkZXIgcHJvZ3JhbSBvYmplY3QgdG8gc3RvcmVcclxuLy8gdGhlIGNvbWJpbmVkIHNoYWRlciBwcm9ncmFtXHJcbmNvbnN0IHNoYWRlclByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbmdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCB2ZXJ0U2hhZGVyKTtcclxuZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdTaGFkZXIpO1xyXG5nbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcclxuaWYgKFN0cmluZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKSkpO1xyXG59XHJcbi8vIFVzZSB0aGUgY29tYmluZWQgc2hhZGVyIHByb2dyYW0gb2JqZWN0XHJcbmdsLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XHJcbmNvbnN0IHBvc0F0dHIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAncG9zJyk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc0F0dHIsIHZlcnRleFNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc0F0dHIpO1xyXG4vLyBuZWVkIHRvIGR1cGxpY2F0ZSB0aGUgdmVydGV4IGJ1ZmZlcnMganVzdCB0byBhY2Nlc3MgdGhlIG90aGVyIHRyaWFuZ2xlIHBvc2l0aW9ucyA6KFxyXG5jb25zdCBwcmV2UG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICdwcmV2UG9zJyk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwcmV2UG9zQnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcihwcmV2UG9zQXR0ciwgdmVydGV4U2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocHJldlBvc0F0dHIpO1xyXG5jb25zdCBuZXh0UG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICduZXh0UG9zJyk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zQnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcihuZXh0UG9zQXR0ciwgdmVydGV4U2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobmV4dFBvc0F0dHIpO1xyXG5jb25zdCB1dkF0dHIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAndXYnKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHV2QnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcih1dkF0dHIsIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHV2QXR0cik7XHJcbmNvbnN0IG9mZnNldFVuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ29mZnNldCcpO1xyXG5nbC51bmlmb3JtMWYob2Zmc2V0VW5pZm9ybSwgTWF0aC5zcXJ0KDIpIC8gY2FudmFzLndpZHRoKTtcclxuY29uc3Qgc2NyZWVuU2l6ZVVuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3NjcmVlblNpemUnKTtcclxuZ2wudW5pZm9ybTJmdihzY3JlZW5TaXplVW5pZm9ybSwgW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0pO1xyXG4vL2luaXRcclxuZ2wuY2xlYXJDb2xvcigxLjAsIDEuMCwgMS4wLCAxLjApO1xyXG5nbC52aWV3cG9ydCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5nbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7XHJcbi8vIGRyYXdcclxuY29uc3QgZHJhd0dMID0gKCkgPT4ge1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbiAgICAvL3VwbG9hZCBuZXcgcG9zaXRpb24gZGF0YVxyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc0J1ZmZlcik7XHJcbiAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgdmVydGljZXMpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG5leHRQb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIG5leHRQb3MpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHByZXZQb3MpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhCdWZmZXIpO1xyXG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgaW5kaWNlcy5sZW5ndGgsIGdsLlVOU0lHTkVEX1NIT1JULCAwKTtcclxufTtcclxuLy9hbmltYXRlIHRoZSB0b3AgdmVydGV4IGJldHdlZW4gLTEgYW5kIDEgYW5kIHRyaWdnZXIgdG8gcmVkcmF3XHJcbmNvbnN0IHNldFZlcnRleFBvc2l0aW9uID0gKGluZGV4LCBwb3MpID0+IHtcclxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBpbmRleCAqIHZlcnRleFNpemU7XHJcbiAgICB2ZXJ0aWNlc1tzdGFydEluZGV4XSA9IHBvc1swXTtcclxuICAgIHZlcnRpY2VzW3N0YXJ0SW5kZXggKyAxXSA9IHBvc1sxXTtcclxuICAgIGNvbnN0IHByZXZQb3NTdGFydEluZGV4ID0gKHN0YXJ0SW5kZXggKyB2ZXJ0ZXhTaXplKSAlIHByZXZQb3MubGVuZ3RoO1xyXG4gICAgcHJldlBvc1twcmV2UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XHJcbiAgICBwcmV2UG9zW3ByZXZQb3NTdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XHJcbiAgICBjb25zdCBuZXh0UG9zU3RhcnRJbmRleCA9IChzdGFydEluZGV4IC0gdmVydGV4U2l6ZSArIG5leHRQb3MubGVuZ3RoKSAlIG5leHRQb3MubGVuZ3RoO1xyXG4gICAgbmV4dFBvc1tuZXh0UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XHJcbiAgICBuZXh0UG9zW25leHRQb3NTdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XHJcbn07XHJcbmNvbnN0IHAxRGlyID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKDEsIDEpO1xyXG5jb25zdCBwMkRpciA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygtMSwgLTEpO1xyXG5jb25zdCBwM0RpciA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygtMSwgLTEpO1xyXG5jb25zdCBuZXdQMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1swXSwgdmVydGljZXNbMV0pO1xyXG5jb25zdCBuZXdQMiA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1syXSwgdmVydGljZXNbM10pO1xyXG5jb25zdCBuZXdQMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1s0XSwgdmVydGljZXNbNV0pO1xyXG5jb25zdCBzdGVwID0gMC4wMDE7XHJcbmNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICBuZXdQMVswXSArPSBzdGVwICogcDFEaXJbMF07XHJcbiAgICBuZXdQMVsxXSArPSBzdGVwICogcDFEaXJbMV07XHJcbiAgICBpZiAoTWF0aC5hYnMobmV3UDFbMF0pID4gMSlcclxuICAgICAgICBwMURpclswXSAqPSAtMTtcclxuICAgIGlmIChNYXRoLmFicyhuZXdQMVsxXSkgPiAxKVxyXG4gICAgICAgIHAxRGlyWzFdICo9IC0xO1xyXG4gICAgc2V0VmVydGV4UG9zaXRpb24oMCwgbmV3UDEpO1xyXG4gICAgbmV3UDJbMF0gKz0gc3RlcCAqIHAyRGlyWzBdO1xyXG4gICAgbmV3UDJbMV0gKz0gc3RlcCAqIHAyRGlyWzFdO1xyXG4gICAgaWYgKE1hdGguYWJzKG5ld1AyWzBdKSA+IDEpXHJcbiAgICAgICAgcDJEaXJbMF0gKj0gLTE7XHJcbiAgICBpZiAoTWF0aC5hYnMobmV3UDJbMV0pID4gMSlcclxuICAgICAgICBwMkRpclsxXSAqPSAtMTtcclxuICAgIHNldFZlcnRleFBvc2l0aW9uKDEsIG5ld1AyKTtcclxuICAgIG5ld1AzWzBdICs9IHN0ZXAgKiBwM0RpclswXTtcclxuICAgIG5ld1AzWzFdICs9IHN0ZXAgKiBwM0RpclsxXTtcclxuICAgIGlmIChNYXRoLmFicyhuZXdQM1swXSkgPiAxKVxyXG4gICAgICAgIHAzRGlyWzBdICo9IC0xO1xyXG4gICAgaWYgKE1hdGguYWJzKG5ld1AzWzFdKSA+IDEpXHJcbiAgICAgICAgcDNEaXJbMV0gKj0gLTE7XHJcbiAgICBzZXRWZXJ0ZXhQb3NpdGlvbigyLCBuZXdQMyk7XHJcbiAgICBkcmF3MkQoKTtcclxuICAgIGRyYXdHTCgpO1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG59O1xyXG5hbmltYXRlKCk7XHJcbiJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJ0aGlzIiwibW9kIiwiX19lc01vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2xfbWF0cml4XzEiLCJjb25zZXJ2YXRpdmVfdmVydF8xIiwiY29uc2VydmF0aXZlX2ZyYWdfMSIsInZlcnRpY2VzIiwiRmxvYXQzMkFycmF5IiwibmV4dFBvcyIsIm9mIiwic2xpY2UiLCJwcmV2UG9zIiwibGVuZ3RoIiwidXYiLCJpbmRpY2VzIiwiVWludDE2QXJyYXkiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FudmFzMiIsImciLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJwaTIiLCJNYXRoIiwiUEkiLCJjYW52YXNTY2FsZSIsIndpZHRoIiwiZ2V0WCIsImluZGV4IiwiZmxvb3IiLCJnZXRZIiwiaGVpZ2h0IiwiZ2wiLCJhbnRpYWxpYXMiLCJwb3NCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkRZTkFNSUNfRFJBVyIsIm5leHRQb3NCdWZmZXIiLCJwcmV2UG9zQnVmZmVyIiwidXZCdWZmZXIiLCJTVEFUSUNfRFJBVyIsImluZGV4QnVmZmVyIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJ2ZXJ0U2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiVkVSVEVYX1NIQURFUiIsInNoYWRlclNvdXJjZSIsImRlZmF1bHQiLCJjb21waWxlU2hhZGVyIiwiU3RyaW5nIiwiZ2V0U2hhZGVySW5mb0xvZyIsInRyaW0iLCJmcmFnU2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwic2hhZGVyUHJvZ3JhbSIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1JbmZvTG9nIiwidXNlUHJvZ3JhbSIsInBvc0F0dHIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwicHJldlBvc0F0dHIiLCJuZXh0UG9zQXR0ciIsInV2QXR0ciIsIm9mZnNldFVuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJ1bmlmb3JtMWYiLCJzcXJ0Iiwic2NyZWVuU2l6ZVVuaWZvcm0iLCJ1bmlmb3JtMmZ2IiwiY2xlYXJDb2xvciIsInZpZXdwb3J0IiwiZW5hYmxlIiwiREVQVEhfVEVTVCIsInNldFZlcnRleFBvc2l0aW9uIiwicG9zIiwic3RhcnRJbmRleCIsInByZXZQb3NTdGFydEluZGV4IiwibmV4dFBvc1N0YXJ0SW5kZXgiLCJwMURpciIsInZlYzIiLCJmcm9tVmFsdWVzIiwicDJEaXIiLCJwM0RpciIsIm5ld1AxIiwibmV3UDIiLCJuZXdQMyIsInN0ZXAiLCJhbmltYXRlIiwiYWJzIiwiY2xlYXJSZWN0Iiwic3Ryb2tlU3R5bGUiLCJ4IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwieSIsInAxIiwicDIiLCJwMyIsImNsb3NlUGF0aCIsImZpbGxTdHlsZSIsImFyYyIsImZpbGwiLCJwb2ludHMiLCJwb2ludCIsImRyYXcyRCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsImJ1ZmZlclN1YkRhdGEiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRVMiLCJVTlNJR05FRF9TSE9SVCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJzb3VyY2VSb290IjoiIn0=