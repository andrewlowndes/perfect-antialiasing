"use strict";(self.webpackChunksubpixel_rendering=self.webpackChunksubpixel_rendering||[]).push([[327],{876:function(e,r,n){var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const o=n(887),i=t(n(5)),a=t(n(938)),s=new Float32Array([-.75,-.75,0,.75,.75,-.75]),c=Float32Array.of(...s.slice(2),...s.slice(0,2)),l=Float32Array.of(...s.slice(s.length-2),...s.slice(0,s.length-2)),f=new Float32Array([1,0,0,0,1,0,0,0,1]),h=new Uint16Array([0,1,2]),u=document.getElementById("canvas1"),A=document.getElementById("canvas2"),v=A.getContext("2d");if(!v)throw new Error("Could not initialise graphics :(");const g=2*Math.PI,b=A.width/u.width,d=e=>Math.floor((s[2*h[e]]/2+.5)*A.width),R=e=>Math.floor(A.height-(s[2*h[e]+1]/2+.5)*A.height),F=u.getContext("webgl2",{antialias:!1});if(!F)throw new Error("Could not initialise WebGL :(");const P=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,P),F.bufferData(F.ARRAY_BUFFER,s,F.DYNAMIC_DRAW);const S=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,S),F.bufferData(F.ARRAY_BUFFER,c,F.DYNAMIC_DRAW);const p=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,p),F.bufferData(F.ARRAY_BUFFER,l,F.DYNAMIC_DRAW);const m=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,m),F.bufferData(F.ARRAY_BUFFER,f,F.STATIC_DRAW);const _=F.createShader(F.VERTEX_SHADER);if(F.shaderSource(_,i.default),F.compileShader(_),""!==String(F.getShaderInfoLog(_)).trim())throw new Error(String(F.getShaderInfoLog(_)));const B=F.createShader(F.FRAGMENT_SHADER);if(F.shaderSource(B,a.default),F.compileShader(B),""!==String(F.getShaderInfoLog(B)).trim())throw new Error(String(F.getShaderInfoLog(B)));const E=F.createProgram();if(F.attachShader(E,_),F.attachShader(E,B),F.linkProgram(E),""!==String(F.getProgramInfoLog(E)).trim())throw new Error(String(F.getProgramInfoLog(E)));F.useProgram(E);const w=F.getAttribLocation(E,"pos");F.bindBuffer(F.ARRAY_BUFFER,P),F.vertexAttribPointer(w,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(w);const x=F.getAttribLocation(E,"prevPos");F.bindBuffer(F.ARRAY_BUFFER,p),F.vertexAttribPointer(x,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(x);const T=F.getAttribLocation(E,"nextPos");F.bindBuffer(F.ARRAY_BUFFER,S),F.vertexAttribPointer(T,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(T);const D=F.getAttribLocation(E,"uv");F.bindBuffer(F.ARRAY_BUFFER,m),F.vertexAttribPointer(D,3,F.FLOAT,!1,0,0),F.enableVertexAttribArray(D);const U=F.getUniformLocation(E,"screenSize");F.uniform2fv(U,[u.width,u.height]),F.clearColor(1,1,1,1),F.viewport(0,0,u.width,u.height),F.enable(F.DEPTH_TEST);const y=(e,r)=>{const n=2*e;s[n]=r[0],s[n+1]=r[1];const t=(n+2)%l.length;l[t]=r[0],l[t+1]=r[1];const o=(n-2+c.length)%c.length;c[o]=r[0],c[o+1]=r[1]},Y=o.vec2.fromValues(1,1),C=o.vec2.fromValues(-1,-1),L=o.vec2.fromValues(-1,-1),M=o.vec2.fromValues(s[0],s[1]),I=o.vec2.fromValues(s[2],s[3]),V=o.vec2.fromValues(s[4],s[5]),O=.001,N=()=>{M[0]+=O*Y[0],M[1]+=O*Y[1],Math.abs(M[0])>1&&(Y[0]*=-1),Math.abs(M[1])>1&&(Y[1]*=-1),y(0,M),I[0]+=O*C[0],I[1]+=O*C[1],Math.abs(I[0])>1&&(C[0]*=-1),Math.abs(I[1])>1&&(C[1]*=-1),y(1,I),V[0]+=O*L[0],V[1]+=O*L[1],Math.abs(V[0])>1&&(L[0]*=-1),Math.abs(V[1])>1&&(L[1]*=-1),y(2,V),(()=>{v.clearRect(0,0,A.width,A.height),v.strokeStyle="#DDDDDD";for(let e=0;e<A.width;e+=b)v.beginPath(),v.moveTo(Math.floor(e),0),v.lineTo(Math.floor(e),A.height),v.stroke();for(let e=0;e<A.height;e+=b)v.beginPath(),v.moveTo(0,Math.floor(e)),v.lineTo(A.width,Math.floor(e)),v.stroke();const e=o.vec2.fromValues(d(0),R(0)),r=o.vec2.fromValues(d(1),R(1)),n=o.vec2.fromValues(d(2),R(2));v.strokeStyle="white",v.beginPath(),v.moveTo(e[0],e[1]),v.lineTo(r[0],r[1]),v.lineTo(n[0],n[1]),v.closePath(),v.stroke(),v.fillStyle="#AAA";for(let e=b/2;e<A.width;e+=b)for(let r=b/2;r<A.height;r+=b)v.beginPath(),v.arc(e,r,1,0,g),v.fill();v.fillStyle="blue";const t=[e,r,n];for(const e of t)v.beginPath(),v.arc(e[0],e[1],1,0,g),v.fill()})(),F.clear(F.COLOR_BUFFER_BIT),F.bindBuffer(F.ARRAY_BUFFER,P),F.bufferSubData(F.ARRAY_BUFFER,0,s),F.bindBuffer(F.ARRAY_BUFFER,S),F.bufferSubData(F.ARRAY_BUFFER,0,c),F.bindBuffer(F.ARRAY_BUFFER,p),F.bufferSubData(F.ARRAY_BUFFER,0,l),F.drawArrays(F.TRIANGLES,0,3),requestAnimationFrame(N)};N()},938:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nin vec3 vUv;\r\nflat in vec4 bounds;\r\n\r\nout vec4 outColour;\r\n\r\nvoid main(void) {\r\n  if (gl_FragCoord.x < bounds.x || gl_FragCoord.y < bounds.y || gl_FragCoord.x > bounds.z || gl_FragCoord.y > bounds.w) {\r\n    discard;\r\n  }\r\n\r\n  outColour = vec4(vUv, 1.0);\r\n}\r\n"},5:e=>{e.exports="#version 300 es\r\n\r\nuniform vec2 screenSize;\r\n\r\nin vec3 uv;\r\nin vec2 pos;\r\nin vec2 prevPos;\r\nin vec2 nextPos;\r\n\r\nout vec3 vUv;\r\nflat out vec4 bounds;\r\n\r\nconst float EPSILON = 0.0000001;\r\n\r\nvec2 clipToScreenSpace(vec2 pos) {\r\n    return screenSize.xy * (pos / 2.0 + 0.5);\r\n}\r\n\r\nvec2 screenSpaceToClipSpace(vec2 pos) {\r\n    return ((pos / screenSize.xy) - 0.5) * 2.0;\r\n}\r\n\r\nconst float diagonalOffset = sqrt(2.0) / 2.0;\r\n\r\nvoid main(void) {\r\n    vec2 screenPos = clipToScreenSpace(pos);\r\n    vec2 screenNextPos = clipToScreenSpace(nextPos);\r\n    vec2 screenPrevPos = clipToScreenSpace(prevPos);\r\n    \r\n    // determine a new vertex position such that it covers the neighbour pixel centers\r\n    vec2 a = normalize(screenPrevPos - screenPos);\r\n    vec2 b = normalize(screenNextPos - screenPos);\r\n    float angle = sqrt((1.0 - dot(a, b)) / 2.0);\r\n    \r\n    vec2 vecPos;\r\n    if (abs(angle) > EPSILON) {\r\n        vecPos = screenSpaceToClipSpace(screenPos - normalize(a + b) * diagonalOffset / angle);\r\n    } else {\r\n        vecPos = pos;\r\n    }\r\n\r\n    bounds = vec4(\r\n        min(min(screenPos, screenNextPos), screenPrevPos) - 0.5,\r\n        max(max(screenPos, screenNextPos), screenPrevPos) + 0.5\r\n    );\r\n\r\n    // TODO: offset the uv so it is still inline with the original triangle position?\r\n    vUv = uv;\r\n\r\n    gl_Position = vec4(vecPos, 0.0, 1.0);\r\n}\r\n"}},e=>{e(e.s=876)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bmcvLi9zcmMvZGVtb3MvY29uc2VydmF0aXZlUmFzdGVyaXNhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGdsX21hdHJpeF8xID0gcmVxdWlyZShcImdsLW1hdHJpeFwiKTtcbmNvbnN0IGNvbnNlcnZhdGl2ZV92ZXJ0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3NoYWRlcnMvY29uc2VydmF0aXZlLnZlcnRcIikpO1xuY29uc3QgY29uc2VydmF0aXZlX2ZyYWdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vc2hhZGVycy9jb25zZXJ2YXRpdmUuZnJhZ1wiKSk7XG5jb25zdCB2ZXJ0ZXhTaXplID0gMjtcbmNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgLTAuNzUsIC0wLjc1LCAwLjAsIDAuNzUsXG4gICAgLy8tMC41LCAtMC4yLFxuICAgIDAuNzUsIC0wLjc1XG5dKTtcbmNvbnN0IG5leHRQb3MgPSBGbG9hdDMyQXJyYXkub2YoLi4udmVydGljZXMuc2xpY2UodmVydGV4U2l6ZSksIC4uLnZlcnRpY2VzLnNsaWNlKDAsIHZlcnRleFNpemUpKTtcbmNvbnN0IHByZXZQb3MgPSBGbG9hdDMyQXJyYXkub2YoLi4udmVydGljZXMuc2xpY2UodmVydGljZXMubGVuZ3RoIC0gdmVydGV4U2l6ZSksIC4uLnZlcnRpY2VzLnNsaWNlKDAsIHZlcnRpY2VzLmxlbmd0aCAtIHZlcnRleFNpemUpKTtcbmNvbnN0IHV2ID0gbmV3IEZsb2F0MzJBcnJheShbMS4wLCAwLjAsIDAuMCwgMC4wLCAxLjAsIDAuMCwgMC4wLCAwLjAsIDEuMF0pO1xuY29uc3QgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMl0pO1xuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhczEnKTtcbmNvbnN0IGNhbnZhczIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzMicpO1xuY29uc3QgZyA9IGNhbnZhczIuZ2V0Q29udGV4dCgnMmQnKTtcbmlmICghZykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGluaXRpYWxpc2UgZ3JhcGhpY3MgOignKTtcbn1cbmNvbnN0IHBpMiA9IE1hdGguUEkgKiAyO1xuY29uc3QgY2FudmFzU2NhbGUgPSBjYW52YXMyLndpZHRoIC8gY2FudmFzLndpZHRoO1xuY29uc3QgZ2V0WCA9IChpbmRleCkgPT4gTWF0aC5mbG9vcigodmVydGljZXNbaW5kaWNlc1tpbmRleF0gKiB2ZXJ0ZXhTaXplXSAvIDIgKyAwLjUpICogY2FudmFzMi53aWR0aCk7XG5jb25zdCBnZXRZID0gKGluZGV4KSA9PiBNYXRoLmZsb29yKGNhbnZhczIuaGVpZ2h0IC0gKHZlcnRpY2VzW2luZGljZXNbaW5kZXhdICogdmVydGV4U2l6ZSArIDFdIC8gMiArIDAuNSkgKiBjYW52YXMyLmhlaWdodCk7XG5jb25zdCBkcmF3MkQgPSAoKSA9PiB7XG4gICAgZy5jbGVhclJlY3QoMCwgMCwgY2FudmFzMi53aWR0aCwgY2FudmFzMi5oZWlnaHQpO1xuICAgIC8vZHJhdyBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBsaW5lcyBzbyB3ZSBjYW4gc2VlIHRoZSBwaXhlbCBvdXRsaW5lc1xuICAgIGcuc3Ryb2tlU3R5bGUgPSAnI0RERERERCc7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBjYW52YXMyLndpZHRoOyB4ICs9IGNhbnZhc1NjYWxlKSB7XG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgICAgIGcubW92ZVRvKE1hdGguZmxvb3IoeCksIDApO1xuICAgICAgICBnLmxpbmVUbyhNYXRoLmZsb29yKHgpLCBjYW52YXMyLmhlaWdodCk7XG4gICAgICAgIGcuc3Ryb2tlKCk7XG4gICAgfVxuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY2FudmFzMi5oZWlnaHQ7IHkgKz0gY2FudmFzU2NhbGUpIHtcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5tb3ZlVG8oMCwgTWF0aC5mbG9vcih5KSk7XG4gICAgICAgIGcubGluZVRvKGNhbnZhczIud2lkdGgsIE1hdGguZmxvb3IoeSkpO1xuICAgICAgICBnLnN0cm9rZSgpO1xuICAgIH1cbiAgICBjb25zdCBwMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhnZXRYKDApLCBnZXRZKDApKTtcbiAgICBjb25zdCBwMiA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhnZXRYKDEpLCBnZXRZKDEpKTtcbiAgICBjb25zdCBwMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhnZXRYKDIpLCBnZXRZKDIpKTtcbiAgICAvL2RyYXcgdGhlIG1haW4gdHJpYW5nbGVcbiAgICBnLnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIGcubW92ZVRvKHAxWzBdLCBwMVsxXSk7XG4gICAgZy5saW5lVG8ocDJbMF0sIHAyWzFdKTtcbiAgICBnLmxpbmVUbyhwM1swXSwgcDNbMV0pO1xuICAgIGcuY2xvc2VQYXRoKCk7XG4gICAgZy5zdHJva2UoKTtcbiAgICAvL2RyYXcgYSBkb3QgYXQgZWFjaCBpbmZsYXRlZCBwaXhlbCBjZW50ZXJcbiAgICBnLmZpbGxTdHlsZSA9ICcjQUFBJztcbiAgICBmb3IgKGxldCB4ID0gY2FudmFzU2NhbGUgLyAyOyB4IDwgY2FudmFzMi53aWR0aDsgeCArPSBjYW52YXNTY2FsZSkge1xuICAgICAgICBmb3IgKGxldCB5ID0gY2FudmFzU2NhbGUgLyAyOyB5IDwgY2FudmFzMi5oZWlnaHQ7IHkgKz0gY2FudmFzU2NhbGUpIHtcbiAgICAgICAgICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBnLmFyYyh4LCB5LCAxLCAwLCBwaTIpO1xuICAgICAgICAgICAgZy5maWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy9kcmF3IHRoZSBoYW5kbGVzXG4gICAgZy5maWxsU3R5bGUgPSAnYmx1ZSc7XG4gICAgY29uc3QgcmFkaXVzID0gMTtcbiAgICBjb25zdCBwb2ludHMgPSBbcDEsIHAyLCBwM107XG4gICAgZm9yIChjb25zdCBwb2ludCBvZiBwb2ludHMpIHtcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5hcmMocG9pbnRbMF0sIHBvaW50WzFdLCByYWRpdXMsIDAsIHBpMik7XG4gICAgICAgIGcuZmlsbCgpO1xuICAgIH1cbn07XG5jb25zdCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCB7IGFudGlhbGlhczogZmFsc2UgfSk7XG5pZiAoIWdsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgaW5pdGlhbGlzZSBXZWJHTCA6KCcpO1xufVxuLy8gQ3JlYXRlIGFuIGVtcHR5IGJ1ZmZlciBvYmplY3QgdG8gc3RvcmUgdmVydGV4IGJ1ZmZlclxuY29uc3QgcG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcG9zQnVmZmVyKTtcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0aWNlcywgZ2wuRFlOQU1JQ19EUkFXKTtcbmNvbnN0IG5leHRQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zQnVmZmVyKTtcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zLCBnbC5EWU5BTUlDX0RSQVcpO1xuY29uc3QgcHJldlBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xuZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3MsIGdsLkRZTkFNSUNfRFJBVyk7XG5jb25zdCB1dkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHV2QnVmZmVyKTtcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB1diwgZ2wuU1RBVElDX0RSQVcpO1xuLy8gQ3JlYXRlIGEgdmVydGV4IHNoYWRlciBvYmplY3RcbmNvbnN0IHZlcnRTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XG5nbC5zaGFkZXJTb3VyY2UodmVydFNoYWRlciwgY29uc2VydmF0aXZlX3ZlcnRfMS5kZWZhdWx0KTtcbmdsLmNvbXBpbGVTaGFkZXIodmVydFNoYWRlcik7XG5pZiAoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2codmVydFNoYWRlcikpLnRyaW0oKSAhPT0gJycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2codmVydFNoYWRlcikpKTtcbn1cbi8vIENyZWF0ZSBmcmFnbWVudCBzaGFkZXIgb2JqZWN0XG5jb25zdCBmcmFnU2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NIQURFUik7XG5nbC5zaGFkZXJTb3VyY2UoZnJhZ1NoYWRlciwgY29uc2VydmF0aXZlX2ZyYWdfMS5kZWZhdWx0KTtcbmdsLmNvbXBpbGVTaGFkZXIoZnJhZ1NoYWRlcik7XG5pZiAoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ1NoYWRlcikpLnRyaW0oKSAhPT0gJycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ1NoYWRlcikpKTtcbn1cbi8vIENyZWF0ZSBhIHNoYWRlciBwcm9ncmFtIG9iamVjdCB0byBzdG9yZVxuLy8gdGhlIGNvbWJpbmVkIHNoYWRlciBwcm9ncmFtXG5jb25zdCBzaGFkZXJQcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIHZlcnRTaGFkZXIpO1xuZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdTaGFkZXIpO1xuZ2wubGlua1Byb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XG5pZiAoU3RyaW5nKGdsLmdldFByb2dyYW1JbmZvTG9nKHNoYWRlclByb2dyYW0pKS50cmltKCkgIT09ICcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKSkpO1xufVxuLy8gVXNlIHRoZSBjb21iaW5lZCBzaGFkZXIgcHJvZ3JhbSBvYmplY3RcbmdsLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XG5jb25zdCBwb3NBdHRyID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3BvcycpO1xuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc0J1ZmZlcik7XG5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc0F0dHIsIHZlcnRleFNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NBdHRyKTtcbi8vIG5lZWQgdG8gZHVwbGljYXRlIHRoZSB2ZXJ0ZXggYnVmZmVycyBqdXN0IHRvIGFjY2VzcyB0aGUgb3RoZXIgdHJpYW5nbGUgcG9zaXRpb25zIDooXG5jb25zdCBwcmV2UG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICdwcmV2UG9zJyk7XG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcHJldlBvc0J1ZmZlcik7XG5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByZXZQb3NBdHRyLCB2ZXJ0ZXhTaXplLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocHJldlBvc0F0dHIpO1xuY29uc3QgbmV4dFBvc0F0dHIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAnbmV4dFBvcycpO1xuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG5leHRQb3NCdWZmZXIpO1xuZ2wudmVydGV4QXR0cmliUG9pbnRlcihuZXh0UG9zQXR0ciwgdmVydGV4U2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KG5leHRQb3NBdHRyKTtcbmNvbnN0IHV2QXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICd1dicpO1xuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHV2QnVmZmVyKTtcbmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodXZBdHRyLCAzLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodXZBdHRyKTtcbmNvbnN0IHNjcmVlblNpemVVbmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dyYW0sICdzY3JlZW5TaXplJyk7XG5nbC51bmlmb3JtMmZ2KHNjcmVlblNpemVVbmlmb3JtLCBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSk7XG4vL2luaXRcbmdsLmNsZWFyQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKTtcbmdsLnZpZXdwb3J0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5nbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7XG4vLyBkcmF3XG5jb25zdCBkcmF3R0wgPSAoKSA9PiB7XG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgLy91cGxvYWQgbmV3IHBvc2l0aW9uIGRhdGFcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcG9zQnVmZmVyKTtcbiAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgdmVydGljZXMpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zQnVmZmVyKTtcbiAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgbmV4dFBvcyk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBwcmV2UG9zKTtcbiAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgMyk7XG59O1xuLy9hbmltYXRlIHRoZSB0b3AgdmVydGV4IGJldHdlZW4gLTEgYW5kIDEgYW5kIHRyaWdnZXIgdG8gcmVkcmF3XG5jb25zdCBzZXRWZXJ0ZXhQb3NpdGlvbiA9IChpbmRleCwgcG9zKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IGluZGV4ICogdmVydGV4U2l6ZTtcbiAgICB2ZXJ0aWNlc1tzdGFydEluZGV4XSA9IHBvc1swXTtcbiAgICB2ZXJ0aWNlc1tzdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XG4gICAgY29uc3QgcHJldlBvc1N0YXJ0SW5kZXggPSAoc3RhcnRJbmRleCArIHZlcnRleFNpemUpICUgcHJldlBvcy5sZW5ndGg7XG4gICAgcHJldlBvc1twcmV2UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XG4gICAgcHJldlBvc1twcmV2UG9zU3RhcnRJbmRleCArIDFdID0gcG9zWzFdO1xuICAgIGNvbnN0IG5leHRQb3NTdGFydEluZGV4ID0gKHN0YXJ0SW5kZXggLSB2ZXJ0ZXhTaXplICsgbmV4dFBvcy5sZW5ndGgpICUgbmV4dFBvcy5sZW5ndGg7XG4gICAgbmV4dFBvc1tuZXh0UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XG4gICAgbmV4dFBvc1tuZXh0UG9zU3RhcnRJbmRleCArIDFdID0gcG9zWzFdO1xufTtcbmNvbnN0IHAxRGlyID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKDEsIDEpO1xuY29uc3QgcDJEaXIgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoLTEsIC0xKTtcbmNvbnN0IHAzRGlyID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKC0xLCAtMSk7XG5jb25zdCBuZXdQMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1swXSwgdmVydGljZXNbMV0pO1xuY29uc3QgbmV3UDIgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXModmVydGljZXNbMl0sIHZlcnRpY2VzWzNdKTtcbmNvbnN0IG5ld1AzID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKHZlcnRpY2VzWzRdLCB2ZXJ0aWNlc1s1XSk7XG5jb25zdCBzdGVwID0gMC4wMDE7XG5jb25zdCBhbmltYXRlID0gKCkgPT4ge1xuICAgIG5ld1AxWzBdICs9IHN0ZXAgKiBwMURpclswXTtcbiAgICBuZXdQMVsxXSArPSBzdGVwICogcDFEaXJbMV07XG4gICAgaWYgKE1hdGguYWJzKG5ld1AxWzBdKSA+IDEpXG4gICAgICAgIHAxRGlyWzBdICo9IC0xO1xuICAgIGlmIChNYXRoLmFicyhuZXdQMVsxXSkgPiAxKVxuICAgICAgICBwMURpclsxXSAqPSAtMTtcbiAgICBzZXRWZXJ0ZXhQb3NpdGlvbigwLCBuZXdQMSk7XG4gICAgbmV3UDJbMF0gKz0gc3RlcCAqIHAyRGlyWzBdO1xuICAgIG5ld1AyWzFdICs9IHN0ZXAgKiBwMkRpclsxXTtcbiAgICBpZiAoTWF0aC5hYnMobmV3UDJbMF0pID4gMSlcbiAgICAgICAgcDJEaXJbMF0gKj0gLTE7XG4gICAgaWYgKE1hdGguYWJzKG5ld1AyWzFdKSA+IDEpXG4gICAgICAgIHAyRGlyWzFdICo9IC0xO1xuICAgIHNldFZlcnRleFBvc2l0aW9uKDEsIG5ld1AyKTtcbiAgICBuZXdQM1swXSArPSBzdGVwICogcDNEaXJbMF07XG4gICAgbmV3UDNbMV0gKz0gc3RlcCAqIHAzRGlyWzFdO1xuICAgIGlmIChNYXRoLmFicyhuZXdQM1swXSkgPiAxKVxuICAgICAgICBwM0RpclswXSAqPSAtMTtcbiAgICBpZiAoTWF0aC5hYnMobmV3UDNbMV0pID4gMSlcbiAgICAgICAgcDNEaXJbMV0gKj0gLTE7XG4gICAgc2V0VmVydGV4UG9zaXRpb24oMiwgbmV3UDMpO1xuICAgIGRyYXcyRCgpO1xuICAgIGRyYXdHTCgpO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbn07XG5hbmltYXRlKCk7XG4iXSwibmFtZXMiOlsiX19pbXBvcnREZWZhdWx0IiwidGhpcyIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdsX21hdHJpeF8xIiwiY29uc2VydmF0aXZlX3ZlcnRfMSIsImNvbnNlcnZhdGl2ZV9mcmFnXzEiLCJ2ZXJ0aWNlcyIsIkZsb2F0MzJBcnJheSIsIm5leHRQb3MiLCJvZiIsInNsaWNlIiwicHJldlBvcyIsImxlbmd0aCIsInV2IiwiaW5kaWNlcyIsIlVpbnQxNkFycmF5IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhbnZhczIiLCJnIiwiZ2V0Q29udGV4dCIsIkVycm9yIiwicGkyIiwiTWF0aCIsIlBJIiwiY2FudmFzU2NhbGUiLCJ3aWR0aCIsImdldFgiLCJpbmRleCIsImZsb29yIiwiZ2V0WSIsImhlaWdodCIsImdsIiwiYW50aWFsaWFzIiwicG9zQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsImJ1ZmZlckRhdGEiLCJEWU5BTUlDX0RSQVciLCJuZXh0UG9zQnVmZmVyIiwicHJldlBvc0J1ZmZlciIsInV2QnVmZmVyIiwiU1RBVElDX0RSQVciLCJ2ZXJ0U2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiVkVSVEVYX1NIQURFUiIsInNoYWRlclNvdXJjZSIsImRlZmF1bHQiLCJjb21waWxlU2hhZGVyIiwiU3RyaW5nIiwiZ2V0U2hhZGVySW5mb0xvZyIsInRyaW0iLCJmcmFnU2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwic2hhZGVyUHJvZ3JhbSIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1JbmZvTG9nIiwidXNlUHJvZ3JhbSIsInBvc0F0dHIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwicHJldlBvc0F0dHIiLCJuZXh0UG9zQXR0ciIsInV2QXR0ciIsInNjcmVlblNpemVVbmlmb3JtIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTJmdiIsImNsZWFyQ29sb3IiLCJ2aWV3cG9ydCIsImVuYWJsZSIsIkRFUFRIX1RFU1QiLCJzZXRWZXJ0ZXhQb3NpdGlvbiIsInBvcyIsInN0YXJ0SW5kZXgiLCJwcmV2UG9zU3RhcnRJbmRleCIsIm5leHRQb3NTdGFydEluZGV4IiwicDFEaXIiLCJ2ZWMyIiwiZnJvbVZhbHVlcyIsInAyRGlyIiwicDNEaXIiLCJuZXdQMSIsIm5ld1AyIiwibmV3UDMiLCJzdGVwIiwiYW5pbWF0ZSIsImFicyIsImNsZWFyUmVjdCIsInN0cm9rZVN0eWxlIiwieCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsInkiLCJwMSIsInAyIiwicDMiLCJjbG9zZVBhdGgiLCJmaWxsU3R5bGUiLCJhcmMiLCJmaWxsIiwicG9pbnRzIiwicG9pbnQiLCJkcmF3MkQiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJidWZmZXJTdWJEYXRhIiwiZHJhd0FycmF5cyIsIlRSSUFOR0xFUyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJzb3VyY2VSb290IjoiIn0=