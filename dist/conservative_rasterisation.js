(self.webpackChunksubpixel_rendering=self.webpackChunksubpixel_rendering||[]).push([[327],{876:function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(669);const n=o(r(787)),a=o(r(457)),i=r(887),c=new Float32Array([-.75,-.75,0,.75,.75,-.75]),s=Float32Array.of(...c.slice(2),...c.slice(0,2)),l=Float32Array.of(...c.slice(c.length-2),...c.slice(0,c.length-2)),f=new Float32Array([1,0,0,0,1,0,0,0,1]),u=new Uint16Array([0,1,2]),v=document.getElementById("canvas1"),d=document.getElementById("canvas2"),h=d.getContext("2d");if(!h)throw new Error("Could not initialise graphics :(");const g=2*Math.PI,b=d.width/v.width,A=e=>Math.floor((c[2*u[e]]/2+.5)*d.width),R=e=>Math.floor(d.height-(c[2*u[e]+1]/2+.5)*d.height),m=v.getContext("webgl",{antialias:!1});if(!m)throw new Error("Could not initialise WebGL :(");const F=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,F),m.bufferData(m.ARRAY_BUFFER,c,m.DYNAMIC_DRAW);const E=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,E),m.bufferData(m.ARRAY_BUFFER,s,m.DYNAMIC_DRAW);const _=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,_),m.bufferData(m.ARRAY_BUFFER,l,m.DYNAMIC_DRAW);const p=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,p),m.bufferData(m.ARRAY_BUFFER,f,m.STATIC_DRAW);const B=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,B),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u,m.STATIC_DRAW);const P=m.createShader(m.VERTEX_SHADER);if(m.shaderSource(P,n.default),m.compileShader(P),""!==String(m.getShaderInfoLog(P)).trim())throw new Error(String(m.getShaderInfoLog(P)));const S=m.createShader(m.FRAGMENT_SHADER);if(m.shaderSource(S,a.default),m.compileShader(S),""!==String(m.getShaderInfoLog(S)).trim())throw new Error(String(m.getShaderInfoLog(S)));const w=m.createProgram();if(m.attachShader(w,P),m.attachShader(w,S),m.linkProgram(w),""!==String(m.getProgramInfoLog(w)).trim())throw new Error(String(m.getProgramInfoLog(w)));m.useProgram(w);const x=m.getAttribLocation(w,"pos");m.bindBuffer(m.ARRAY_BUFFER,F),m.vertexAttribPointer(x,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(x);const U=m.getAttribLocation(w,"prevPos");m.bindBuffer(m.ARRAY_BUFFER,_),m.vertexAttribPointer(U,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(U);const D=m.getAttribLocation(w,"nextPos");m.bindBuffer(m.ARRAY_BUFFER,E),m.vertexAttribPointer(D,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(D);const M=m.getAttribLocation(w,"uv");m.bindBuffer(m.ARRAY_BUFFER,p),m.vertexAttribPointer(M,3,m.FLOAT,!1,0,0),m.enableVertexAttribArray(M);const T=m.getUniformLocation(w,"offset");m.uniform1f(T,Math.sqrt(2)/v.width);const y=m.getUniformLocation(w,"screenSize");m.uniform2fv(y,[v.width,v.height]),m.clearColor(1,1,1,1),m.viewport(0,0,v.width,v.height),m.enable(m.DEPTH_TEST);const Y=(e,t)=>{const r=2*e;c[r]=t[0],c[r+1]=t[1];const o=(r+2)%l.length;l[o]=t[0],l[o+1]=t[1];const n=(r-2+s.length)%s.length;s[n]=t[0],s[n+1]=t[1]},L=i.vec2.fromValues(1,1),C=i.vec2.fromValues(-1,-1),I=i.vec2.fromValues(-1,-1),V=i.vec2.fromValues(c[0],c[1]),O=i.vec2.fromValues(c[2],c[3]),k=i.vec2.fromValues(c[4],c[5]),N=.001,z=()=>{V[0]+=N*L[0],V[1]+=N*L[1],Math.abs(V[0])>1&&(L[0]*=-1),Math.abs(V[1])>1&&(L[1]*=-1),Y(0,V),O[0]+=N*C[0],O[1]+=N*C[1],Math.abs(O[0])>1&&(C[0]*=-1),Math.abs(O[1])>1&&(C[1]*=-1),Y(1,O),k[0]+=N*I[0],k[1]+=N*I[1],Math.abs(k[0])>1&&(I[0]*=-1),Math.abs(k[1])>1&&(I[1]*=-1),Y(2,k),(()=>{h.clearRect(0,0,d.width,d.height),h.strokeStyle="#DDDDDD";for(let e=0;e<d.width;e+=b)h.beginPath(),h.moveTo(Math.floor(e),0),h.lineTo(Math.floor(e),d.height),h.stroke();for(let e=0;e<d.height;e+=b)h.beginPath(),h.moveTo(0,Math.floor(e)),h.lineTo(d.width,Math.floor(e)),h.stroke();const e=i.vec2.fromValues(A(0),R(0)),t=i.vec2.fromValues(A(1),R(1)),r=i.vec2.fromValues(A(2),R(2));h.strokeStyle="white",h.beginPath(),h.moveTo(e[0],e[1]),h.lineTo(t[0],t[1]),h.lineTo(r[0],r[1]),h.closePath(),h.stroke(),h.fillStyle="#AAA";for(let e=b/2;e<d.width;e+=b)for(let t=b/2;t<d.height;t+=b)h.beginPath(),h.arc(e,t,1,0,g),h.fill();h.fillStyle="blue";const o=[e,t,r];for(const e of o)h.beginPath(),h.arc(e[0],e[1],1,0,g),h.fill()})(),m.clear(m.COLOR_BUFFER_BIT),m.bindBuffer(m.ARRAY_BUFFER,F),m.bufferSubData(m.ARRAY_BUFFER,0,c),m.bindBuffer(m.ARRAY_BUFFER,E),m.bufferSubData(m.ARRAY_BUFFER,0,s),m.bindBuffer(m.ARRAY_BUFFER,_),m.bufferSubData(m.ARRAY_BUFFER,0,l),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,B),m.drawElements(m.TRIANGLES,u.length,m.UNSIGNED_SHORT,0),requestAnimationFrame(z)};z()},669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inRange=t.avg=t.max2=t.min2=t.toPrecision2=t.lerp2=t.normalize=t.length=t.dot=t.sign=t.abs=t.ceil=t.floor=t.sub=t.adds=t.add=t.divide=t.multiply=t.scale=t.equals=t.determinant2=t.clamp2=void 0;const o=r(887);t.clamp2=(e,t,r)=>{const n=o.vec2.clone(e);return o.vec2.min(n,n,r),o.vec2.max(n,n,t),n},t.determinant2=(e,t)=>e[0]*t[1]-e[1]*t[0],t.equals=o.vec2.equals,t.scale=(e,t)=>o.vec2.scale(o.vec2.create(),e,t),t.multiply=(e,t)=>o.vec2.multiply(o.vec2.create(),e,t),t.divide=(e,t)=>o.vec2.divide(o.vec2.create(),e,t),t.add=(e,t)=>o.vec2.add(o.vec2.create(),e,t),t.adds=(e,t)=>o.vec2.fromValues(e[0]+t,e[1]+t),t.sub=(e,t)=>o.vec2.sub(o.vec2.create(),e,t),t.floor=e=>o.vec2.floor(o.vec2.create(),e),t.ceil=e=>o.vec2.ceil(o.vec2.create(),e),t.abs=e=>o.vec2.fromValues(Math.abs(e[0]),Math.abs(e[1])),t.sign=e=>o.vec2.fromValues(Math.sign(e[0]),Math.sign(e[1])),t.dot=(e,t)=>o.vec2.dot(e,t),t.length=e=>o.vec2.length(e),t.normalize=e=>t.scale(e,1/t.length(e)),t.lerp2=(e,t,r)=>o.vec2.lerp(o.vec2.create(),e,t,r),t.toPrecision2=(e,t)=>(e[0]=parseFloat(e[0].toPrecision(t)),e[1]=parseFloat(e[1].toPrecision(t)),e),t.min2=(...e)=>{const[t,...r]=e,n=o.vec2.clone(t);return r.forEach((e=>{o.vec2.min(n,n,e)})),n},t.max2=(...e)=>{const[t,...r]=e,n=o.vec2.clone(t);return r.forEach((e=>{o.vec2.max(n,n,e)})),n},t.avg=(...e)=>{const t=o.vec2.create();return e.length&&(e.forEach((e=>{o.vec2.add(t,t,e)})),o.vec2.scale(t,t,1/e.length)),t},t.inRange=(e,t,r)=>!(e[0]>r[0]||e[0]<t[0]||e[1]>r[1]||e[1]<t[1])},457:e=>{"use strict";e.exports="precision highp float;\r\n\r\nvarying vec3 vUv;\r\nvarying vec4 bounds;\r\n\r\nvoid main(void) {\r\n  if (gl_FragCoord[0] < bounds[0] || gl_FragCoord[1] < bounds[1] || gl_FragCoord[0] > bounds.z || gl_FragCoord[1] > bounds.w) {\r\n    discard;\r\n  }\r\n\r\n  gl_FragColor = vec4(vUv, 1.0);\r\n}"},787:e=>{"use strict";e.exports="uniform vec2 screenSize;\r\nuniform float offset;\r\n\r\nattribute vec2 pos;\r\nattribute vec2 prevPos;\r\nattribute vec2 nextPos;\r\nattribute vec3 uv;\r\n\r\nvarying vec3 vUv;\r\nvarying vec4 bounds;\r\n\r\nvoid main(void) {\r\n    // determine a new vertex position such that it covers the neighbour pixel centers\r\n    vec2 a = normalize(pos - prevPos);\r\n    vec2 b = normalize(pos - nextPos);\r\n    float angle = sqrt((1.0 - dot(a, b)) / 2.0);\r\n\r\n    vec2 vecPos = pos + normalize(a + b) * (offset / angle);\r\n\r\n    // compute a bounding box and pass to the fragment shader so we don't render outside the inflated triangle bounds\r\n    bounds = screenSize.xyxy * (vec4(min(min(pos, prevPos), nextPos), max(max(pos, prevPos), nextPos)) / 2.0 + 0.5) + vec4(-0.5, -0.5, 0.5, 0.5);\r\n\r\n    // TODO: offset the uv so it is still inline with the original triangle position?\r\n    vUv = uv;\r\n\r\n    gl_Position = vec4(vecPos, 0.0, 1.0);\r\n}"}},e=>{"use strict";e(e.s=876)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvZGVtb3MvY29uc2VydmF0aXZlUmFzdGVyaXNhdGlvbi50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvbWF0aHMvcG9pbnQudHMiXSwibmFtZXMiOlsiX19pbXBvcnREZWZhdWx0IiwidGhpcyIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbnNlcnZhdGl2ZV92ZXJ0XzEiLCJjb25zZXJ2YXRpdmVfZnJhZ18xIiwiZ2xfbWF0cml4XzEiLCJ2ZXJ0aWNlcyIsIkZsb2F0MzJBcnJheSIsIm5leHRQb3MiLCJvZiIsInNsaWNlIiwicHJldlBvcyIsImxlbmd0aCIsInV2IiwiaW5kaWNlcyIsIlVpbnQxNkFycmF5IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhbnZhczIiLCJnIiwiZ2V0Q29udGV4dCIsIkVycm9yIiwicGkyIiwiTWF0aCIsIlBJIiwiY2FudmFzU2NhbGUiLCJ3aWR0aCIsImdldFgiLCJpbmRleCIsImZsb29yIiwiZ2V0WSIsImhlaWdodCIsImdsIiwiYW50aWFsaWFzIiwicG9zQnVmZmVyIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsIkFSUkFZX0JVRkZFUiIsImJ1ZmZlckRhdGEiLCJEWU5BTUlDX0RSQVciLCJuZXh0UG9zQnVmZmVyIiwicHJldlBvc0J1ZmZlciIsInV2QnVmZmVyIiwiU1RBVElDX0RSQVciLCJpbmRleEJ1ZmZlciIsIkVMRU1FTlRfQVJSQVlfQlVGRkVSIiwidmVydFNoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJkZWZhdWx0IiwiY29tcGlsZVNoYWRlciIsIlN0cmluZyIsImdldFNoYWRlckluZm9Mb2ciLCJ0cmltIiwiZnJhZ1NoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsInNoYWRlclByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtSW5mb0xvZyIsInVzZVByb2dyYW0iLCJwb3NBdHRyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInByZXZQb3NBdHRyIiwibmV4dFBvc0F0dHIiLCJ1dkF0dHIiLCJvZmZzZXRVbmlmb3JtIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTFmIiwic3FydCIsInNjcmVlblNpemVVbmlmb3JtIiwidW5pZm9ybTJmdiIsImNsZWFyQ29sb3IiLCJ2aWV3cG9ydCIsImVuYWJsZSIsIkRFUFRIX1RFU1QiLCJzZXRWZXJ0ZXhQb3NpdGlvbiIsInBvcyIsInN0YXJ0SW5kZXgiLCJwcmV2UG9zU3RhcnRJbmRleCIsIm5leHRQb3NTdGFydEluZGV4IiwicDFEaXIiLCJ2ZWMyIiwiZnJvbVZhbHVlcyIsInAyRGlyIiwicDNEaXIiLCJuZXdQMSIsIm5ld1AyIiwibmV3UDMiLCJzdGVwIiwiYW5pbWF0ZSIsImFicyIsImNsZWFyUmVjdCIsInN0cm9rZVN0eWxlIiwieCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsInkiLCJwMSIsInAyIiwicDMiLCJjbG9zZVBhdGgiLCJmaWxsU3R5bGUiLCJhcmMiLCJmaWxsIiwicG9pbnRzIiwicG9pbnQiLCJkcmF3MkQiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJidWZmZXJTdWJEYXRhIiwiZHJhd0VsZW1lbnRzIiwiVFJJQU5HTEVTIiwiVU5TSUdORURfU0hPUlQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJpblJhbmdlIiwiYXZnIiwibWF4MiIsIm1pbjIiLCJ0b1ByZWNpc2lvbjIiLCJsZXJwMiIsIm5vcm1hbGl6ZSIsImRvdCIsInNpZ24iLCJjZWlsIiwic3ViIiwiYWRkcyIsImFkZCIsImRpdmlkZSIsIm11bHRpcGx5Iiwic2NhbGUiLCJlcXVhbHMiLCJkZXRlcm1pbmFudDIiLCJjbGFtcDIiLCJhIiwibWluIiwibWF4Iiwib3V0IiwiY2xvbmUiLCJjcmVhdGUiLCJiIiwidCIsImxlcnAiLCJhbW91bnQiLCJwYXJzZUZsb2F0IiwidG9QcmVjaXNpb24iLCJvYmpzIiwiZmlyc3QiLCJyZXN0IiwicmVzdWx0IiwiZm9yRWFjaCIsIm9iaiJdLCJtYXBwaW5ncyI6IjRIQUNBLElBQUlBLEVBQW1CQyxNQUFRQSxLQUFLRCxpQkFBb0IsU0FBVUUsR0FDOUQsT0FBUUEsR0FBT0EsRUFBSUMsV0FBY0QsRUFBTSxDQUFFLFFBQVdBLElBRXhERSxPQUFPQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRUMsT0FBTyxJQUN0QyxFQUFRLEtBQXhCLE1BQ01DLEVBQXNCUixFQUFnQixFQUFRLE1BQzlDUyxFQUFzQlQsRUFBZ0IsRUFBUSxNQUM5Q1UsRUFBYyxFQUFRLEtBRXRCQyxFQUFXLElBQUlDLGFBQWEsRUFDN0IsS0FBTyxJQUNSLEVBQUssSUFFTCxLQUFPLE1BRUxDLEVBQVVELGFBQWFFLE1BQU1ILEVBQVNJLE1BUHpCLE1BTytDSixFQUFTSSxNQUFNLEVBUDlELElBU2JDLEVBQVVKLGFBQWFFLE1BQU1ILEVBQVNJLE1BQU1KLEVBQVNNLE9BVHhDLE1BU2lFTixFQUFTSSxNQUFNLEVBQUdKLEVBQVNNLE9BVDVGLElBVWJDLEVBQUssSUFBSU4sYUFBYSxDQUN4QixFQUFLLEVBQUssRUFDVixFQUFLLEVBQUssRUFDVixFQUFLLEVBQUssSUFFUk8sRUFBVSxJQUFJQyxZQUFZLENBQUMsRUFBRyxFQUFHLElBQ2pDQyxFQUFTQyxTQUFTQyxlQUFlLFdBQ2pDQyxFQUFVRixTQUFTQyxlQUFlLFdBQ2xDRSxFQUFJRCxFQUFRRSxXQUFXLE1BQzdCLElBQUtELEVBQ0QsTUFBTSxJQUFJRSxNQUFNLG9DQUVwQixNQUFNQyxFQUFnQixFQUFWQyxLQUFLQyxHQUNYQyxFQUFjUCxFQUFRUSxNQUFRWCxFQUFPVyxNQVNyQ0MsRUFBUUMsR0FBVUwsS0FB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QVFFLE1BRXpDMUosRUFBWW1GLEtBQUtrRCxNQUFNbUIsRUFBUUEsRUFBUSxFQUFJSCxFQUFLOUksU0FFN0NpSixHQU1YNUosRUFBUTBILFFBSFEsQ0FBQ2pCLEVBQUlxQyxFQUFLQyxNQUNidEMsRUFBRyxHQUFLc0MsRUFBSSxJQUFNdEMsRUFBRyxHQUFLcUMsRUFBSSxJQUFNckMsRUFBRyxHQUFLc0MsRUFBSSxJQUFNdEMsRUFBRyxHQUFLcUMsRUFBSSxLIiwiZmlsZSI6ImNvbnNlcnZhdGl2ZV9yYXN0ZXJpc2F0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgcG9pbnRfMSA9IHJlcXVpcmUoXCIuLi9tYXRocy9wb2ludFwiKTtcclxuY29uc3QgY29uc2VydmF0aXZlX3ZlcnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vc2hhZGVycy9jb25zZXJ2YXRpdmUudmVydFwiKSk7XHJcbmNvbnN0IGNvbnNlcnZhdGl2ZV9mcmFnXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3NoYWRlcnMvY29uc2VydmF0aXZlLmZyYWdcIikpO1xyXG5jb25zdCBnbF9tYXRyaXhfMSA9IHJlcXVpcmUoXCJnbC1tYXRyaXhcIik7XHJcbmNvbnN0IHZlcnRleFNpemUgPSAyO1xyXG5jb25zdCB2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgLTAuNzUsIC0wLjc1LFxyXG4gICAgMC4wLCAwLjc1LFxyXG4gICAgLy8tMC41LCAtMC4yLFxyXG4gICAgMC43NSwgLTAuNzVcclxuXSk7XHJcbmNvbnN0IG5leHRQb3MgPSBGbG9hdDMyQXJyYXkub2YoLi4udmVydGljZXMuc2xpY2UodmVydGV4U2l6ZSksIC4uLnZlcnRpY2VzLnNsaWNlKDAsIHZlcnRleFNpemUpKTtcclxuO1xyXG5jb25zdCBwcmV2UG9zID0gRmxvYXQzMkFycmF5Lm9mKC4uLnZlcnRpY2VzLnNsaWNlKHZlcnRpY2VzLmxlbmd0aCAtIHZlcnRleFNpemUpLCAuLi52ZXJ0aWNlcy5zbGljZSgwLCB2ZXJ0aWNlcy5sZW5ndGggLSB2ZXJ0ZXhTaXplKSk7XHJcbmNvbnN0IHV2ID0gbmV3IEZsb2F0MzJBcnJheShbXHJcbiAgICAxLjAsIDAuMCwgMC4wLFxyXG4gICAgMC4wLCAxLjAsIDAuMCxcclxuICAgIDAuMCwgMC4wLCAxLjBcclxuXSk7XHJcbmNvbnN0IGluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDJdKTtcclxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhczEnKTtcclxuY29uc3QgY2FudmFzMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMyJyk7XHJcbmNvbnN0IGcgPSBjYW52YXMyLmdldENvbnRleHQoJzJkJyk7XHJcbmlmICghZykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgaW5pdGlhbGlzZSBncmFwaGljcyA6KCcpO1xyXG59XHJcbmNvbnN0IHBpMiA9IE1hdGguUEkgKiAyO1xyXG5jb25zdCBjYW52YXNTY2FsZSA9IGNhbnZhczIud2lkdGggLyBjYW52YXMud2lkdGg7XHJcbmNvbnN0IHBpeGVsT2Zmc2V0ID0gY2FudmFzU2NhbGUgLyAyO1xyXG5jb25zdCBjYWxjdWxhdGVPZmZzZXRQb3NpdGlvbiA9IChwb3NpdGlvbiwgcHJldiwgbmV4dCwgb2Zmc2V0KSA9PiB7XHJcbiAgICBjb25zdCBhID0gcG9pbnRfMS5ub3JtYWxpemUocG9pbnRfMS5zdWIocG9zaXRpb24sIHByZXYpKTtcclxuICAgIGNvbnN0IGIgPSBwb2ludF8xLm5vcm1hbGl6ZShwb2ludF8xLnN1Yihwb3NpdGlvbiwgbmV4dCkpO1xyXG4gICAgY29uc3Qgb3V0VmVjdG9yID0gcG9pbnRfMS5ub3JtYWxpemUocG9pbnRfMS5hZGQoYSwgYikpO1xyXG4gICAgY29uc3QgYW5nbGUgPSBNYXRoLnNxcnQoKDEuMCAtIHBvaW50XzEuZG90KGEsIGIpKSAvIDIuMCk7XHJcbiAgICByZXR1cm4gcG9pbnRfMS5hZGQocG9zaXRpb24sIHBvaW50XzEuc2NhbGUob3V0VmVjdG9yLCBvZmZzZXQgLyBhbmdsZSkpO1xyXG59O1xyXG5jb25zdCBnZXRYID0gKGluZGV4KSA9PiBNYXRoLmZsb29yKCh2ZXJ0aWNlc1tpbmRpY2VzW2luZGV4XSAqIHZlcnRleFNpemVdIC8gMiArIDAuNSkgKiBjYW52YXMyLndpZHRoKTtcclxuY29uc3QgZ2V0WSA9IChpbmRleCkgPT4gTWF0aC5mbG9vcihjYW52YXMyLmhlaWdodCAtICh2ZXJ0aWNlc1tpbmRpY2VzW2luZGV4XSAqIHZlcnRleFNpemUgKyAxXSAvIDIgKyAwLjUpICogY2FudmFzMi5oZWlnaHQpO1xyXG5jb25zdCBkcmF3MkQgPSAoKSA9PiB7XHJcbiAgICBnLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMyLndpZHRoLCBjYW52YXMyLmhlaWdodCk7XHJcbiAgICAvL2RyYXcgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgbGluZXMgc28gd2UgY2FuIHNlZSB0aGUgcGl4ZWwgb3V0bGluZXNcclxuICAgIGcuc3Ryb2tlU3R5bGUgPSAnI0RERERERCc7XHJcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhczIud2lkdGg7IHggKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGcubW92ZVRvKE1hdGguZmxvb3IoeCksIDApO1xyXG4gICAgICAgIGcubGluZVRvKE1hdGguZmxvb3IoeCksIGNhbnZhczIuaGVpZ2h0KTtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjYW52YXMyLmhlaWdodDsgeSArPSBjYW52YXNTY2FsZSkge1xyXG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZy5tb3ZlVG8oMCwgTWF0aC5mbG9vcih5KSk7XHJcbiAgICAgICAgZy5saW5lVG8oY2FudmFzMi53aWR0aCwgTWF0aC5mbG9vcih5KSk7XHJcbiAgICAgICAgZy5zdHJva2UoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHAxID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKGdldFgoMCksIGdldFkoMCkpO1xyXG4gICAgY29uc3QgcDIgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoZ2V0WCgxKSwgZ2V0WSgxKSk7XHJcbiAgICBjb25zdCBwMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhnZXRYKDIpLCBnZXRZKDIpKTtcclxuICAgIC8vZHJhdyB0aGUgbWFpbiB0cmlhbmdsZVxyXG4gICAgZy5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8ocDFbMF0sIHAxWzFdKTtcclxuICAgIGcubGluZVRvKHAyWzBdLCBwMlsxXSk7XHJcbiAgICBnLmxpbmVUbyhwM1swXSwgcDNbMV0pO1xyXG4gICAgZy5jbG9zZVBhdGgoKTtcclxuICAgIGcuc3Ryb2tlKCk7XHJcbiAgICAvL2NhbGN1bGF0ZSBhbmQgcGxvdCBhIG5ldyBwcm9qZWN0ZWQgY3VydmUgc28gd2UgY2FuIGNvbXBhcmUgd2l0aCB0aGUgd2ViZ2wgcmVuZGVyZWQgcmVzdWx0XHJcbiAgICAvKlxyXG4gICAgY29uc3QgbmV4dFAxID0gY2FsY3VsYXRlT2Zmc2V0UG9zaXRpb24ocDMsIHAxLCBwMiwgcGl4ZWxPZmZzZXQpO1xyXG4gICAgY29uc3QgbmV4dFAyID0gY2FsY3VsYXRlT2Zmc2V0UG9zaXRpb24ocDEsIHAyLCBwMywgcGl4ZWxPZmZzZXQpO1xyXG4gICAgY29uc3QgbmV4dFAzID0gY2FsY3VsYXRlT2Zmc2V0UG9zaXRpb24ocDIsIHAzLCBwMSwgcGl4ZWxPZmZzZXQpO1xyXG4gIFxyXG4gICAgZy5zdHJva2VTdHlsZSA9ICdncmVlbic7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8obmV4dFAxWzBdLCBuZXh0UDFbMV0pO1xyXG4gICAgZy5saW5lVG8obmV4dFAyWzBdLCBuZXh0UDJbMV0pO1xyXG4gICAgZy5saW5lVG8obmV4dFAzWzBdLCBuZXh0UDNbMV0pO1xyXG4gICAgZy5jbG9zZVBhdGgoKTtcclxuICAgIGcuc3Ryb2tlKCk7XHJcbiAgICAqL1xyXG4gICAgLy9kcmF3IGEgZG90IGF0IGVhY2ggaW5mbGF0ZWQgcGl4ZWwgY2VudGVyXHJcbiAgICBnLmZpbGxTdHlsZSA9ICcjQUFBJztcclxuICAgIGZvciAobGV0IHggPSBjYW52YXNTY2FsZSAvIDI7IHggPCBjYW52YXMyLndpZHRoOyB4ICs9IGNhbnZhc1NjYWxlKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeSA9IGNhbnZhc1NjYWxlIC8gMjsgeSA8IGNhbnZhczIuaGVpZ2h0OyB5ICs9IGNhbnZhc1NjYWxlKSB7XHJcbiAgICAgICAgICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGcuYXJjKHgsIHksIDEsIDAsIHBpMik7XHJcbiAgICAgICAgICAgIGcuZmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vZHJhdyB0aGUgaGFuZGxlc1xyXG4gICAgZy5maWxsU3R5bGUgPSAnYmx1ZSc7XHJcbiAgICBjb25zdCByYWRpdXMgPSAxO1xyXG4gICAgY29uc3QgcG9pbnRzID0gW3AxLCBwMiwgcDNdO1xyXG4gICAgZm9yIChjb25zdCBwb2ludCBvZiBwb2ludHMpIHtcclxuICAgICAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGcuYXJjKHBvaW50WzBdLCBwb2ludFsxXSwgcmFkaXVzLCAwLCBwaTIpO1xyXG4gICAgICAgIGcuZmlsbCgpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIHsgYW50aWFsaWFzOiBmYWxzZSB9KTtcclxuaWYgKCFnbCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgaW5pdGlhbGlzZSBXZWJHTCA6KCcpO1xyXG59XHJcbi8vIENyZWF0ZSBhbiBlbXB0eSBidWZmZXIgb2JqZWN0IHRvIHN0b3JlIHZlcnRleCBidWZmZXJcclxuY29uc3QgcG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdmVydGljZXMsIGdsLkRZTkFNSUNfRFJBVyk7XHJcbmNvbnN0IG5leHRQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG5leHRQb3NCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV4dFBvcywgZ2wuRFlOQU1JQ19EUkFXKTtcclxuY29uc3QgcHJldlBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcHJldlBvc0J1ZmZlcik7XHJcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBwcmV2UG9zLCBnbC5EWU5BTUlDX0RSQVcpO1xyXG5jb25zdCB1dkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdXZCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdXYsIGdsLlNUQVRJQ19EUkFXKTtcclxuY29uc3QgaW5kZXhCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XHJcbi8vIENyZWF0ZSBhIHZlcnRleCBzaGFkZXIgb2JqZWN0XHJcbmNvbnN0IHZlcnRTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7XHJcbmdsLnNoYWRlclNvdXJjZSh2ZXJ0U2hhZGVyLCBjb25zZXJ2YXRpdmVfdmVydF8xLmRlZmF1bHQpO1xyXG5nbC5jb21waWxlU2hhZGVyKHZlcnRTaGFkZXIpO1xyXG5pZiAoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2codmVydFNoYWRlcikpLnRyaW0oKSAhPT0gJycpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0U2hhZGVyKSkpO1xyXG59XHJcbi8vIENyZWF0ZSBmcmFnbWVudCBzaGFkZXIgb2JqZWN0XHJcbmNvbnN0IGZyYWdTaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTtcclxuZ2wuc2hhZGVyU291cmNlKGZyYWdTaGFkZXIsIGNvbnNlcnZhdGl2ZV9mcmFnXzEuZGVmYXVsdCk7XHJcbmdsLmNvbXBpbGVTaGFkZXIoZnJhZ1NoYWRlcik7XHJcbmlmIChTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnU2hhZGVyKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdTaGFkZXIpKSk7XHJcbn1cclxuLy8gQ3JlYXRlIGEgc2hhZGVyIHByb2dyYW0gb2JqZWN0IHRvIHN0b3JlXHJcbi8vIHRoZSBjb21iaW5lZCBzaGFkZXIgcHJvZ3JhbVxyXG5jb25zdCBzaGFkZXJQcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG5nbC5hdHRhY2hTaGFkZXIoc2hhZGVyUHJvZ3JhbSwgdmVydFNoYWRlcik7XHJcbmdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCBmcmFnU2hhZGVyKTtcclxuZ2wubGlua1Byb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XHJcbmlmIChTdHJpbmcoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coc2hhZGVyUHJvZ3JhbSkpLnRyaW0oKSAhPT0gJycpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmcoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coc2hhZGVyUHJvZ3JhbSkpKTtcclxufVxyXG4vLyBVc2UgdGhlIGNvbWJpbmVkIHNoYWRlciBwcm9ncmFtIG9iamVjdFxyXG5nbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG5jb25zdCBwb3NBdHRyID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJwb3NcIik7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc0F0dHIsIHZlcnRleFNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc0F0dHIpO1xyXG4vLyBuZWVkIHRvIGR1cGxpY2F0ZSB0aGUgdmVydGV4IGJ1ZmZlcnMganVzdCB0byBhY2Nlc3MgdGhlIG90aGVyIHRyaWFuZ2xlIHBvc2l0aW9ucyA6KFxyXG5jb25zdCBwcmV2UG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sIFwicHJldlBvc1wiKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xyXG5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByZXZQb3NBdHRyLCB2ZXJ0ZXhTaXplLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwcmV2UG9zQXR0cik7XHJcbmNvbnN0IG5leHRQb3NBdHRyID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJuZXh0UG9zXCIpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbmV4dFBvc0J1ZmZlcik7XHJcbmdsLnZlcnRleEF0dHJpYlBvaW50ZXIobmV4dFBvc0F0dHIsIHZlcnRleFNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KG5leHRQb3NBdHRyKTtcclxuY29uc3QgdXZBdHRyID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJ1dlwiKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHV2QnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcih1dkF0dHIsIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHV2QXR0cik7XHJcbmNvbnN0IG9mZnNldFVuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ29mZnNldCcpO1xyXG5nbC51bmlmb3JtMWYob2Zmc2V0VW5pZm9ybSwgTWF0aC5zcXJ0KDIpIC8gY2FudmFzLndpZHRoKTtcclxuY29uc3Qgc2NyZWVuU2l6ZVVuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ3NjcmVlblNpemUnKTtcclxuZ2wudW5pZm9ybTJmdihzY3JlZW5TaXplVW5pZm9ybSwgW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0pO1xyXG4vL2luaXRcclxuZ2wuY2xlYXJDb2xvcigxLjAsIDEuMCwgMS4wLCAxLjApO1xyXG5nbC52aWV3cG9ydCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5nbC5lbmFibGUoZ2wuREVQVEhfVEVTVCk7XHJcbi8vIGRyYXdcclxuY29uc3QgZHJhd0dMID0gKCkgPT4ge1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbiAgICAvL3VwbG9hZCBuZXcgcG9zaXRpb24gZGF0YVxyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc0J1ZmZlcik7XHJcbiAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgdmVydGljZXMpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG5leHRQb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIG5leHRQb3MpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHByZXZQb3MpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kZXhCdWZmZXIpO1xyXG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgaW5kaWNlcy5sZW5ndGgsIGdsLlVOU0lHTkVEX1NIT1JULCAwKTtcclxufTtcclxuLy9hbmltYXRlIHRoZSB0b3AgdmVydGV4IGJldHdlZW4gLTEgYW5kIDEgYW5kIHRyaWdnZXIgdG8gcmVkcmF3XHJcbmNvbnN0IHNldFZlcnRleFBvc2l0aW9uID0gKGluZGV4LCBwb3MpID0+IHtcclxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBpbmRleCAqIHZlcnRleFNpemU7XHJcbiAgICB2ZXJ0aWNlc1tzdGFydEluZGV4XSA9IHBvc1swXTtcclxuICAgIHZlcnRpY2VzW3N0YXJ0SW5kZXggKyAxXSA9IHBvc1sxXTtcclxuICAgIGNvbnN0IHByZXZQb3NTdGFydEluZGV4ID0gKHN0YXJ0SW5kZXggKyB2ZXJ0ZXhTaXplKSAlIHByZXZQb3MubGVuZ3RoO1xyXG4gICAgcHJldlBvc1twcmV2UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XHJcbiAgICBwcmV2UG9zW3ByZXZQb3NTdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XHJcbiAgICBjb25zdCBuZXh0UG9zU3RhcnRJbmRleCA9IChzdGFydEluZGV4IC0gdmVydGV4U2l6ZSArIG5leHRQb3MubGVuZ3RoKSAlIG5leHRQb3MubGVuZ3RoO1xyXG4gICAgbmV4dFBvc1tuZXh0UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XHJcbiAgICBuZXh0UG9zW25leHRQb3NTdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XHJcbn07XHJcbmNvbnN0IHAxRGlyID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKDEsIDEpO1xyXG5jb25zdCBwMkRpciA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygtMSwgLTEpO1xyXG5jb25zdCBwM0RpciA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygtMSwgLTEpO1xyXG5jb25zdCBuZXdQMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1swXSwgdmVydGljZXNbMV0pO1xyXG5jb25zdCBuZXdQMiA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1syXSwgdmVydGljZXNbM10pO1xyXG5jb25zdCBuZXdQMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1s0XSwgdmVydGljZXNbNV0pO1xyXG5jb25zdCBzdGVwID0gMC4wMDE7XHJcbmNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICBuZXdQMVswXSArPSBzdGVwICogcDFEaXJbMF07XHJcbiAgICBuZXdQMVsxXSArPSBzdGVwICogcDFEaXJbMV07XHJcbiAgICBpZiAoTWF0aC5hYnMobmV3UDFbMF0pID4gMSlcclxuICAgICAgICBwMURpclswXSAqPSAtMTtcclxuICAgIGlmIChNYXRoLmFicyhuZXdQMVsxXSkgPiAxKVxyXG4gICAgICAgIHAxRGlyWzFdICo9IC0xO1xyXG4gICAgc2V0VmVydGV4UG9zaXRpb24oMCwgbmV3UDEpO1xyXG4gICAgbmV3UDJbMF0gKz0gc3RlcCAqIHAyRGlyWzBdO1xyXG4gICAgbmV3UDJbMV0gKz0gc3RlcCAqIHAyRGlyWzFdO1xyXG4gICAgaWYgKE1hdGguYWJzKG5ld1AyWzBdKSA+IDEpXHJcbiAgICAgICAgcDJEaXJbMF0gKj0gLTE7XHJcbiAgICBpZiAoTWF0aC5hYnMobmV3UDJbMV0pID4gMSlcclxuICAgICAgICBwMkRpclsxXSAqPSAtMTtcclxuICAgIHNldFZlcnRleFBvc2l0aW9uKDEsIG5ld1AyKTtcclxuICAgIG5ld1AzWzBdICs9IHN0ZXAgKiBwM0RpclswXTtcclxuICAgIG5ld1AzWzFdICs9IHN0ZXAgKiBwM0RpclsxXTtcclxuICAgIGlmIChNYXRoLmFicyhuZXdQM1swXSkgPiAxKVxyXG4gICAgICAgIHAzRGlyWzBdICo9IC0xO1xyXG4gICAgaWYgKE1hdGguYWJzKG5ld1AzWzFdKSA+IDEpXHJcbiAgICAgICAgcDNEaXJbMV0gKj0gLTE7XHJcbiAgICBzZXRWZXJ0ZXhQb3NpdGlvbigyLCBuZXdQMyk7XHJcbiAgICBkcmF3MkQoKTtcclxuICAgIGRyYXdHTCgpO1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG59O1xyXG5hbmltYXRlKCk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuaW5SYW5nZSA9IGV4cG9ydHMuYXZnID0gZXhwb3J0cy5tYXgyID0gZXhwb3J0cy5taW4yID0gZXhwb3J0cy50b1ByZWNpc2lvbjIgPSBleHBvcnRzLmxlcnAyID0gZXhwb3J0cy5ub3JtYWxpemUgPSBleHBvcnRzLmxlbmd0aCA9IGV4cG9ydHMuZG90ID0gZXhwb3J0cy5zaWduID0gZXhwb3J0cy5hYnMgPSBleHBvcnRzLmNlaWwgPSBleHBvcnRzLmZsb29yID0gZXhwb3J0cy5zdWIgPSBleHBvcnRzLmFkZHMgPSBleHBvcnRzLmFkZCA9IGV4cG9ydHMuZGl2aWRlID0gZXhwb3J0cy5tdWx0aXBseSA9IGV4cG9ydHMuc2NhbGUgPSBleHBvcnRzLmVxdWFscyA9IGV4cG9ydHMuZGV0ZXJtaW5hbnQyID0gZXhwb3J0cy5jbGFtcDIgPSB2b2lkIDA7XHJcbmNvbnN0IGdsX21hdHJpeF8xID0gcmVxdWlyZShcImdsLW1hdHJpeFwiKTtcclxuY29uc3QgY2xhbXAyID0gKGEsIG1pbiwgbWF4KSA9PiB7XHJcbiAgICBjb25zdCBvdXQgPSBnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGEpO1xyXG4gICAgZ2xfbWF0cml4XzEudmVjMi5taW4ob3V0LCBvdXQsIG1heCk7XHJcbiAgICBnbF9tYXRyaXhfMS52ZWMyLm1heChvdXQsIG91dCwgbWluKTtcclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbmV4cG9ydHMuY2xhbXAyID0gY2xhbXAyO1xyXG5jb25zdCBkZXRlcm1pbmFudDIgPSAocDEsIHAyKSA9PiAocDFbMF0gKiBwMlsxXSkgLSAocDFbMV0gKiBwMlswXSk7XHJcbmV4cG9ydHMuZGV0ZXJtaW5hbnQyID0gZGV0ZXJtaW5hbnQyO1xyXG5leHBvcnRzLmVxdWFscyA9IGdsX21hdHJpeF8xLnZlYzIuZXF1YWxzO1xyXG5jb25zdCBzY2FsZSA9IChwMSwgYSkgPT4gZ2xfbWF0cml4XzEudmVjMi5zY2FsZShnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgYSk7XHJcbmV4cG9ydHMuc2NhbGUgPSBzY2FsZTtcclxuY29uc3QgbXVsdGlwbHkgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLm11bHRpcGx5KGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBwMik7XHJcbmV4cG9ydHMubXVsdGlwbHkgPSBtdWx0aXBseTtcclxuY29uc3QgZGl2aWRlID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5kaXZpZGUoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEsIHAyKTtcclxuZXhwb3J0cy5kaXZpZGUgPSBkaXZpZGU7XHJcbmNvbnN0IGFkZCA9IChwMSwgcDIpID0+IGdsX21hdHJpeF8xLnZlYzIuYWRkKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBwMik7XHJcbmV4cG9ydHMuYWRkID0gYWRkO1xyXG5jb25zdCBhZGRzID0gKHAxLCBhKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMocDFbMF0gKyBhLCBwMVsxXSArIGEpO1xyXG5leHBvcnRzLmFkZHMgPSBhZGRzO1xyXG5jb25zdCBzdWIgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLnN1YihnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgcDIpO1xyXG5leHBvcnRzLnN1YiA9IHN1YjtcclxuY29uc3QgZmxvb3IgPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuZmxvb3IoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEpO1xyXG5leHBvcnRzLmZsb29yID0gZmxvb3I7XHJcbmNvbnN0IGNlaWwgPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuY2VpbChnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSk7XHJcbmV4cG9ydHMuY2VpbCA9IGNlaWw7XHJcbmNvbnN0IGFicyA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKE1hdGguYWJzKHAxWzBdKSwgTWF0aC5hYnMocDFbMV0pKTtcclxuZXhwb3J0cy5hYnMgPSBhYnM7XHJcbmNvbnN0IHNpZ24gPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhNYXRoLnNpZ24ocDFbMF0pLCBNYXRoLnNpZ24ocDFbMV0pKTtcclxuZXhwb3J0cy5zaWduID0gc2lnbjtcclxuY29uc3QgZG90ID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5kb3QocDEsIHAyKTtcclxuZXhwb3J0cy5kb3QgPSBkb3Q7XHJcbmNvbnN0IGxlbmd0aCA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5sZW5ndGgocDEpO1xyXG5leHBvcnRzLmxlbmd0aCA9IGxlbmd0aDtcclxuY29uc3Qgbm9ybWFsaXplID0gKHAxKSA9PiBleHBvcnRzLnNjYWxlKHAxLCAxIC8gZXhwb3J0cy5sZW5ndGgocDEpKTtcclxuZXhwb3J0cy5ub3JtYWxpemUgPSBub3JtYWxpemU7XHJcbmNvbnN0IGxlcnAyID0gKGEsIGIsIHQpID0+IGdsX21hdHJpeF8xLnZlYzIubGVycChnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBhLCBiLCB0KTtcclxuZXhwb3J0cy5sZXJwMiA9IGxlcnAyO1xyXG4vL3dhcm5pbmc6IG11dGF0ZXMgYVxyXG5jb25zdCB0b1ByZWNpc2lvbjIgPSAoYSwgYW1vdW50KSA9PiB7XHJcbiAgICBhWzBdID0gcGFyc2VGbG9hdChhWzBdLnRvUHJlY2lzaW9uKGFtb3VudCkpO1xyXG4gICAgYVsxXSA9IHBhcnNlRmxvYXQoYVsxXS50b1ByZWNpc2lvbihhbW91bnQpKTtcclxuICAgIHJldHVybiBhO1xyXG59O1xyXG5leHBvcnRzLnRvUHJlY2lzaW9uMiA9IHRvUHJlY2lzaW9uMjtcclxuY29uc3QgbWluMiA9ICguLi5vYmpzKSA9PiB7XHJcbiAgICBjb25zdCBbZmlyc3QsIC4uLnJlc3RdID0gb2JqcztcclxuICAgIGNvbnN0IHJlc3VsdCA9IGdsX21hdHJpeF8xLnZlYzIuY2xvbmUoZmlyc3QpO1xyXG4gICAgcmVzdC5mb3JFYWNoKChvYmopID0+IHtcclxuICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLm1pbihyZXN1bHQsIHJlc3VsdCwgb2JqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuZXhwb3J0cy5taW4yID0gbWluMjtcclxuY29uc3QgbWF4MiA9ICguLi5vYmpzKSA9PiB7XHJcbiAgICBjb25zdCBbZmlyc3QsIC4uLnJlc3RdID0gb2JqcztcclxuICAgIGNvbnN0IHJlc3VsdCA9IGdsX21hdHJpeF8xLnZlYzIuY2xvbmUoZmlyc3QpO1xyXG4gICAgcmVzdC5mb3JFYWNoKChvYmopID0+IHtcclxuICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLm1heChyZXN1bHQsIHJlc3VsdCwgb2JqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuZXhwb3J0cy5tYXgyID0gbWF4MjtcclxuY29uc3QgYXZnID0gKC4uLm9ianMpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCk7XHJcbiAgICBpZiAob2Jqcy5sZW5ndGgpIHtcclxuICAgICAgICBvYmpzLmZvckVhY2goKG9iaikgPT4ge1xyXG4gICAgICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLmFkZChyZXN1bHQsIHJlc3VsdCwgb2JqKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLnNjYWxlKHJlc3VsdCwgcmVzdWx0LCAxIC8gb2Jqcy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuZXhwb3J0cy5hdmcgPSBhdmc7XHJcbmNvbnN0IGluUmFuZ2UgPSAocDEsIG1pbiwgbWF4KSA9PiB7XHJcbiAgICByZXR1cm4gIShwMVswXSA+IG1heFswXSB8fCBwMVswXSA8IG1pblswXSB8fCBwMVsxXSA+IG1heFsxXSB8fCBwMVsxXSA8IG1pblsxXSk7XHJcbn07XHJcbmV4cG9ydHMuaW5SYW5nZSA9IGluUmFuZ2U7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=