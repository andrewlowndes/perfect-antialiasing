"use strict";(self.webpackChunksubpixel_rendering=self.webpackChunksubpixel_rendering||[]).push([[327],{876:function(e,r,n){var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const o=n(887),i=t(n(5)),a=t(n(938)),s=new Float32Array([-.75,-.75,0,.75,.75,-.75]),c=Float32Array.of(...s.slice(2),...s.slice(0,2)),l=Float32Array.of(...s.slice(s.length-2),...s.slice(0,s.length-2)),f=new Float32Array([1,0,0,0,1,0,0,0,1]),h=new Uint16Array([0,1,2]),u=document.getElementById("canvas1"),A=document.getElementById("canvas2"),v=A.getContext("2d");if(!v)throw new Error("Could not initialise graphics :(");const g=2*Math.PI,b=A.width/u.width,d=e=>Math.floor((s[2*h[e]]/2+.5)*A.width),R=e=>Math.floor(A.height-(s[2*h[e]+1]/2+.5)*A.height),F=u.getContext("webgl2",{antialias:!1});if(!F)throw new Error("Could not initialise WebGL :(");const P=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,P),F.bufferData(F.ARRAY_BUFFER,s,F.DYNAMIC_DRAW);const S=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,S),F.bufferData(F.ARRAY_BUFFER,c,F.DYNAMIC_DRAW);const p=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,p),F.bufferData(F.ARRAY_BUFFER,l,F.DYNAMIC_DRAW);const m=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,m),F.bufferData(F.ARRAY_BUFFER,f,F.STATIC_DRAW);const _=F.createShader(F.VERTEX_SHADER);if(F.shaderSource(_,i.default),F.compileShader(_),""!==String(F.getShaderInfoLog(_)).trim())throw new Error(String(F.getShaderInfoLog(_)));const B=F.createShader(F.FRAGMENT_SHADER);if(F.shaderSource(B,a.default),F.compileShader(B),""!==String(F.getShaderInfoLog(B)).trim())throw new Error(String(F.getShaderInfoLog(B)));const E=F.createProgram();if(F.attachShader(E,_),F.attachShader(E,B),F.linkProgram(E),""!==String(F.getProgramInfoLog(E)).trim())throw new Error(String(F.getProgramInfoLog(E)));F.useProgram(E);const w=F.getAttribLocation(E,"pos");F.bindBuffer(F.ARRAY_BUFFER,P),F.vertexAttribPointer(w,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(w);const x=F.getAttribLocation(E,"prevPos");F.bindBuffer(F.ARRAY_BUFFER,p),F.vertexAttribPointer(x,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(x);const T=F.getAttribLocation(E,"nextPos");F.bindBuffer(F.ARRAY_BUFFER,S),F.vertexAttribPointer(T,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(T);const D=F.getAttribLocation(E,"uv");F.bindBuffer(F.ARRAY_BUFFER,m),F.vertexAttribPointer(D,3,F.FLOAT,!1,0,0),F.enableVertexAttribArray(D);const U=F.getUniformLocation(E,"screenSize");F.uniform2fv(U,[u.width,u.height]),F.clearColor(1,1,1,1),F.viewport(0,0,u.width,u.height),F.enable(F.DEPTH_TEST);const y=(e,r)=>{const n=2*e;s[n]=r[0],s[n+1]=r[1];const t=(n+2)%l.length;l[t]=r[0],l[t+1]=r[1];const o=(n-2+c.length)%c.length;c[o]=r[0],c[o+1]=r[1]},Y=o.vec2.fromValues(1,1),C=o.vec2.fromValues(-1,-1),L=o.vec2.fromValues(-1,-1),M=o.vec2.fromValues(s[0],s[1]),I=o.vec2.fromValues(s[2],s[3]),V=o.vec2.fromValues(s[4],s[5]),O=.001,N=()=>{M[0]+=O*Y[0],M[1]+=O*Y[1],Math.abs(M[0])>1&&(Y[0]*=-1),Math.abs(M[1])>1&&(Y[1]*=-1),y(0,M),I[0]+=O*C[0],I[1]+=O*C[1],Math.abs(I[0])>1&&(C[0]*=-1),Math.abs(I[1])>1&&(C[1]*=-1),y(1,I),V[0]+=O*L[0],V[1]+=O*L[1],Math.abs(V[0])>1&&(L[0]*=-1),Math.abs(V[1])>1&&(L[1]*=-1),y(2,V),(()=>{v.clearRect(0,0,A.width,A.height),v.strokeStyle="#DDDDDD";for(let e=0;e<A.width;e+=b)v.beginPath(),v.moveTo(Math.floor(e),0),v.lineTo(Math.floor(e),A.height),v.stroke();for(let e=0;e<A.height;e+=b)v.beginPath(),v.moveTo(0,Math.floor(e)),v.lineTo(A.width,Math.floor(e)),v.stroke();const e=o.vec2.fromValues(d(0),R(0)),r=o.vec2.fromValues(d(1),R(1)),n=o.vec2.fromValues(d(2),R(2));v.strokeStyle="white",v.beginPath(),v.moveTo(e[0],e[1]),v.lineTo(r[0],r[1]),v.lineTo(n[0],n[1]),v.closePath(),v.stroke(),v.fillStyle="#AAA";for(let e=b/2;e<A.width;e+=b)for(let r=b/2;r<A.height;r+=b)v.beginPath(),v.arc(e,r,1,0,g),v.fill();v.fillStyle="blue";const t=[e,r,n];for(const e of t)v.beginPath(),v.arc(e[0],e[1],1,0,g),v.fill()})(),F.clear(F.COLOR_BUFFER_BIT),F.bindBuffer(F.ARRAY_BUFFER,P),F.bufferSubData(F.ARRAY_BUFFER,0,s),F.bindBuffer(F.ARRAY_BUFFER,S),F.bufferSubData(F.ARRAY_BUFFER,0,c),F.bindBuffer(F.ARRAY_BUFFER,p),F.bufferSubData(F.ARRAY_BUFFER,0,l),F.drawArrays(F.TRIANGLES,0,3),requestAnimationFrame(N)};N()},938:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nin vec3 vUv;\r\nflat in vec4 bounds;\r\n\r\nout vec4 outColour;\r\n\r\nvoid main(void) {\r\n  if (gl_FragCoord.x < bounds.x || gl_FragCoord.y < bounds.y || gl_FragCoord.x > bounds.z || gl_FragCoord.y > bounds.w) {\r\n    discard;\r\n  }\r\n\r\n  outColour = vec4(vUv, 1.0);\r\n}\r\n"},5:e=>{e.exports="#version 300 es\r\n\r\nuniform vec2 screenSize;\r\n\r\nin vec3 uv;\r\nin vec2 pos;\r\nin vec2 prevPos;\r\nin vec2 nextPos;\r\n\r\nout vec3 vUv;\r\nflat out vec4 bounds;\r\n\r\nconst float EPSILON = 0.0000001;\r\n\r\nvec2 clipToScreenSpace(vec2 pos) {\r\n    return screenSize.xy * (pos / 2.0 + 0.5);\r\n}\r\n\r\nvec2 screenSpaceToClipSpace(vec2 pos) {\r\n    return ((pos / screenSize.xy) - 0.5) * 2.0;\r\n}\r\n\r\nconst float diagonalOffset = sqrt(2.0) / 2.0;\r\n\r\nvoid main(void) {\r\n    vec2 screenPos = clipToScreenSpace(pos);\r\n    vec2 screenNextPos = clipToScreenSpace(nextPos);\r\n    vec2 screenPrevPos = clipToScreenSpace(prevPos);\r\n    \r\n    // determine a new vertex position such that it covers the neighbour pixel centers\r\n    vec2 a = normalize(screenPrevPos - screenPos);\r\n    vec2 b = normalize(screenNextPos - screenPos);\r\n    float angle = sqrt((1.0 - dot(a, b)) / 2.0);\r\n    \r\n    vec2 vecPos;\r\n    if (abs(angle) > EPSILON) {\r\n        vecPos = screenSpaceToClipSpace(screenPos - normalize(a + b) * diagonalOffset / angle);\r\n    } else {\r\n        vecPos = pos;\r\n    }\r\n\r\n    bounds = vec4(\r\n        min(min(screenPos, screenNextPos), screenPrevPos) - 0.5,\r\n        max(max(screenPos, screenNextPos), screenPrevPos) + 0.5\r\n    );\r\n\r\n    // TODO: offset the uv so it is still inline with the original triangle position?\r\n    vUv = uv;\r\n\r\n    gl_Position = vec4(vecPos, 0.0, 1.0);\r\n}\r\n"}},e=>{e(e.s=876)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cnZhdGl2ZVJhc3RlcmlzYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjb25zZXJ2YXRpdmVfdmVydF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9zaGFkZXJzL2NvbnNlcnZhdGl2ZS52ZXJ0XCIpKTtcclxuY29uc3QgY29uc2VydmF0aXZlX2ZyYWdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vc2hhZGVycy9jb25zZXJ2YXRpdmUuZnJhZ1wiKSk7XHJcbmNvbnN0IHZlcnRleFNpemUgPSAyO1xyXG5jb25zdCB2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgLTAuNzUsIC0wLjc1LCAwLjAsIDAuNzUsXHJcbiAgICAvLy0wLjUsIC0wLjIsXHJcbiAgICAwLjc1LCAtMC43NVxyXG5dKTtcclxuY29uc3QgbmV4dFBvcyA9IEZsb2F0MzJBcnJheS5vZiguLi52ZXJ0aWNlcy5zbGljZSh2ZXJ0ZXhTaXplKSwgLi4udmVydGljZXMuc2xpY2UoMCwgdmVydGV4U2l6ZSkpO1xyXG5jb25zdCBwcmV2UG9zID0gRmxvYXQzMkFycmF5Lm9mKC4uLnZlcnRpY2VzLnNsaWNlKHZlcnRpY2VzLmxlbmd0aCAtIHZlcnRleFNpemUpLCAuLi52ZXJ0aWNlcy5zbGljZSgwLCB2ZXJ0aWNlcy5sZW5ndGggLSB2ZXJ0ZXhTaXplKSk7XHJcbmNvbnN0IHV2ID0gbmV3IEZsb2F0MzJBcnJheShbMS4wLCAwLjAsIDAuMCwgMC4wLCAxLjAsIDAuMCwgMC4wLCAwLjAsIDEuMF0pO1xyXG5jb25zdCBpbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyXSk7XHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMxJyk7XHJcbmNvbnN0IGNhbnZhczIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzMicpO1xyXG5jb25zdCBnID0gY2FudmFzMi5nZXRDb250ZXh0KCcyZCcpO1xyXG5pZiAoIWcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGluaXRpYWxpc2UgZ3JhcGhpY3MgOignKTtcclxufVxyXG5jb25zdCBwaTIgPSBNYXRoLlBJICogMjtcclxuY29uc3QgY2FudmFzU2NhbGUgPSBjYW52YXMyLndpZHRoIC8gY2FudmFzLndpZHRoO1xyXG5jb25zdCBnZXRYID0gKGluZGV4KSA9PiBNYXRoLmZsb29yKCh2ZXJ0aWNlc1tpbmRpY2VzW2luZGV4XSAqIHZlcnRleFNpemVdIC8gMiArIDAuNSkgKiBjYW52YXMyLndpZHRoKTtcclxuY29uc3QgZ2V0WSA9IChpbmRleCkgPT4gTWF0aC5mbG9vcihjYW52YXMyLmhlaWdodCAtICh2ZXJ0aWNlc1tpbmRpY2VzW2luZGV4XSAqIHZlcnRleFNpemUgKyAxXSAvIDIgKyAwLjUpICogY2FudmFzMi5oZWlnaHQpO1xyXG5jb25zdCBkcmF3MkQgPSAoKSA9PiB7XHJcbiAgICBnLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMyLndpZHRoLCBjYW52YXMyLmhlaWdodCk7XHJcbiAgICAvL2RyYXcgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgbGluZXMgc28gd2UgY2FuIHNlZSB0aGUgcGl4ZWwgb3V0bGluZXNcclxuICAgIGcuc3Ryb2tlU3R5bGUgPSAnI0RERERERCc7XHJcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhczIud2lkdGg7IHggKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGcubW92ZVRvKE1hdGguZmxvb3IoeCksIDApO1xyXG4gICAgICAgIGcubGluZVRvKE1hdGguZmxvb3IoeCksIGNhbnZhczIuaGVpZ2h0KTtcclxuICAgICAgICBnLnN0cm9rZSgpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjYW52YXMyLmhlaWdodDsgeSArPSBjYW52YXNTY2FsZSkge1xyXG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZy5tb3ZlVG8oMCwgTWF0aC5mbG9vcih5KSk7XHJcbiAgICAgICAgZy5saW5lVG8oY2FudmFzMi53aWR0aCwgTWF0aC5mbG9vcih5KSk7XHJcbiAgICAgICAgZy5zdHJva2UoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHAxID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKGdldFgoMCksIGdldFkoMCkpO1xyXG4gICAgY29uc3QgcDIgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoZ2V0WCgxKSwgZ2V0WSgxKSk7XHJcbiAgICBjb25zdCBwMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhnZXRYKDIpLCBnZXRZKDIpKTtcclxuICAgIC8vZHJhdyB0aGUgbWFpbiB0cmlhbmdsZVxyXG4gICAgZy5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8ocDFbMF0sIHAxWzFdKTtcclxuICAgIGcubGluZVRvKHAyWzBdLCBwMlsxXSk7XHJcbiAgICBnLmxpbmVUbyhwM1swXSwgcDNbMV0pO1xyXG4gICAgZy5jbG9zZVBhdGgoKTtcclxuICAgIGcuc3Ryb2tlKCk7XHJcbiAgICAvL2RyYXcgYSBkb3QgYXQgZWFjaCBpbmZsYXRlZCBwaXhlbCBjZW50ZXJcclxuICAgIGcuZmlsbFN0eWxlID0gJyNBQUEnO1xyXG4gICAgZm9yIChsZXQgeCA9IGNhbnZhc1NjYWxlIC8gMjsgeCA8IGNhbnZhczIud2lkdGg7IHggKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICBmb3IgKGxldCB5ID0gY2FudmFzU2NhbGUgLyAyOyB5IDwgY2FudmFzMi5oZWlnaHQ7IHkgKz0gY2FudmFzU2NhbGUpIHtcclxuICAgICAgICAgICAgZy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgZy5hcmMoeCwgeSwgMSwgMCwgcGkyKTtcclxuICAgICAgICAgICAgZy5maWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9kcmF3IHRoZSBoYW5kbGVzXHJcbiAgICBnLmZpbGxTdHlsZSA9ICdibHVlJztcclxuICAgIGNvbnN0IHJhZGl1cyA9IDE7XHJcbiAgICBjb25zdCBwb2ludHMgPSBbcDEsIHAyLCBwM107XHJcbiAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHBvaW50cykge1xyXG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgZy5hcmMocG9pbnRbMF0sIHBvaW50WzFdLCByYWRpdXMsIDAsIHBpMik7XHJcbiAgICAgICAgZy5maWxsKCk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsMicsIHsgYW50aWFsaWFzOiBmYWxzZSB9KTtcclxuaWYgKCFnbCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgaW5pdGlhbGlzZSBXZWJHTCA6KCcpO1xyXG59XHJcbi8vIENyZWF0ZSBhbiBlbXB0eSBidWZmZXIgb2JqZWN0IHRvIHN0b3JlIHZlcnRleCBidWZmZXJcclxuY29uc3QgcG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdmVydGljZXMsIGdsLkRZTkFNSUNfRFJBVyk7XHJcbmNvbnN0IG5leHRQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG5leHRQb3NCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV4dFBvcywgZ2wuRFlOQU1JQ19EUkFXKTtcclxuY29uc3QgcHJldlBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcHJldlBvc0J1ZmZlcik7XHJcbmdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBwcmV2UG9zLCBnbC5EWU5BTUlDX0RSQVcpO1xyXG5jb25zdCB1dkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdXZCdWZmZXIpO1xyXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdXYsIGdsLlNUQVRJQ19EUkFXKTtcclxuLy8gQ3JlYXRlIGEgdmVydGV4IHNoYWRlciBvYmplY3RcclxuY29uc3QgdmVydFNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTtcclxuZ2wuc2hhZGVyU291cmNlKHZlcnRTaGFkZXIsIGNvbnNlcnZhdGl2ZV92ZXJ0XzEuZGVmYXVsdCk7XHJcbmdsLmNvbXBpbGVTaGFkZXIodmVydFNoYWRlcik7XHJcbmlmIChTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0U2hhZGVyKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHZlcnRTaGFkZXIpKSk7XHJcbn1cclxuLy8gQ3JlYXRlIGZyYWdtZW50IHNoYWRlciBvYmplY3RcclxuY29uc3QgZnJhZ1NoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xyXG5nbC5zaGFkZXJTb3VyY2UoZnJhZ1NoYWRlciwgY29uc2VydmF0aXZlX2ZyYWdfMS5kZWZhdWx0KTtcclxuZ2wuY29tcGlsZVNoYWRlcihmcmFnU2hhZGVyKTtcclxuaWYgKFN0cmluZyhnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdTaGFkZXIpKS50cmltKCkgIT09ICcnKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGdsLmdldFNoYWRlckluZm9Mb2coZnJhZ1NoYWRlcikpKTtcclxufVxyXG4vLyBDcmVhdGUgYSBzaGFkZXIgcHJvZ3JhbSBvYmplY3QgdG8gc3RvcmVcclxuLy8gdGhlIGNvbWJpbmVkIHNoYWRlciBwcm9ncmFtXHJcbmNvbnN0IHNoYWRlclByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbmdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCB2ZXJ0U2hhZGVyKTtcclxuZ2wuYXR0YWNoU2hhZGVyKHNoYWRlclByb2dyYW0sIGZyYWdTaGFkZXIpO1xyXG5nbC5saW5rUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTtcclxuaWYgKFN0cmluZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKSkpO1xyXG59XHJcbi8vIFVzZSB0aGUgY29tYmluZWQgc2hhZGVyIHByb2dyYW0gb2JqZWN0XHJcbmdsLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XHJcbmNvbnN0IHBvc0F0dHIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAncG9zJyk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc0F0dHIsIHZlcnRleFNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHBvc0F0dHIpO1xyXG4vLyBuZWVkIHRvIGR1cGxpY2F0ZSB0aGUgdmVydGV4IGJ1ZmZlcnMganVzdCB0byBhY2Nlc3MgdGhlIG90aGVyIHRyaWFuZ2xlIHBvc2l0aW9ucyA6KFxyXG5jb25zdCBwcmV2UG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICdwcmV2UG9zJyk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwcmV2UG9zQnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcihwcmV2UG9zQXR0ciwgdmVydGV4U2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocHJldlBvc0F0dHIpO1xyXG5jb25zdCBuZXh0UG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICduZXh0UG9zJyk7XHJcbmdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zQnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcihuZXh0UG9zQXR0ciwgdmVydGV4U2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobmV4dFBvc0F0dHIpO1xyXG5jb25zdCB1dkF0dHIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAndXYnKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHV2QnVmZmVyKTtcclxuZ2wudmVydGV4QXR0cmliUG9pbnRlcih1dkF0dHIsIDMsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHV2QXR0cik7XHJcbmNvbnN0IHNjcmVlblNpemVVbmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHNoYWRlclByb2dyYW0sICdzY3JlZW5TaXplJyk7XHJcbmdsLnVuaWZvcm0yZnYoc2NyZWVuU2l6ZVVuaWZvcm0sIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdKTtcclxuLy9pbml0XHJcbmdsLmNsZWFyQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKTtcclxuZ2wudmlld3BvcnQoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xyXG4vLyBkcmF3XHJcbmNvbnN0IGRyYXdHTCA9ICgpID0+IHtcclxuICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG4gICAgLy91cGxvYWQgbmV3IHBvc2l0aW9uIGRhdGFcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIHZlcnRpY2VzKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zQnVmZmVyKTtcclxuICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBuZXh0UG9zKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwcmV2UG9zQnVmZmVyKTtcclxuICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBwcmV2UG9zKTtcclxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCAzKTtcclxufTtcclxuLy9hbmltYXRlIHRoZSB0b3AgdmVydGV4IGJldHdlZW4gLTEgYW5kIDEgYW5kIHRyaWdnZXIgdG8gcmVkcmF3XHJcbmNvbnN0IHNldFZlcnRleFBvc2l0aW9uID0gKGluZGV4LCBwb3MpID0+IHtcclxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBpbmRleCAqIHZlcnRleFNpemU7XHJcbiAgICB2ZXJ0aWNlc1tzdGFydEluZGV4XSA9IHBvc1swXTtcclxuICAgIHZlcnRpY2VzW3N0YXJ0SW5kZXggKyAxXSA9IHBvc1sxXTtcclxuICAgIGNvbnN0IHByZXZQb3NTdGFydEluZGV4ID0gKHN0YXJ0SW5kZXggKyB2ZXJ0ZXhTaXplKSAlIHByZXZQb3MubGVuZ3RoO1xyXG4gICAgcHJldlBvc1twcmV2UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XHJcbiAgICBwcmV2UG9zW3ByZXZQb3NTdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XHJcbiAgICBjb25zdCBuZXh0UG9zU3RhcnRJbmRleCA9IChzdGFydEluZGV4IC0gdmVydGV4U2l6ZSArIG5leHRQb3MubGVuZ3RoKSAlIG5leHRQb3MubGVuZ3RoO1xyXG4gICAgbmV4dFBvc1tuZXh0UG9zU3RhcnRJbmRleF0gPSBwb3NbMF07XHJcbiAgICBuZXh0UG9zW25leHRQb3NTdGFydEluZGV4ICsgMV0gPSBwb3NbMV07XHJcbn07XHJcbmNvbnN0IHAxRGlyID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKDEsIDEpO1xyXG5jb25zdCBwMkRpciA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygtMSwgLTEpO1xyXG5jb25zdCBwM0RpciA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygtMSwgLTEpO1xyXG5jb25zdCBuZXdQMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1swXSwgdmVydGljZXNbMV0pO1xyXG5jb25zdCBuZXdQMiA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1syXSwgdmVydGljZXNbM10pO1xyXG5jb25zdCBuZXdQMyA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyh2ZXJ0aWNlc1s0XSwgdmVydGljZXNbNV0pO1xyXG5jb25zdCBzdGVwID0gMC4wMDE7XHJcbmNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgICBuZXdQMVswXSArPSBzdGVwICogcDFEaXJbMF07XHJcbiAgICBuZXdQMVsxXSArPSBzdGVwICogcDFEaXJbMV07XHJcbiAgICBpZiAoTWF0aC5hYnMobmV3UDFbMF0pID4gMSlcclxuICAgICAgICBwMURpclswXSAqPSAtMTtcclxuICAgIGlmIChNYXRoLmFicyhuZXdQMVsxXSkgPiAxKVxyXG4gICAgICAgIHAxRGlyWzFdICo9IC0xO1xyXG4gICAgc2V0VmVydGV4UG9zaXRpb24oMCwgbmV3UDEpO1xyXG4gICAgbmV3UDJbMF0gKz0gc3RlcCAqIHAyRGlyWzBdO1xyXG4gICAgbmV3UDJbMV0gKz0gc3RlcCAqIHAyRGlyWzFdO1xyXG4gICAgaWYgKE1hdGguYWJzKG5ld1AyWzBdKSA+IDEpXHJcbiAgICAgICAgcDJEaXJbMF0gKj0gLTE7XHJcbiAgICBpZiAoTWF0aC5hYnMobmV3UDJbMV0pID4gMSlcclxuICAgICAgICBwMkRpclsxXSAqPSAtMTtcclxuICAgIHNldFZlcnRleFBvc2l0aW9uKDEsIG5ld1AyKTtcclxuICAgIG5ld1AzWzBdICs9IHN0ZXAgKiBwM0RpclswXTtcclxuICAgIG5ld1AzWzFdICs9IHN0ZXAgKiBwM0RpclsxXTtcclxuICAgIGlmIChNYXRoLmFicyhuZXdQM1swXSkgPiAxKVxyXG4gICAgICAgIHAzRGlyWzBdICo9IC0xO1xyXG4gICAgaWYgKE1hdGguYWJzKG5ld1AzWzFdKSA+IDEpXHJcbiAgICAgICAgcDNEaXJbMV0gKj0gLTE7XHJcbiAgICBzZXRWZXJ0ZXhQb3NpdGlvbigyLCBuZXdQMyk7XHJcbiAgICBkcmF3MkQoKTtcclxuICAgIGRyYXdHTCgpO1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG59O1xyXG5hbmltYXRlKCk7XHJcbiJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJ0aGlzIiwibW9kIiwiX19lc01vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2xfbWF0cml4XzEiLCJjb25zZXJ2YXRpdmVfdmVydF8xIiwiY29uc2VydmF0aXZlX2ZyYWdfMSIsInZlcnRpY2VzIiwiRmxvYXQzMkFycmF5IiwibmV4dFBvcyIsIm9mIiwic2xpY2UiLCJwcmV2UG9zIiwibGVuZ3RoIiwidXYiLCJpbmRpY2VzIiwiVWludDE2QXJyYXkiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FudmFzMiIsImciLCJnZXRDb250ZXh0IiwiRXJyb3IiLCJwaTIiLCJNYXRoIiwiUEkiLCJjYW52YXNTY2FsZSIsIndpZHRoIiwiZ2V0WCIsImluZGV4IiwiZmxvb3IiLCJnZXRZIiwiaGVpZ2h0IiwiZ2wiLCJhbnRpYWxpYXMiLCJwb3NCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkRZTkFNSUNfRFJBVyIsIm5leHRQb3NCdWZmZXIiLCJwcmV2UG9zQnVmZmVyIiwidXZCdWZmZXIiLCJTVEFUSUNfRFJBVyIsInZlcnRTaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwic2hhZGVyU291cmNlIiwiZGVmYXVsdCIsImNvbXBpbGVTaGFkZXIiLCJTdHJpbmciLCJnZXRTaGFkZXJJbmZvTG9nIiwidHJpbSIsImZyYWdTaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJzaGFkZXJQcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2VQcm9ncmFtIiwicG9zQXR0ciIsImdldEF0dHJpYkxvY2F0aW9uIiwidmVydGV4QXR0cmliUG9pbnRlciIsIkZMT0FUIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJwcmV2UG9zQXR0ciIsIm5leHRQb3NBdHRyIiwidXZBdHRyIiwic2NyZWVuU2l6ZVVuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJ1bmlmb3JtMmZ2IiwiY2xlYXJDb2xvciIsInZpZXdwb3J0IiwiZW5hYmxlIiwiREVQVEhfVEVTVCIsInNldFZlcnRleFBvc2l0aW9uIiwicG9zIiwic3RhcnRJbmRleCIsInByZXZQb3NTdGFydEluZGV4IiwibmV4dFBvc1N0YXJ0SW5kZXgiLCJwMURpciIsInZlYzIiLCJmcm9tVmFsdWVzIiwicDJEaXIiLCJwM0RpciIsIm5ld1AxIiwibmV3UDIiLCJuZXdQMyIsInN0ZXAiLCJhbmltYXRlIiwiYWJzIiwiY2xlYXJSZWN0Iiwic3Ryb2tlU3R5bGUiLCJ4IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwieSIsInAxIiwicDIiLCJwMyIsImNsb3NlUGF0aCIsImZpbGxTdHlsZSIsImFyYyIsImZpbGwiLCJwb2ludHMiLCJwb2ludCIsImRyYXcyRCIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsImJ1ZmZlclN1YkRhdGEiLCJkcmF3QXJyYXlzIiwiVFJJQU5HTEVTIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==