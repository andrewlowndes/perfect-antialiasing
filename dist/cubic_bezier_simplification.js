(self.webpackChunksubpixel_rendering=self.webpackChunksubpixel_rendering||[]).push([[231],{3:(e,t,c)=>{"use strict";const r=c(887),o=c(856),a=c(717),n=document.getElementById("game"),s=n.getContext("2d");if(!s)throw new Error("Could not get canvas");const l=r.vec2.fromValues(40,40),i=r.vec2.fromValues(100,240),v=r.vec2.fromValues(300,80),p=r.vec2.fromValues(260,380),u={p1:l,p2:i,p3:v,p4:p,points:[l,i,v,p]},d=o.cubicBezierToPoints(u,-.99),m=()=>{s.clearRect(0,0,n.width,n.height),s.strokeStyle="blue",s.beginPath(),a.plotLines(s,u.points),s.stroke(),s.strokeStyle="green",s.beginPath(),a.plotLines(s,d),s.stroke(),requestAnimationFrame(m)};requestAnimationFrame(m)},856:(e,t,c)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cubicBezierToPoints=void 0;const r=c(887),o=c(345),a=c(669);t.cubicBezierToPoints=(e,t)=>{const c=[r.vec2.clone(e.p1),r.vec2.clone(e.p4)],n=(e,r,s,l,i=!1)=>{const v=o.lerp(r,s,.5),p=a.lerp2(e.p2,e.p3,v),u=a.lerp2(a.lerp2(a.lerp2(e.p1,e.p2,v),p,v),a.lerp2(p,a.lerp2(e.p3,e.p4,v),v),v),d=c[l-1],m=c[l];c.splice(l,0,u),(a.dot(a.normalize(a.sub(d,u)),a.normalize(a.sub(m,u)))>t||i)&&(n(e,v,s,l+1),n(e,r,v,l))};return n(e,0,1,1,!0),c}},345:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lerp=t.timeAtPos=t.clamp=t.fract=t.negFract=t.EPSILON=void 0,t.EPSILON=1e-6,t.negFract=e=>1-e+Math.floor(e),t.fract=e=>e-Math.floor(e),t.clamp=(e,t,c)=>Math.max(Math.min(e,c),t),t.timeAtPos=(e,c,r)=>c?t.clamp((r-e)/c,0,1):0,t.lerp=(e,t,c)=>e*(1-c)+t*c},669:(e,t,c)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inRange=t.avg=t.max2=t.min2=t.toPrecision2=t.lerp2=t.normalize=t.length=t.dot=t.sign=t.abs=t.ceil=t.floor=t.sub=t.adds=t.add=t.divide=t.multiply=t.scale=t.equals=t.determinant2=t.clamp2=void 0;const r=c(887);t.clamp2=(e,t,c)=>{const o=r.vec2.clone(e);return r.vec2.min(o,o,c),r.vec2.max(o,o,t),o},t.determinant2=(e,t)=>e[0]*t[1]-e[1]*t[0],t.equals=r.vec2.equals,t.scale=(e,t)=>r.vec2.scale(r.vec2.create(),e,t),t.multiply=(e,t)=>r.vec2.multiply(r.vec2.create(),e,t),t.divide=(e,t)=>r.vec2.divide(r.vec2.create(),e,t),t.add=(e,t)=>r.vec2.add(r.vec2.create(),e,t),t.adds=(e,t)=>r.vec2.fromValues(e[0]+t,e[1]+t),t.sub=(e,t)=>r.vec2.sub(r.vec2.create(),e,t),t.floor=e=>r.vec2.floor(r.vec2.create(),e),t.ceil=e=>r.vec2.ceil(r.vec2.create(),e),t.abs=e=>r.vec2.fromValues(Math.abs(e[0]),Math.abs(e[1])),t.sign=e=>r.vec2.fromValues(Math.sign(e[0]),Math.sign(e[1])),t.dot=(e,t)=>r.vec2.dot(e,t),t.length=e=>r.vec2.length(e),t.normalize=e=>t.scale(e,1/t.length(e)),t.lerp2=(e,t,c)=>r.vec2.lerp(r.vec2.create(),e,t,c),t.toPrecision2=(e,t)=>(e[0]=parseFloat(e[0].toPrecision(t)),e[1]=parseFloat(e[1].toPrecision(t)),e),t.min2=(...e)=>{const[t,...c]=e,o=r.vec2.clone(t);return c.forEach((e=>{r.vec2.min(o,o,e)})),o},t.max2=(...e)=>{const[t,...c]=e,o=r.vec2.clone(t);return c.forEach((e=>{r.vec2.max(o,o,e)})),o},t.avg=(...e)=>{const t=r.vec2.create();return e.length&&(e.forEach((e=>{r.vec2.add(t,t,e)})),r.vec2.scale(t,t,1/e.length)),t},t.inRange=(e,t,c)=>!(e[0]>c[0]||e[0]<t[0]||e[1]>c[1]||e[1]<t[1])},717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.plotLines=void 0,t.plotLines=(e,t)=>{const c=t[0];e.moveTo(c[0],e.canvas.height-c[1]);for(let c=0;c<t.length;c++){const r=t[c];e.lineTo(r[0],e.canvas.height-r[1])}}}},e=>{"use strict";e(e.s=3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvZGVtb3MvY3ViaWNCZXppZXJTaW1wbGlmaWNhdGlvbi50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvZ2VvbWV0cnkvY3ViaWNCZXppZXJUb1BvaW50cy50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvbWF0aHMvY29tbW9uLnRzIiwid2VicGFjazovL3N1YnBpeGVsLXJlbmRlcmluZy8uL3NyYy9tYXRocy9wb2ludC50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvcmVuZGVyL3Bsb3RMaW5lcy50cyJdLCJuYW1lcyI6WyJnbF9tYXRyaXhfMSIsImN1YmljQmV6aWVyVG9Qb2ludHNfMSIsInBsb3RMaW5lc18xIiwiZ2FtZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnIiwiZ2V0Q29udGV4dCIsIkVycm9yIiwicDEiLCJ2ZWMyIiwiZnJvbVZhbHVlcyIsInAyIiwicDMiLCJwNCIsImJlemllciIsInBvaW50cyIsImJlemllckxpbmVzIiwiY3ViaWNCZXppZXJUb1BvaW50cyIsImRyYXciLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsInN0cm9rZVN0eWxlIiwiYmVnaW5QYXRoIiwicGxvdExpbmVzIiwic3Ryb2tlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjb21tb25fMSIsInBvaW50XzEiLCJzcGxpdFRocmVzaG9sZCIsImNsb25lIiwiY3ViaWNCZXppZXJTcGxpdCIsIm1pbiIsIm1heCIsImluc2VydEluZGV4IiwiZmlyc3QiLCJ0aW1lIiwibGVycCIsIm1pZExlcnAiLCJsZXJwMiIsInBvaW50T25DdXJ2ZSIsInByZXZQb2ludCIsIm5leHRQb2ludCIsInNwbGljZSIsImRvdCIsIm5vcm1hbGl6ZSIsInN1YiIsInRpbWVBdFBvcyIsImNsYW1wIiwiZnJhY3QiLCJuZWdGcmFjdCIsIkVQU0lMT04iLCJ4IiwiTWF0aCIsImZsb29yIiwiYSIsInN0YXJ0UG9zIiwiZGlyIiwibmV3UG9zIiwiYiIsInQiLCJpblJhbmdlIiwiYXZnIiwibWF4MiIsIm1pbjIiLCJ0b1ByZWNpc2lvbjIiLCJsZW5ndGgiLCJzaWduIiwiYWJzIiwiY2VpbCIsImFkZHMiLCJhZGQiLCJkaXZpZGUiLCJtdWx0aXBseSIsInNjYWxlIiwiZXF1YWxzIiwiZGV0ZXJtaW5hbnQyIiwiY2xhbXAyIiwib3V0IiwiY3JlYXRlIiwiYW1vdW50IiwicGFyc2VGbG9hdCIsInRvUHJlY2lzaW9uIiwib2JqcyIsInJlc3QiLCJyZXN1bHQiLCJmb3JFYWNoIiwib2JqIiwiZmlyc3RQb2ludCIsIm1vdmVUbyIsImNhbnZhcyIsImkiLCJwb2ludCIsImxpbmVUbyJdLCJtYXBwaW5ncyI6Im9IQUVBLE1BQU1BLEVBQWMsRUFBUSxLQUN0QkMsRUFBd0IsRUFBUSxLQUNoQ0MsRUFBYyxFQUFRLEtBQ3RCQyxFQUFPQyxTQUFTQyxlQUFlLFFBQy9CQyxFQUFJSCxFQUFLSSxXQUFXLE1BQzFCLElBQUtELEVBQ0QsTUFBTSxJQUFJRSxNQUFNLHdCQUVwQixNQUFNQyxFQUFLVCxFQUFZVSxLQUFLQyxXQUFXLEdBQUksSUFDckNDLEVBQUtaLEVBQVlVLEtBQUtDLFdBQVcsSUFBSyxLQUN0Q0UsRUFBS2IsRUFBWVUsS0FBS0MsV0FBVyxJQUFLLElBQ3RDRyxFQUFLZCxFQUFZVSxLQUFLQyxXQUFXLElBQUssS0FDdENJLEVBQVMsQ0FDWE4sS0FDQUcsS0FDQUMsS0FDQUMsS0FDQUUsT0FBUSxDQUFDUCxFQUFJRyxFQUFJQyxFQUFJQyxJQUduQkcsRUFBY2hCLEVBQXNCaUIsb0JBQW9CSCxHQUR0QyxLQUVsQkksRUFBTyxLQUNUYixFQUFFYyxVQUFVLEVBQUcsRUFBR2pCLEVBQUtrQixNQUFPbEIsRUFBS21CLFFBRW5DaEIsRUFBRWlCLFlBQWMsT0FDaEJqQixFQUFFa0IsWUFDRnRCLEVBQVl1QixVQUFVbkIsRUFBR1MsRUFBT0MsUUFDaENWLEVBQUVvQixTQVVGcEIsRUFBRWlCLFlBQWMsUUFDaEJqQixFQUFFa0IsWUFDRnRCLEVBQVl1QixVQUFVbkIsRUFBR1csR0FDekJYLEVBQUVvQixTQUNGQyxzQkFBc0JSLElBRTFCUSxzQkFBc0JSLEksMkJDNUN0QlMsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sSUFDdERELEVBQVFaLHlCQUFzQixFQUM5QixNQUFNbEIsRUFBYyxFQUFRLEtBQ3RCZ0MsRUFBVyxFQUFRLEtBQ25CQyxFQUFVLEVBQVEsS0FrQnhCSCxFQUFRWixvQkFqQm9CLENBQUNILEVBQVFtQixLQUNqQyxNQUFNbEIsRUFBUyxDQUFDaEIsRUFBWVUsS0FBS3lCLE1BQU1wQixFQUFPTixJQUFLVCxFQUFZVSxLQUFLeUIsTUFBTXBCLEVBQU9ELEtBQzNFc0IsRUFBbUIsQ0FBQ3JCLEVBQVFzQixFQUFLQyxFQUFLQyxFQUFhQyxHQUFRLEtBQzdELE1BQU1DLEVBQU9ULEVBQVNVLEtBQUtMLEVBQUtDLEVBQUssSUFDL0JLLEVBQVVWLEVBQVFXLE1BQU03QixFQUFPSCxHQUFJRyxFQUFPRixHQUFJNEIsR0FDOUNJLEVBQWVaLEVBQVFXLE1BQU1YLEVBQVFXLE1BQU1YLEVBQVFXLE1BQU03QixFQUFPTixHQUFJTSxFQUFPSCxHQUFJNkIsR0FBT0UsRUFBU0YsR0FBT1IsRUFBUVcsTUFBTUQsRUFBU1YsRUFBUVcsTUFBTTdCLEVBQU9GLEdBQUlFLEVBQU9ELEdBQUkyQixHQUFPQSxHQUFPQSxHQUMvS0ssRUFBWTlCLEVBQU91QixFQUFjLEdBQ2pDUSxFQUFZL0IsRUFBT3VCLEdBQ3pCdkIsRUFBT2dDLE9BQU9ULEVBQWEsRUFBR00sSUFDMUJaLEVBQVFnQixJQUFJaEIsRUFBUWlCLFVBQVVqQixFQUFRa0IsSUFBSUwsRUFBV0QsSUFBZ0JaLEVBQVFpQixVQUFVakIsRUFBUWtCLElBQUlKLEVBQVdGLEtBQWtCWCxHQUFrQk0sS0FDbEpKLEVBQWlCckIsRUFBUTBCLEVBQU1ILEVBQUtDLEVBQWMsR0FDbERILEVBQWlCckIsRUFBUXNCLEVBQUtJLEVBQU1GLEtBSTVDLE9BREFILEVBQWlCckIsRUFBUSxFQUFHLEVBQUcsR0FBRyxHQUMzQkMsSSx5QkNwQlhZLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRWSxLQUFPWixFQUFRc0IsVUFBWXRCLEVBQVF1QixNQUFRdkIsRUFBUXdCLE1BQVF4QixFQUFReUIsU0FBV3pCLEVBQVEwQixhQUFVLEVBQ3hHMUIsRUFBUTBCLFFBQVUsS0FFbEIxQixFQUFReUIsU0FEVUUsR0FBTSxFQUFNQSxFQUFJQyxLQUFLQyxNQUFNRixHQUc3QzNCLEVBQVF3QixNQURPRyxHQUFNQSxFQUFJQyxLQUFLQyxNQUFNRixHQUdwQzNCLEVBQVF1QixNQURNLENBQUNPLEVBQUd2QixFQUFLQyxJQUFRb0IsS0FBS3BCLElBQUlvQixLQUFLckIsSUFBSXVCLEVBQUd0QixHQUFNRCxHQUcxRFAsRUFBUXNCLFVBRFUsQ0FBQ1MsRUFBVUMsRUFBS0MsSUFBV0QsRUFBTWhDLEVBQVF1QixPQUFPVSxFQUFTRixHQUFZQyxFQUFLLEVBQUcsR0FBSyxFQUdwR2hDLEVBQVFZLEtBREssQ0FBQ2tCLEVBQUdJLEVBQUdDLElBQU1MLEdBQUssRUFBSUssR0FBS0QsRUFBSUMsRywyQkNYNUNyQyxPQUFPQyxlQUFlQyxFQUFTLGFBQWMsQ0FBRUMsT0FBTyxJQUN0REQsRUFBUW9DLFFBQVVwQyxFQUFRcUMsSUFBTXJDLEVBQVFzQyxLQUFPdEMsRUFBUXVDLEtBQU92QyxFQUFRd0MsYUFBZXhDLEVBQVFjLE1BQVFkLEVBQVFvQixVQUFZcEIsRUFBUXlDLE9BQVN6QyxFQUFRbUIsSUFBTW5CLEVBQVEwQyxLQUFPMUMsRUFBUTJDLElBQU0zQyxFQUFRNEMsS0FBTzVDLEVBQVE2QixNQUFRN0IsRUFBUXFCLElBQU1yQixFQUFRNkMsS0FBTzdDLEVBQVE4QyxJQUFNOUMsRUFBUStDLE9BQVMvQyxFQUFRZ0QsU0FBV2hELEVBQVFpRCxNQUFRakQsRUFBUWtELE9BQVNsRCxFQUFRbUQsYUFBZW5ELEVBQVFvRCxZQUFTLEVBQzVXLE1BQU1sRixFQUFjLEVBQVEsS0FPNUI4QixFQUFRb0QsT0FOTyxDQUFDdEIsRUFBR3ZCLEVBQUtDLEtBQ3BCLE1BQU02QyxFQUFNbkYsRUFBWVUsS0FBS3lCLE1BQU15QixHQUduQyxPQUZBNUQsRUFBWVUsS0FBSzJCLElBQUk4QyxFQUFLQSxFQUFLN0MsR0FDL0J0QyxFQUFZVSxLQUFLNEIsSUFBSTZDLEVBQUtBLEVBQUs5QyxHQUN4QjhDLEdBSVhyRCxFQUFRbUQsYUFEYSxDQUFDeEUsRUFBSUcsSUFBUUgsRUFBRyxHQUFLRyxFQUFHLEdBQU9ILEVBQUcsR0FBS0csRUFBRyxHQUUvRGtCLEVBQVFrRCxPQUFTaEYsRUFBWVUsS0FBS3NFLE9BRWxDbEQsRUFBUWlELE1BRE0sQ0FBQ3RFLEVBQUltRCxJQUFNNUQsRUFBWVUsS0FBS3FFLE1BQU0vRSxFQUFZVSxLQUFLMEUsU0FBVTNFLEVBQUltRCxHQUcvRTlCLEVBQVFnRCxTQURTLENBQUNyRSxFQUFJRyxJQUFPWixFQUFZVSxLQUFLb0UsU0FBUzlFLEVBQVlVLEtBQUswRSxTQUFVM0UsRUFBSUcsR0FHdEZrQixFQUFRK0MsT0FETyxDQUFDcEUsRUFBSUcsSUFBT1osRUFBWVUsS0FBS21FLE9BQU83RSxFQUFZVSxLQUFLMEUsU0FBVTNFLEVBQUlHLEdBR2xGa0IsRUFBUThDLElBREksQ0FBQ25FLEVBQUlHLElBQU9aLEVBQVlVLEtBQUtrRSxJQUFJNUUsRUFBWVUsS0FBSzBFLFNBQVUzRSxFQUFJRyxHQUc1RWtCLEVBQVE2QyxLQURLLENBQUNsRSxFQUFJbUQsSUFBTTVELEVBQVlVLEtBQUtDLFdBQVdGLEVBQUcsR0FBS21ELEVBQUduRCxFQUFHLEdBQUttRCxHQUd2RTlCLEVBQVFxQixJQURJLENBQUMxQyxFQUFJRyxJQUFPWixFQUFZVSxLQUFLeUMsSUFBSW5ELEVBQVlVLEtBQUswRSxTQUFVM0UsRUFBSUcsR0FHNUVrQixFQUFRNkIsTUFET2xELEdBQU9ULEVBQVlVLEtBQUtpRCxNQUFNM0QsRUFBWVUsS0FBSzBFLFNBQVUzRSxHQUd4RXFCLEVBQVE0QyxLQURNakUsR0FBT1QsRUFBWVUsS0FBS2dFLEtBQUsxRSxFQUFZVSxLQUFLMEUsU0FBVTNFLEdBR3RFcUIsRUFBUTJDLElBREtoRSxHQUFPVCxFQUFZVSxLQUFLQyxXQUFXK0MsS0FBS2UsSUFBSWhFLEVBQUcsSUFBS2lELEtBQUtlLElBQUloRSxFQUFHLEtBRzdFcUIsRUFBUTBDLEtBRE0vRCxHQUFPVCxFQUFZVSxLQUFLQyxXQUFXK0MsS0FBS2MsS0FBSy9ELEVBQUcsSUFBS2lELEtBQUtjLEtBQUsvRCxFQUFHLEtBR2hGcUIsRUFBUW1CLElBREksQ0FBQ3hDLEVBQUlHLElBQU9aLEVBQVlVLEtBQUt1QyxJQUFJeEMsRUFBSUcsR0FHakRrQixFQUFReUMsT0FEUTlELEdBQU9ULEVBQVlVLEtBQUs2RCxPQUFPOUQsR0FHL0NxQixFQUFRb0IsVUFEV3pDLEdBQU9xQixFQUFRaUQsTUFBTXRFLEVBQUksRUFBSXFCLEVBQVF5QyxPQUFPOUQsSUFHL0RxQixFQUFRYyxNQURNLENBQUNnQixFQUFHSSxFQUFHQyxJQUFNakUsRUFBWVUsS0FBS2dDLEtBQUsxQyxFQUFZVSxLQUFLMEUsU0FBVXhCLEVBQUdJLEVBQUdDLEdBUWxGbkMsRUFBUXdDLGFBTGEsQ0FBQ1YsRUFBR3lCLEtBQ3JCekIsRUFBRSxHQUFLMEIsV0FBVzFCLEVBQUUsR0FBRzJCLFlBQVlGLElBQ25DekIsRUFBRSxHQUFLMEIsV0FBVzFCLEVBQUUsR0FBRzJCLFlBQVlGLElBQzVCekIsR0FXWDlCLEVBQVF1QyxLQVJLLElBQUltQixLQUNiLE1BQU9oRCxLQUFVaUQsR0FBUUQsRUFDbkJFLEVBQVMxRixFQUFZVSxLQUFLeUIsTUFBTUssR0FJdEMsT0FIQWlELEVBQUtFLFNBQVNDLElBQ1Y1RixFQUFZVSxLQUFLMkIsSUFBSXFELEVBQVFBLEVBQVFFLE1BRWxDRixHQVdYNUQsRUFBUXNDLEtBUkssSUFBSW9CLEtBQ2IsTUFBT2hELEtBQVVpRCxHQUFRRCxFQUNuQkUsRUFBUzFGLEVBQVlVLEtBQUt5QixNQUFNSyxHQUl0QyxPQUhBaUQsRUFBS0UsU0FBU0MsSUFDVjVGLEVBQVlVLEtBQUs0QixJQUFJb0QsRUFBUUEsRUFBUUUsTUFFbENGLEdBYVg1RCxFQUFRcUMsSUFWSSxJQUFJcUIsS0FDWixNQUFNRSxFQUFTMUYsRUFBWVUsS0FBSzBFLFNBT2hDLE9BTklJLEVBQUtqQixTQUNMaUIsRUFBS0csU0FBU0MsSUFDVjVGLEVBQVlVLEtBQUtrRSxJQUFJYyxFQUFRQSxFQUFRRSxNQUV6QzVGLEVBQVlVLEtBQUtxRSxNQUFNVyxFQUFRQSxFQUFRLEVBQUlGLEVBQUtqQixTQUU3Q21CLEdBTVg1RCxFQUFRb0MsUUFIUSxDQUFDekQsRUFBSTRCLEVBQUtDLE1BQ2I3QixFQUFHLEdBQUs2QixFQUFJLElBQU03QixFQUFHLEdBQUs0QixFQUFJLElBQU01QixFQUFHLEdBQUs2QixFQUFJLElBQU03QixFQUFHLEdBQUs0QixFQUFJLEsseUJDOUUvRVQsT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQUVDLE9BQU8sSUFDdERELEVBQVFMLGVBQVksRUFTcEJLLEVBQVFMLFVBUlUsQ0FBQ25CLEVBQUdVLEtBQ2xCLE1BQU02RSxFQUFhN0UsRUFBTyxHQUMxQlYsRUFBRXdGLE9BQU9ELEVBQVcsR0FBSXZGLEVBQUV5RixPQUFPekUsT0FBU3VFLEVBQVcsSUFDckQsSUFBSyxJQUFJRyxFQUFJLEVBQUdBLEVBQUloRixFQUFPdUQsT0FBUXlCLElBQUssQ0FDcEMsTUFBTUMsRUFBUWpGLEVBQU9nRixHQUNyQjFGLEVBQUU0RixPQUFPRCxFQUFNLEdBQUkzRixFQUFFeUYsT0FBT3pFLE9BQVMyRSxFQUFNLFEiLCJmaWxlIjoiY3ViaWNfYmV6aWVyX3NpbXBsaWZpY2F0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjdWJpY0JlemllclRvUG9pbnRzXzEgPSByZXF1aXJlKFwiLi4vZ2VvbWV0cnkvY3ViaWNCZXppZXJUb1BvaW50c1wiKTtcclxuY29uc3QgcGxvdExpbmVzXzEgPSByZXF1aXJlKFwiLi4vcmVuZGVyL3Bsb3RMaW5lc1wiKTtcclxuY29uc3QgZ2FtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZVwiKTtcclxuY29uc3QgZyA9IGdhbWUuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5pZiAoIWcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGdldCBjYW52YXMnKTtcclxufVxyXG5jb25zdCBwMSA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyg0MCwgNDApO1xyXG5jb25zdCBwMiA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygxMDAsIDI0MCk7XHJcbmNvbnN0IHAzID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKDMwMCwgODApO1xyXG5jb25zdCBwNCA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcygyNjAsIDM4MCk7XHJcbmNvbnN0IGJlemllciA9IHtcclxuICAgIHAxLFxyXG4gICAgcDIsXHJcbiAgICBwMyxcclxuICAgIHA0LFxyXG4gICAgcG9pbnRzOiBbcDEsIHAyLCBwMywgcDRdXHJcbn07XHJcbmNvbnN0IHNwbGl0VGhyZXNob2xkID0gLTAuOTk7XHJcbmNvbnN0IGJlemllckxpbmVzID0gY3ViaWNCZXppZXJUb1BvaW50c18xLmN1YmljQmV6aWVyVG9Qb2ludHMoYmV6aWVyLCBzcGxpdFRocmVzaG9sZCk7XHJcbmNvbnN0IGRyYXcgPSAoKSA9PiB7XHJcbiAgICBnLmNsZWFyUmVjdCgwLCAwLCBnYW1lLndpZHRoLCBnYW1lLmhlaWdodCk7XHJcbiAgICAvL2RyYXcgdGhlIGN1cnZlIHRyaWFuZ2xlXHJcbiAgICBnLnN0cm9rZVN0eWxlID0gXCJibHVlXCI7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgcGxvdExpbmVzXzEucGxvdExpbmVzKGcsIGJlemllci5wb2ludHMpO1xyXG4gICAgZy5zdHJva2UoKTtcclxuICAgIC8vZHJhdyBvdXIgYmV6aWVyIGN1cnZlXHJcbiAgICAvKlxyXG4gICAgZy5zdHJva2VTdHlsZSA9IFwicmVkXCI7XHJcbiAgICBnLmJlZ2luUGF0aCgpO1xyXG4gICAgZy5tb3ZlVG8oYmV6aWVyLnAxWzBdLCBnYW1lLmhlaWdodCAtIGJlemllci5wMVsxXSk7XHJcbiAgICBnLmJlemllckN1cnZlVG8oYmV6aWVyLnAyWzBdLCBnYW1lLmhlaWdodCAtIGJlemllci5wMlsxXSwgYmV6aWVyLnAzWzBdLCBnYW1lLmhlaWdodCAtIGJlemllci5wM1sxXSwgYmV6aWVyLnA0WzBdLCBnYW1lLmhlaWdodCAtIGJlemllci5wNFsxXSk7XHJcbiAgICBnLnN0cm9rZSgpO1xyXG4gICAgKi9cclxuICAgIC8vZHJhdyB0aGUgbmV3ICdjdXJ2ZScgdGhhdCBjb25zaXN0cyBvZiBsaW5lc1xyXG4gICAgZy5zdHJva2VTdHlsZSA9IFwiZ3JlZW5cIjtcclxuICAgIGcuYmVnaW5QYXRoKCk7XHJcbiAgICBwbG90TGluZXNfMS5wbG90TGluZXMoZywgYmV6aWVyTGluZXMpO1xyXG4gICAgZy5zdHJva2UoKTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KTtcclxufTtcclxucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXcpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmN1YmljQmV6aWVyVG9Qb2ludHMgPSB2b2lkIDA7XHJcbmNvbnN0IGdsX21hdHJpeF8xID0gcmVxdWlyZShcImdsLW1hdHJpeFwiKTtcclxuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvY29tbW9uXCIpO1xyXG5jb25zdCBwb2ludF8xID0gcmVxdWlyZShcIi4uL21hdGhzL3BvaW50XCIpO1xyXG5jb25zdCBjdWJpY0JlemllclRvUG9pbnRzID0gKGJlemllciwgc3BsaXRUaHJlc2hvbGQpID0+IHtcclxuICAgIGNvbnN0IHBvaW50cyA9IFtnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGJlemllci5wMSksIGdsX21hdHJpeF8xLnZlYzIuY2xvbmUoYmV6aWVyLnA0KV07XHJcbiAgICBjb25zdCBjdWJpY0JlemllclNwbGl0ID0gKGJlemllciwgbWluLCBtYXgsIGluc2VydEluZGV4LCBmaXJzdCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IGNvbW1vbl8xLmxlcnAobWluLCBtYXgsIDAuNSk7XHJcbiAgICAgICAgY29uc3QgbWlkTGVycCA9IHBvaW50XzEubGVycDIoYmV6aWVyLnAyLCBiZXppZXIucDMsIHRpbWUpO1xyXG4gICAgICAgIGNvbnN0IHBvaW50T25DdXJ2ZSA9IHBvaW50XzEubGVycDIocG9pbnRfMS5sZXJwMihwb2ludF8xLmxlcnAyKGJlemllci5wMSwgYmV6aWVyLnAyLCB0aW1lKSwgbWlkTGVycCwgdGltZSksIHBvaW50XzEubGVycDIobWlkTGVycCwgcG9pbnRfMS5sZXJwMihiZXppZXIucDMsIGJlemllci5wNCwgdGltZSksIHRpbWUpLCB0aW1lKTtcclxuICAgICAgICBjb25zdCBwcmV2UG9pbnQgPSBwb2ludHNbaW5zZXJ0SW5kZXggLSAxXTtcclxuICAgICAgICBjb25zdCBuZXh0UG9pbnQgPSBwb2ludHNbaW5zZXJ0SW5kZXhdO1xyXG4gICAgICAgIHBvaW50cy5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIHBvaW50T25DdXJ2ZSk7XHJcbiAgICAgICAgaWYgKHBvaW50XzEuZG90KHBvaW50XzEubm9ybWFsaXplKHBvaW50XzEuc3ViKHByZXZQb2ludCwgcG9pbnRPbkN1cnZlKSksIHBvaW50XzEubm9ybWFsaXplKHBvaW50XzEuc3ViKG5leHRQb2ludCwgcG9pbnRPbkN1cnZlKSkpID4gc3BsaXRUaHJlc2hvbGQgfHwgZmlyc3QpIHtcclxuICAgICAgICAgICAgY3ViaWNCZXppZXJTcGxpdChiZXppZXIsIHRpbWUsIG1heCwgaW5zZXJ0SW5kZXggKyAxKTtcclxuICAgICAgICAgICAgY3ViaWNCZXppZXJTcGxpdChiZXppZXIsIG1pbiwgdGltZSwgaW5zZXJ0SW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjdWJpY0JlemllclNwbGl0KGJlemllciwgMCwgMSwgMSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gcG9pbnRzO1xyXG59O1xyXG5leHBvcnRzLmN1YmljQmV6aWVyVG9Qb2ludHMgPSBjdWJpY0JlemllclRvUG9pbnRzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmxlcnAgPSBleHBvcnRzLnRpbWVBdFBvcyA9IGV4cG9ydHMuY2xhbXAgPSBleHBvcnRzLmZyYWN0ID0gZXhwb3J0cy5uZWdGcmFjdCA9IGV4cG9ydHMuRVBTSUxPTiA9IHZvaWQgMDtcclxuZXhwb3J0cy5FUFNJTE9OID0gMC4wMDAwMDE7XHJcbmNvbnN0IG5lZ0ZyYWN0ID0gKHgpID0+IDEuMCAtIHggKyBNYXRoLmZsb29yKHgpO1xyXG5leHBvcnRzLm5lZ0ZyYWN0ID0gbmVnRnJhY3Q7XHJcbmNvbnN0IGZyYWN0ID0gKHgpID0+IHggLSBNYXRoLmZsb29yKHgpO1xyXG5leHBvcnRzLmZyYWN0ID0gZnJhY3Q7XHJcbmNvbnN0IGNsYW1wID0gKGEsIG1pbiwgbWF4KSA9PiBNYXRoLm1heChNYXRoLm1pbihhLCBtYXgpLCBtaW4pO1xyXG5leHBvcnRzLmNsYW1wID0gY2xhbXA7XHJcbmNvbnN0IHRpbWVBdFBvcyA9IChzdGFydFBvcywgZGlyLCBuZXdQb3MpID0+IGRpciA/IGV4cG9ydHMuY2xhbXAoKG5ld1BvcyAtIHN0YXJ0UG9zKSAvIGRpciwgMCwgMSkgOiAwO1xyXG5leHBvcnRzLnRpbWVBdFBvcyA9IHRpbWVBdFBvcztcclxuY29uc3QgbGVycCA9IChhLCBiLCB0KSA9PiBhICogKDEgLSB0KSArIGIgKiB0O1xyXG5leHBvcnRzLmxlcnAgPSBsZXJwO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmluUmFuZ2UgPSBleHBvcnRzLmF2ZyA9IGV4cG9ydHMubWF4MiA9IGV4cG9ydHMubWluMiA9IGV4cG9ydHMudG9QcmVjaXNpb24yID0gZXhwb3J0cy5sZXJwMiA9IGV4cG9ydHMubm9ybWFsaXplID0gZXhwb3J0cy5sZW5ndGggPSBleHBvcnRzLmRvdCA9IGV4cG9ydHMuc2lnbiA9IGV4cG9ydHMuYWJzID0gZXhwb3J0cy5jZWlsID0gZXhwb3J0cy5mbG9vciA9IGV4cG9ydHMuc3ViID0gZXhwb3J0cy5hZGRzID0gZXhwb3J0cy5hZGQgPSBleHBvcnRzLmRpdmlkZSA9IGV4cG9ydHMubXVsdGlwbHkgPSBleHBvcnRzLnNjYWxlID0gZXhwb3J0cy5lcXVhbHMgPSBleHBvcnRzLmRldGVybWluYW50MiA9IGV4cG9ydHMuY2xhbXAyID0gdm9pZCAwO1xyXG5jb25zdCBnbF9tYXRyaXhfMSA9IHJlcXVpcmUoXCJnbC1tYXRyaXhcIik7XHJcbmNvbnN0IGNsYW1wMiA9IChhLCBtaW4sIG1heCkgPT4ge1xyXG4gICAgY29uc3Qgb3V0ID0gZ2xfbWF0cml4XzEudmVjMi5jbG9uZShhKTtcclxuICAgIGdsX21hdHJpeF8xLnZlYzIubWluKG91dCwgb3V0LCBtYXgpO1xyXG4gICAgZ2xfbWF0cml4XzEudmVjMi5tYXgob3V0LCBvdXQsIG1pbik7XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG5leHBvcnRzLmNsYW1wMiA9IGNsYW1wMjtcclxuY29uc3QgZGV0ZXJtaW5hbnQyID0gKHAxLCBwMikgPT4gKHAxWzBdICogcDJbMV0pIC0gKHAxWzFdICogcDJbMF0pO1xyXG5leHBvcnRzLmRldGVybWluYW50MiA9IGRldGVybWluYW50MjtcclxuZXhwb3J0cy5lcXVhbHMgPSBnbF9tYXRyaXhfMS52ZWMyLmVxdWFscztcclxuY29uc3Qgc2NhbGUgPSAocDEsIGEpID0+IGdsX21hdHJpeF8xLnZlYzIuc2NhbGUoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEsIGEpO1xyXG5leHBvcnRzLnNjYWxlID0gc2NhbGU7XHJcbmNvbnN0IG11bHRpcGx5ID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5tdWx0aXBseShnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgcDIpO1xyXG5leHBvcnRzLm11bHRpcGx5ID0gbXVsdGlwbHk7XHJcbmNvbnN0IGRpdmlkZSA9IChwMSwgcDIpID0+IGdsX21hdHJpeF8xLnZlYzIuZGl2aWRlKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBwMik7XHJcbmV4cG9ydHMuZGl2aWRlID0gZGl2aWRlO1xyXG5jb25zdCBhZGQgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmFkZChnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgcDIpO1xyXG5leHBvcnRzLmFkZCA9IGFkZDtcclxuY29uc3QgYWRkcyA9IChwMSwgYSkgPT4gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKHAxWzBdICsgYSwgcDFbMV0gKyBhKTtcclxuZXhwb3J0cy5hZGRzID0gYWRkcztcclxuY29uc3Qgc3ViID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5zdWIoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEsIHAyKTtcclxuZXhwb3J0cy5zdWIgPSBzdWI7XHJcbmNvbnN0IGZsb29yID0gKHAxKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmZsb29yKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxKTtcclxuZXhwb3J0cy5mbG9vciA9IGZsb29yO1xyXG5jb25zdCBjZWlsID0gKHAxKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmNlaWwoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEpO1xyXG5leHBvcnRzLmNlaWwgPSBjZWlsO1xyXG5jb25zdCBhYnMgPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhNYXRoLmFicyhwMVswXSksIE1hdGguYWJzKHAxWzFdKSk7XHJcbmV4cG9ydHMuYWJzID0gYWJzO1xyXG5jb25zdCBzaWduID0gKHAxKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoTWF0aC5zaWduKHAxWzBdKSwgTWF0aC5zaWduKHAxWzFdKSk7XHJcbmV4cG9ydHMuc2lnbiA9IHNpZ247XHJcbmNvbnN0IGRvdCA9IChwMSwgcDIpID0+IGdsX21hdHJpeF8xLnZlYzIuZG90KHAxLCBwMik7XHJcbmV4cG9ydHMuZG90ID0gZG90O1xyXG5jb25zdCBsZW5ndGggPSAocDEpID0+IGdsX21hdHJpeF8xLnZlYzIubGVuZ3RoKHAxKTtcclxuZXhwb3J0cy5sZW5ndGggPSBsZW5ndGg7XHJcbmNvbnN0IG5vcm1hbGl6ZSA9IChwMSkgPT4gZXhwb3J0cy5zY2FsZShwMSwgMSAvIGV4cG9ydHMubGVuZ3RoKHAxKSk7XHJcbmV4cG9ydHMubm9ybWFsaXplID0gbm9ybWFsaXplO1xyXG5jb25zdCBsZXJwMiA9IChhLCBiLCB0KSA9PiBnbF9tYXRyaXhfMS52ZWMyLmxlcnAoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgYSwgYiwgdCk7XHJcbmV4cG9ydHMubGVycDIgPSBsZXJwMjtcclxuLy93YXJuaW5nOiBtdXRhdGVzIGFcclxuY29uc3QgdG9QcmVjaXNpb24yID0gKGEsIGFtb3VudCkgPT4ge1xyXG4gICAgYVswXSA9IHBhcnNlRmxvYXQoYVswXS50b1ByZWNpc2lvbihhbW91bnQpKTtcclxuICAgIGFbMV0gPSBwYXJzZUZsb2F0KGFbMV0udG9QcmVjaXNpb24oYW1vdW50KSk7XHJcbiAgICByZXR1cm4gYTtcclxufTtcclxuZXhwb3J0cy50b1ByZWNpc2lvbjIgPSB0b1ByZWNpc2lvbjI7XHJcbmNvbnN0IG1pbjIgPSAoLi4ub2JqcykgPT4ge1xyXG4gICAgY29uc3QgW2ZpcnN0LCAuLi5yZXN0XSA9IG9ianM7XHJcbiAgICBjb25zdCByZXN1bHQgPSBnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGZpcnN0KTtcclxuICAgIHJlc3QuZm9yRWFjaCgob2JqKSA9PiB7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5taW4ocmVzdWx0LCByZXN1bHQsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbmV4cG9ydHMubWluMiA9IG1pbjI7XHJcbmNvbnN0IG1heDIgPSAoLi4ub2JqcykgPT4ge1xyXG4gICAgY29uc3QgW2ZpcnN0LCAuLi5yZXN0XSA9IG9ianM7XHJcbiAgICBjb25zdCByZXN1bHQgPSBnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGZpcnN0KTtcclxuICAgIHJlc3QuZm9yRWFjaCgob2JqKSA9PiB7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5tYXgocmVzdWx0LCByZXN1bHQsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbmV4cG9ydHMubWF4MiA9IG1heDI7XHJcbmNvbnN0IGF2ZyA9ICguLi5vYmpzKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpO1xyXG4gICAgaWYgKG9ianMubGVuZ3RoKSB7XHJcbiAgICAgICAgb2Jqcy5mb3JFYWNoKChvYmopID0+IHtcclxuICAgICAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5hZGQocmVzdWx0LCByZXN1bHQsIG9iaik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5zY2FsZShyZXN1bHQsIHJlc3VsdCwgMSAvIG9ianMubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn07XHJcbmV4cG9ydHMuYXZnID0gYXZnO1xyXG5jb25zdCBpblJhbmdlID0gKHAxLCBtaW4sIG1heCkgPT4ge1xyXG4gICAgcmV0dXJuICEocDFbMF0gPiBtYXhbMF0gfHwgcDFbMF0gPCBtaW5bMF0gfHwgcDFbMV0gPiBtYXhbMV0gfHwgcDFbMV0gPCBtaW5bMV0pO1xyXG59O1xyXG5leHBvcnRzLmluUmFuZ2UgPSBpblJhbmdlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnBsb3RMaW5lcyA9IHZvaWQgMDtcclxuY29uc3QgcGxvdExpbmVzID0gKGcsIHBvaW50cykgPT4ge1xyXG4gICAgY29uc3QgZmlyc3RQb2ludCA9IHBvaW50c1swXTtcclxuICAgIGcubW92ZVRvKGZpcnN0UG9pbnRbMF0sIGcuY2FudmFzLmhlaWdodCAtIGZpcnN0UG9pbnRbMV0pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBwb2ludCA9IHBvaW50c1tpXTtcclxuICAgICAgICBnLmxpbmVUbyhwb2ludFswXSwgZy5jYW52YXMuaGVpZ2h0IC0gcG9pbnRbMV0pO1xyXG4gICAgfVxyXG59O1xyXG5leHBvcnRzLnBsb3RMaW5lcyA9IHBsb3RMaW5lcztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==