"use strict";(self.webpackChunksubpixel_rendering=self.webpackChunksubpixel_rendering||[]).push([[138],{89:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.aabb=void 0;const t=n(669);r.aabb=(...e)=>({min:(0,t.min2)(...e),max:(0,t.max2)(...e)})},943:function(e,r,n){var t=this&&this.__awaiter||function(e,r,n,t){return new(n||(n=Promise))((function(o,a){function s(e){try{c(t.next(e))}catch(e){a(e)}}function i(e){try{c(t.throw(e))}catch(e){a(e)}}function c(e){var r;e.done?o(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,i)}c((t=t.apply(e,r||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const a=n(422),s=n(887),i=n(705),c=n(199),l=n(77),p=o(n(911)),v=o(n(618));let d,u,x,f,m,P,h,g,b,y,M;const A=s.vec3.fromValues(0,0,0),w=s.vec3.fromValues(20,20,1),S=s.mat4.create(),T=s.mat4.create(),_=s.mat4.create(),L=s.mat4.create(),E=s.mat4.create(),F=()=>{d.width=d.clientWidth,d.height=d.clientHeight,u.viewport(0,0,d.width,d.height),u.useProgram(h),u.uniform2fv(M,[d.width,d.height])},R=()=>{u.clear(u.COLOR_BUFFER_BIT),s.mat4.identity(S),s.mat4.scale(S,S,[1,-1,1]),s.mat4.translate(S,S,A),s.mat4.scale(S,S,w),s.mat4.translate(S,S,[-10,0,0]);const e=d.width/2,r=d.height/2;s.mat4.ortho(L,-e,e,-r,r,0,1e4),s.mat4.multiply(_,T,S),s.mat4.multiply(E,L,_),u.useProgram(h),u.uniformMatrix4fv(y,!1,E),u.drawArrays(u.TRIANGLES,0,x.length/2),requestAnimationFrame(R)};t(void 0,void 0,void 0,(function*(){const e=(yield(0,a.load)("./media/Timeless.ttf")).stringToGlyphs("Test");let r=0;const n=[],t=[],o=[];for(const a of e){const e=a.getPath(r,0,12),s=(0,i.pathToPoints)(e.toPathData(3),-.99);r+=a.advanceWidth/1e3*12;const l=(0,c.pointsToPolygons)(s);for(const e of l)for(const{p1:r,p2:a,p3:s}of e)n.push(r[0],r[1],a[0],a[1],s[0],s[1]),t.push(a[0],a[1],s[0],s[1],r[0],r[1]),o.push(s[0],s[1],r[0],r[1],a[0],a[1])}x=new Float32Array(n),f=new Float32Array(t),m=new Float32Array(o),(()=>{d=document.getElementById("canvas1"),u=d.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1}),d.addEventListener("wheel",(e=>{e.preventDefault(),w[0]*=e.deltaY<0?2:.5,w[1]=w[0]})),(0,l.subscribeDrag)({elem:d,ondrag:e=>{A[0]+=e.x,A[1]+=e.y}}),P=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,P),u.bufferData(u.ARRAY_BUFFER,x,u.STATIC_DRAW),g=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,g),u.bufferData(u.ARRAY_BUFFER,f,u.STATIC_DRAW),b=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,b),u.bufferData(u.ARRAY_BUFFER,m,u.STATIC_DRAW);const e=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(e,p.default),u.compileShader(e),""!==String(u.getShaderInfoLog(e)).trim())throw new Error(String(u.getShaderInfoLog(e)));const r=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(r,v.default),u.compileShader(r),""!==String(u.getShaderInfoLog(r)).trim())throw new Error(String(u.getShaderInfoLog(r)));if(h=u.createProgram(),u.attachShader(h,e),u.attachShader(h,r),u.linkProgram(h),""!==String(u.getProgramInfoLog(h)).trim())throw new Error(String(u.getProgramInfoLog(h)));u.useProgram(h);const n=u.getAttribLocation(h,"pos");u.bindBuffer(u.ARRAY_BUFFER,P),u.vertexAttribPointer(n,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(n);const t=u.getAttribLocation(h,"prevPos");u.bindBuffer(u.ARRAY_BUFFER,b),u.vertexAttribPointer(t,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(t);const o=u.getAttribLocation(h,"nextPos");u.bindBuffer(u.ARRAY_BUFFER,g),u.vertexAttribPointer(o,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(o),M=u.getUniformLocation(h,"screenSize"),y=u.getUniformLocation(h,"modelViewProjection"),u.clearColor(0,0,0,0),u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE)})(),window.onresize=F,F(),R()}))},856:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.cubicBezierToPoints=void 0;const t=n(887),o=n(345),a=n(669);r.cubicBezierToPoints=(e,r)=>{const n=[t.vec2.clone(e.p1),t.vec2.clone(e.p4)],s=(e,t,i,c,l=!1)=>{const p=(0,o.lerp)(t,i,.5),v=(0,a.lerp2)(e.p2,e.p3,p),d=(0,a.lerp2)((0,a.lerp2)((0,a.lerp2)(e.p1,e.p2,p),v,p),(0,a.lerp2)(v,(0,a.lerp2)(e.p3,e.p4,p),p),p),u=n[c-1],x=n[c];n.splice(c,0,d),((0,a.dot)((0,a.normalize)((0,a.sub)(u,d)),(0,a.normalize)((0,a.sub)(x,d)))>r||l)&&(s(e,p,i,c+1),s(e,t,p,c))};return s(e,0,1,1,!0),n}},705:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.pathToPoints=void 0;const t=n(887),o=n(856),a=n(354),s=/(?=[astvzqmhlc])/gi,i=/(-?[0-9]*\.?[0-9]+)(?:e[-+]?\d+)?/gi;r.pathToPoints=(e,r)=>{const n=e.split(s),c=[];if(n.length){let e=[];const s=t.vec2.create();for(;n.length;){const l=n.shift();if(!(null==l?void 0:l.length))continue;const p=l.substring(1).match(i)||[],v=l[0],d=v.toLowerCase(),u=v===d;switch(d){case"l":case"m":for(;p.length;){const r=t.vec2.fromValues(parseFloat(p.shift()),parseFloat(p.shift()));u&&t.vec2.add(r,r,s),e.push(r),t.vec2.copy(s,r)}break;case"h":for(;p.length;){let r=parseFloat(p.shift());u&&(r+=s[0]),e.push(t.vec2.fromValues(r,s[1])),s[0]=r}break;case"v":for(;p.length;){let r=parseFloat(p.shift());u&&(r+=s[1]),e.push(t.vec2.fromValues(s[0],r)),s[1]=r}break;case"z":{const r=e[0];e.push(t.vec2.clone(r)),c.push(e),e=[],t.vec2.zero(s);break}case"c":for(;p.length;){const n=t.vec2.fromValues(parseFloat(p.shift()),parseFloat(p.shift())),a=t.vec2.fromValues(parseFloat(p.shift()),parseFloat(p.shift())),i=t.vec2.fromValues(parseFloat(p.shift()),parseFloat(p.shift()));u&&(t.vec2.add(n,n,s),t.vec2.add(a,a,s),t.vec2.add(i,i,s)),e.push(...(0,o.cubicBezierToPoints)({p1:s,p2:n,p3:a,p4:i},r)),t.vec2.copy(s,i)}break;case"q":for(;p.length;){const n=t.vec2.fromValues(parseFloat(p.shift()),parseFloat(p.shift())),o=t.vec2.fromValues(parseFloat(p.shift()),parseFloat(p.shift()));u&&(t.vec2.add(n,n,s),t.vec2.add(o,o,s)),e.push(...(0,a.quadraticBezierToPoints)({p1:s,p2:n,p3:o},r)),t.vec2.copy(s,o)}break;case"s":case"t":case"a":console.log(d+" is not implemented")}}e.length&&c.push(e)}return c}},199:function(e,r,n){var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.pointsToPolygons=void 0;const o=t(n(187)),a=n(89),s=n(669),i=n(923);r.pointsToPolygons=e=>{const r=e.map((e=>({points:e,aabb:(0,a.aabb)(...e),area:(0,i.polygonAreaSigned)(e),children:[]})));r.sort(((e,r)=>Math.abs(r.area)-Math.abs(e.area)));const n=[];for(let e=0;e<r.length;++e){let t=null;for(let n=e-1;n>=0;--n)if((0,s.inside)(r[n].points,r[e].points[0])&&r[e].area*r[n].area<0){t=r[n];break}t?t.children.push(r[e]):n.push(r[e])}const t=[];let c=[];const l=e=>{const r=[],n=[],t=[];e.points.forEach((e=>{r.push(...e),t.push(e)})),e.children.forEach((e=>{e.children.forEach(l),n.push(r.length/2),e.points.forEach((e=>{r.push(...e),t.push(e)}))}));const a=(0,o.default)(r,n);for(let e=0;e<a.length;e+=3){const r=t[a[e+0]],n=t[a[e+1]],o=t[a[e+2]];c.push({p1:r,p2:n,p3:o,e1:(0,s.sub)(n,r),e2:(0,s.sub)(o,n),e3:(0,s.sub)(r,o),points:[r,n,o],colour:{x:Math.round(255*Math.random()),y:Math.round(255*Math.random()),z:Math.round(255*Math.random())}})}};return n.forEach((e=>{l(e),t.push(c),c=[]})),t}},923:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.polygonArea=r.polygonAreaSigned=void 0;const t=n(669);r.polygonAreaSigned=e=>{if(!e.length)return 0;const r=e.length-1;let n=0;for(let o=0;o<r;o++)n+=(0,t.determinant2)(e[o],e[o+1]);return n+=(0,t.determinant2)(e[r],e[0]),n/2},r.polygonArea=e=>Math.abs((0,r.polygonAreaSigned)(e))},354:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.quadraticBezierToPoints=void 0;const t=n(887),o=n(345),a=n(669);r.quadraticBezierToPoints=(e,r)=>{const n=[t.vec2.clone(e.p1),t.vec2.clone(e.p3)],s=(e,t,i,c)=>{const l=(0,o.lerp)(t,i,.5),p=(0,a.lerp2)((0,a.lerp2)(e.p1,e.p2,l),(0,a.lerp2)(e.p2,e.p3,l),l),v=n[c-1],d=n[c];n.splice(c,0,p),(0,a.dot)((0,a.normalize)((0,a.sub)(v,p)),(0,a.normalize)((0,a.sub)(d,p)))>r&&(s(e,l,i,c+1),s(e,t,l,c))};return s(e,0,1,1),n}},345:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.lerp=r.timeAtPos=r.clamp=r.fract=r.negFract=r.EPSILON=void 0,r.EPSILON=1e-6,r.negFract=e=>1-e+Math.floor(e),r.fract=e=>e-Math.floor(e),r.clamp=(e,r,n)=>Math.max(Math.min(e,n),r),r.timeAtPos=(e,n,t)=>n?(0,r.clamp)((t-e)/n,0,1):0,r.lerp=(e,r,n)=>e*(1-n)+r*n},669:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.inside=r.inRange=r.avg=r.max2=r.min2=r.toPrecision2=r.lerp2=r.normalize=r.length=r.dot=r.sign=r.abs=r.ceil=r.floor=r.sub=r.adds=r.add=r.divide=r.multiply=r.scale=r.equals=r.determinant2=r.clamp2=void 0;const t=n(887),o=n(345);r.clamp2=(e,r,n)=>{const o=t.vec2.clone(e);return t.vec2.min(o,o,n),t.vec2.max(o,o,r),o},r.determinant2=(e,r)=>e[0]*r[1]-e[1]*r[0],r.equals=t.vec2.equals,r.scale=(e,r)=>t.vec2.scale(t.vec2.create(),e,r),r.multiply=(e,r)=>t.vec2.multiply(t.vec2.create(),e,r),r.divide=(e,r)=>t.vec2.divide(t.vec2.create(),e,r),r.add=(e,r)=>t.vec2.add(t.vec2.create(),e,r),r.adds=(e,r)=>t.vec2.fromValues(e[0]+r,e[1]+r),r.sub=(e,r)=>t.vec2.sub(t.vec2.create(),e,r),r.floor=e=>t.vec2.floor(t.vec2.create(),e),r.ceil=e=>t.vec2.ceil(t.vec2.create(),e),r.abs=e=>t.vec2.fromValues(Math.abs(e[0]),Math.abs(e[1])),r.sign=e=>t.vec2.fromValues(Math.sign(e[0]),Math.sign(e[1])),r.dot=(e,r)=>t.vec2.dot(e,r),r.length=e=>t.vec2.length(e),r.normalize=e=>(0,r.scale)(e,1/(0,r.length)(e)),r.lerp2=(e,r,n)=>t.vec2.lerp(t.vec2.create(),e,r,n),r.toPrecision2=(e,r)=>(e[0]=parseFloat(e[0].toPrecision(r)),e[1]=parseFloat(e[1].toPrecision(r)),e),r.min2=(...e)=>{const[r,...n]=e,o=t.vec2.clone(r);return n.forEach((e=>{t.vec2.min(o,o,e)})),o},r.max2=(...e)=>{const[r,...n]=e,o=t.vec2.clone(r);return n.forEach((e=>{t.vec2.max(o,o,e)})),o},r.avg=(...e)=>{const r=t.vec2.create();return e.length&&(e.forEach((e=>{t.vec2.add(r,r,e)})),t.vec2.scale(r,r,1/e.length)),r},r.inRange=(e,r,n)=>!(e[0]>n[0]||e[0]<r[0]||e[1]>n[1]||e[1]<r[1]),r.inside=(e,r)=>{let n=0,t=e[e.length-1];return e.forEach((e=>{const a=t[1]<e[1]?t:e,s=t[1]<e[1]?e:t;a[1]<r[1]+o.EPSILON&&s[1]>r[1]+o.EPSILON&&(s[0]-a[0])*(r[1]-a[1])>(r[0]-a[0])*(s[1]-a[1])&&(n+=1),t=e})),n%2!=0}},77:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.subscribeDrag=void 0,r.subscribeDrag=e=>{const r={x:0,y:0},n={x:0,y:0},t=t=>{var o;r.x=t.pageX-n.x,r.y=t.pageY-n.y,null===(o=e.ondrag)||void 0===o||o.call(e,r,t),n.x=t.pageX,n.y=t.pageY},o=r=>{var n;window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",o),window.removeEventListener("mouseleave",o),null===(n=e.ondragend)||void 0===n||n.call(e,r)},a=r=>{var a;n.x=r.pageX,n.y=r.pageY,window.addEventListener("mousemove",t),window.addEventListener("mouseup",o),window.addEventListener("mouseleave",o),null===(a=e.ondragstart)||void 0===a||a.call(e,r)};return e.elem.addEventListener("mousedown",a),()=>{e.elem.removeEventListener("mousedown",a)}}},618:e=>{e.exports="#version 300 es\r\n\r\nprecision highp float;\r\n\r\nflat in vec4 bounds;\r\nflat in vec2 vPrevPos;\r\nflat in vec2 vPos;\r\nflat in vec2 vNextPos;\r\nflat in vec2 e1;\r\nflat in vec2 e2;\r\nflat in vec2 e3;\r\n\r\nout vec4 outColor;\r\n\r\nconst float EPSILON = 0.000001;\r\n\r\nvec4 sort(vec4 val) {\r\n  float a = min(val.x, val.y);\r\n  float b = max(val.x, val.y);\r\n  float c = min(val.z, val.w);\r\n  float d = max(val.z, val.w);\r\n\r\n  float h = max(a, min(b, c));\r\n  float i = min(d, max(b, c));\r\n\r\n  return vec4(min(a, c), min(h, i), max(h, i), max(b, d));\r\n}\r\n\r\nfloat det2(vec2 p1, vec2 p2) {\r\n  return (p1.x * p2.y) - (p1.y * p2.x);\r\n}\r\n\r\nfloat timeAtPos(float startPos, float dir, float newPos) {\r\n  if (abs(dir) < EPSILON) {\r\n      return 0.0;\r\n  }\r\n\r\n  return clamp((newPos - startPos) / dir, 0.0, 1.0);\r\n}\r\n\r\nbool squareContainedInTriangle(vec2 minPos, vec2 maxPos, vec2 p1, vec2 p2, vec2 p3) {\r\n    vec2 a = p2 - p1;\r\n    vec2 b = p3 - p1;\r\n    float denom = det2(a, b);\r\n\r\n    vec2 c = minPos - p1;\r\n    float s = det2(c, b) / denom;   \r\n    float t = -det2(c, a) / denom;\r\n    \r\n    if (s < 0.0 || t < 0.0 || (s+t) > 1.0) {\r\n        return false;\r\n    }\r\n\r\n    c = maxPos - p1;\r\n    s = det2(c, b) / denom;   \r\n    t = -det2(c, a) / denom;\r\n    \r\n    if (s < 0.0 || t < 0.0 || (s+t) > 1.0) {\r\n        return false;\r\n    }\r\n    \r\n    c = vec2(maxPos.x, minPos.y) - p1;\r\n    s = det2(c, b) / denom;   \r\n    t = -det2(c, a) / denom;\r\n    \r\n    if (s < 0.0 || t < 0.0 || (s+t) > 1.0) {\r\n        return false;\r\n    }\r\n\r\n    c = vec2(minPos.x, maxPos.y) - p1;\r\n    s = det2(c, b) / denom;   \r\n    t = -det2(c, a) / denom;\r\n    \r\n    if (s < 0.0 || t < 0.0 || (s+t) > 1.0) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nvoid main(void) {\r\n  vec2 pixelMin = floor(gl_FragCoord.xy);\r\n  vec2 pixelMax = pixelMin + 1.0;\r\n\r\n  if (\r\n      (vPos.x < pixelMin.x && vPrevPos.x < pixelMin.x && vNextPos.x < pixelMin.x) ||\r\n      (vPos.x > pixelMax.x && vPrevPos.x > pixelMax.x && vNextPos.x > pixelMax.x) ||\r\n      (vPos.y < pixelMin.y && vPrevPos.y < pixelMin.y && vNextPos.y < pixelMin.y) ||\r\n      (vPos.y > pixelMax.y && vPrevPos.y > pixelMax.y && vNextPos.y > pixelMax.y)\r\n  ) {\r\n      discard;\r\n  }\r\n\r\n  //remove conservative rasterisation overdraw\r\n  if (pixelMax.x < bounds.x || pixelMax.y < bounds.y || pixelMin.x > bounds.z || pixelMin.y > bounds.w) {\r\n      discard;\r\n  }\r\n\r\n  float alphaAmount = 1.0;\r\n\r\n  //check if the pixel is fully enclosed\r\n  if (!squareContainedInTriangle(pixelMin, pixelMax, vPrevPos, vPos, vNextPos)) {\r\n    //intersect the triangle with the pixel bounds\r\n    vec4 firstLineTs = sort(vec4(\r\n        timeAtPos(vPrevPos.x, e1.x, pixelMin.x),\r\n        timeAtPos(vPrevPos.x, e1.x, pixelMax.x),\r\n        timeAtPos(vPrevPos.y, e1.y, pixelMin.y),\r\n        timeAtPos(vPrevPos.y, e1.y, pixelMax.y)\r\n    ));\r\n\r\n    vec2 p1 = clamp(vPrevPos + e1 * firstLineTs.x, pixelMin, pixelMax);\r\n    vec2 p2 = clamp(vPrevPos + e1 * firstLineTs.y, pixelMin, pixelMax);\r\n    vec2 p3 = clamp(vPrevPos + e1 * firstLineTs.z, pixelMin, pixelMax);\r\n    vec2 p4 = clamp(vPrevPos + e1 * firstLineTs.w, pixelMin, pixelMax);\r\n\r\n    vec4 secondLineTs = sort(vec4(\r\n        timeAtPos(vPos.x, e2.x, pixelMin.x),\r\n        timeAtPos(vPos.x, e2.x, pixelMax.x),\r\n        timeAtPos(vPos.y, e2.y, pixelMin.y),\r\n        timeAtPos(vPos.y, e2.y, pixelMax.y)\r\n    ));\r\n\r\n    vec2 p5 = clamp(vPos + e2 * secondLineTs.x, pixelMin, pixelMax);\r\n    vec2 p6 = clamp(vPos + e2 * secondLineTs.y, pixelMin, pixelMax);\r\n    vec2 p7 = clamp(vPos + e2 * secondLineTs.z, pixelMin, pixelMax);\r\n    vec2 p8 = clamp(vPos + e2 * secondLineTs.w, pixelMin, pixelMax);\r\n    \r\n    vec4 thirdLineTs = sort(vec4(\r\n        timeAtPos(vNextPos.x, e3.x, pixelMin.x),\r\n        timeAtPos(vNextPos.x, e3.x, pixelMax.x),\r\n        timeAtPos(vNextPos.y, e3.y, pixelMin.y),\r\n        timeAtPos(vNextPos.y, e3.y, pixelMax.y)\r\n    ));\r\n\r\n    vec2 p9  = clamp(vNextPos + e3 * thirdLineTs.x, pixelMin, pixelMax);\r\n    vec2 p10 = clamp(vNextPos + e3 * thirdLineTs.y, pixelMin, pixelMax);\r\n    vec2 p11 = clamp(vNextPos + e3 * thirdLineTs.z, pixelMin, pixelMax);\r\n    vec2 p12 = clamp(vNextPos + e3 * thirdLineTs.w, pixelMin, pixelMax);\r\n\r\n\r\n    //compute the area under the formed polygon\r\n    float polygonArea = abs((\r\n        det2(p1, p2) + det2(p2, p3) + det2(p3, p4) + det2(p4, p5) +\r\n        det2(p5, p6) + det2(p6, p7) + det2(p7, p8) + det2(p8, p9) + \r\n        det2(p9, p10) + det2(p10, p11) + det2(p11, p12) + det2(p12, p1)\r\n    ) / 2.0);\r\n\r\n    alphaAmount = clamp(polygonArea, 0.0, 1.0);\r\n  }\r\n\r\n  outColor = vec4(1.0, 0.0, 0.0, alphaAmount);\r\n}\r\n"},911:e=>{e.exports="#version 300 es\r\n\r\nuniform vec2 screenSize;\r\nuniform mat4 modelViewProjection;\r\n\r\nin vec2 pos;\r\nin vec2 prevPos;\r\nin vec2 nextPos;\r\n\r\nflat out vec4 bounds;\r\nflat out vec2 vPrevPos;\r\nflat out vec2 vPos;\r\nflat out vec2 vNextPos;\r\nflat out vec2 e1;\r\nflat out vec2 e2;\r\nflat out vec2 e3;\r\n\r\nconst float EPSILON = 0.000001;\r\n\r\nvec2 posToClipSpace(vec2 pos) {\r\n    vec4 proj_pos = modelViewProjection * vec4(pos, 0.0, 1.0);\r\n    return proj_pos.xy / proj_pos.w;\r\n}\r\n\r\nvec2 clipToScreenSpace(vec2 pos) {\r\n    return (screenSize.xy * (pos + 1.0)) / 2.0;\r\n}\r\n\r\nvec2 screenSpaceToClipSpace(vec2 pos) {\r\n    return (pos * 2.0 / screenSize.xy) - 1.0;\r\n}\r\n\r\nconst float diagonalOffset = sqrt(2.0) / 2.0;\r\n\r\nvoid main(void) {\r\n    vec2 clipPos = posToClipSpace(pos);\r\n    vec2 clipNextPos = posToClipSpace(nextPos);\r\n    vec2 clipPrevPos = posToClipSpace(prevPos);\r\n\r\n    vec2 screenPos = clipToScreenSpace(clipPos);\r\n    vec2 screenNextPos = clipToScreenSpace(clipNextPos);\r\n    vec2 screenPrevPos = clipToScreenSpace(clipPrevPos);\r\n\r\n    // determine a new vertex position such that it covers the neighbour pixel centers\r\n    vec2 a = normalize(screenPrevPos - screenPos);\r\n    vec2 b = normalize(screenNextPos - screenPos);\r\n    float angle = sqrt((1.0 - dot(a, b)) / 2.0);\r\n\r\n    vec2 vecPos = clipPos;\r\n    if (abs(angle) > EPSILON) {\r\n        vecPos = screenSpaceToClipSpace(screenPos - normalize(a + b) * diagonalOffset / angle);\r\n    }\r\n\r\n    bounds = vec4(\r\n        min(min(screenPos, screenNextPos), screenPrevPos) - 0.5,\r\n        max(max(screenPos, screenNextPos), screenPrevPos) + 0.5\r\n    );\r\n    \r\n    vPrevPos = screenPrevPos;\r\n    vPos = screenPos;\r\n    vNextPos = screenNextPos;\r\n    e1 = vPos - vPrevPos;\r\n    e2 = vNextPos - vPos;\r\n    e3 = vPrevPos - vNextPos;\r\n    \r\n    gl_Position = vec4(vecPos, 0.0, 1.0);\r\n}\r\n"}},e=>{e(e.s=943)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Oi8vc3VicGl4ZWwtcmVuZGVyaW5nLy4vc3JjL2RlbW9zL2N1c3RvbUZvbnRXZWJnbC50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvZ2VvbWV0cnkvY3ViaWNCZXppZXJUb1BvaW50cy50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvZ2VvbWV0cnkvcGF0aFRvUG9pbnRzLnRzIiwid2VicGFjazovL3N1YnBpeGVsLXJlbmRlcmluZy8uL3NyYy9nZW9tZXRyeS9wb2ludHNUb1BvbHlnb24udHMiLCJ3ZWJwYWNrOi8vc3VicGl4ZWwtcmVuZGVyaW5nLy4vc3JjL2dlb21ldHJ5L3BvbHlnb25BcmVhLnRzIiwid2VicGFjazovL3N1YnBpeGVsLXJlbmRlcmluZy8uL3NyYy9nZW9tZXRyeS9xdWFkcmF0aWNCZXppZXJUb1BvaW50cy50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvbWF0aHMvY29tbW9uLnRzIiwid2VicGFjazovL3N1YnBpeGVsLXJlbmRlcmluZy8uL3NyYy9tYXRocy9wb2ludC50cyIsIndlYnBhY2s6Ly9zdWJwaXhlbC1yZW5kZXJpbmcvLi9zcmMvdXRpbHMvc3Vic2NyaWJlRHJhZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmFhYmIgPSB2b2lkIDA7XHJcbmNvbnN0IHBvaW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvcG9pbnRcIik7XHJcbmNvbnN0IGFhYmIgPSAoLi4ucG9pbnRzKSA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1pbjogKDAsIHBvaW50XzEubWluMikoLi4ucG9pbnRzKSxcclxuICAgICAgICBtYXg6ICgwLCBwb2ludF8xLm1heDIpKC4uLnBvaW50cylcclxuICAgIH07XHJcbn07XHJcbmV4cG9ydHMuYWFiYiA9IGFhYmI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3Qgb3BlbnR5cGVfanNfMSA9IHJlcXVpcmUoXCJvcGVudHlwZS5qc1wiKTtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBwYXRoVG9Qb2ludHNfMSA9IHJlcXVpcmUoXCIuLi9nZW9tZXRyeS9wYXRoVG9Qb2ludHNcIik7XHJcbmNvbnN0IHBvaW50c1RvUG9seWdvbl8xID0gcmVxdWlyZShcIi4uL2dlb21ldHJ5L3BvaW50c1RvUG9seWdvblwiKTtcclxuY29uc3Qgc3Vic2NyaWJlRHJhZ18xID0gcmVxdWlyZShcIi4uL3V0aWxzL3N1YnNjcmliZURyYWdcIik7XHJcbmNvbnN0IGZvbnRfdmVydF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9zaGFkZXJzL2ZvbnQudmVydFwiKSk7XHJcbmNvbnN0IGZvbnRfZnJhZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9zaGFkZXJzL2ZvbnQuZnJhZ1wiKSk7XHJcbmNvbnN0IHZlcnRleFNpemUgPSAyO1xyXG5sZXQgY2FudmFzO1xyXG5sZXQgZ2w7XHJcbmxldCB2ZXJ0aWNlcztcclxubGV0IG5leHRQb3M7XHJcbmxldCBwcmV2UG9zO1xyXG5sZXQgcG9zQnVmZmVyO1xyXG5sZXQgc2hhZGVyUHJvZ3JhbTtcclxubGV0IG5leHRQb3NCdWZmZXI7XHJcbmxldCBwcmV2UG9zQnVmZmVyO1xyXG5sZXQgbW9kZWxWaWV3UHJvamVjdGlvblVuaWZvcm07XHJcbmxldCBzY3JlZW5TaXplVW5pZm9ybTtcclxuY29uc3QgdHJhbnNsYXRlID0gZ2xfbWF0cml4XzEudmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xyXG5jb25zdCBzY2FsZSA9IGdsX21hdHJpeF8xLnZlYzMuZnJvbVZhbHVlcygyMCwgMjAsIDEpO1xyXG5jb25zdCBtb2RlbE1hdHJpeCA9IGdsX21hdHJpeF8xLm1hdDQuY3JlYXRlKCk7XHJcbmNvbnN0IHZpZXdNYXRyaXggPSBnbF9tYXRyaXhfMS5tYXQ0LmNyZWF0ZSgpO1xyXG5jb25zdCBtb2RlbFZpZXdNYXRyaXggPSBnbF9tYXRyaXhfMS5tYXQ0LmNyZWF0ZSgpO1xyXG5jb25zdCBwcm9qZWN0aW9uTWF0cml4ID0gZ2xfbWF0cml4XzEubWF0NC5jcmVhdGUoKTtcclxuY29uc3QgbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCA9IGdsX21hdHJpeF8xLm1hdDQuY3JlYXRlKCk7XHJcbmNvbnN0IHJlc2l6ZSA9ICgpID0+IHtcclxuICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIGdsLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XHJcbiAgICBnbC51bmlmb3JtMmZ2KHNjcmVlblNpemVVbmlmb3JtLCBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSk7XHJcbn07XHJcbmNvbnN0IGxvYWRHTCA9ICgpID0+IHtcclxuICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMxJyk7XHJcbiAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCB7IGFudGlhbGlhczogZmFsc2UsIHByZW11bHRpcGxpZWRBbHBoYTogZmFsc2UgfSk7XHJcbiAgICAvL2FsbG93IHRoZSBncmFwaCB0byBiZSB6b29tZWQgYW5kIG1vdmVkIHVzaW5nIHRoZSBtb3VzZVxyXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc2NhbGVbMF0gKj0gZS5kZWx0YVkgPCAwID8gMi4wIDogMC41O1xyXG4gICAgICAgIHNjYWxlWzFdID0gc2NhbGVbMF07XHJcbiAgICB9KTtcclxuICAgICgwLCBzdWJzY3JpYmVEcmFnXzEuc3Vic2NyaWJlRHJhZykoe1xyXG4gICAgICAgIGVsZW06IGNhbnZhcyxcclxuICAgICAgICBvbmRyYWc6IChkZWx0YSkgPT4ge1xyXG4gICAgICAgICAgICB0cmFuc2xhdGVbMF0gKz0gZGVsdGEueDtcclxuICAgICAgICAgICAgdHJhbnNsYXRlWzFdICs9IGRlbHRhLnk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyIG9iamVjdCB0byBzdG9yZSB2ZXJ0ZXggYnVmZmVyXHJcbiAgICBwb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHZlcnRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICBuZXh0UG9zQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbmV4dFBvc0J1ZmZlcik7XHJcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV4dFBvcywgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgcHJldlBvc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xyXG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3MsIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgIC8vIENyZWF0ZSBhIHNoYWRlciBwcm9ncmFtXHJcbiAgICBjb25zdCB2ZXJ0U2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO1xyXG4gICAgZ2wuc2hhZGVyU291cmNlKHZlcnRTaGFkZXIsIGZvbnRfdmVydF8xLmRlZmF1bHQpO1xyXG4gICAgZ2wuY29tcGlsZVNoYWRlcih2ZXJ0U2hhZGVyKTtcclxuICAgIGlmIChTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0U2hhZGVyKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0U2hhZGVyKSkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ1NoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xyXG4gICAgZ2wuc2hhZGVyU291cmNlKGZyYWdTaGFkZXIsIGZvbnRfZnJhZ18xLmRlZmF1bHQpO1xyXG4gICAgZ2wuY29tcGlsZVNoYWRlcihmcmFnU2hhZGVyKTtcclxuICAgIGlmIChTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnU2hhZGVyKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmcoZ2wuZ2V0U2hhZGVySW5mb0xvZyhmcmFnU2hhZGVyKSkpO1xyXG4gICAgfVxyXG4gICAgc2hhZGVyUHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCB2ZXJ0U2hhZGVyKTtcclxuICAgIGdsLmF0dGFjaFNoYWRlcihzaGFkZXJQcm9ncmFtLCBmcmFnU2hhZGVyKTtcclxuICAgIGdsLmxpbmtQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgaWYgKFN0cmluZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhzaGFkZXJQcm9ncmFtKSkudHJpbSgpICE9PSAnJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmcoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2coc2hhZGVyUHJvZ3JhbSkpKTtcclxuICAgIH1cclxuICAgIC8vYmluZCBzaGFkZXIgcGFyYW1zXHJcbiAgICBnbC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW0pO1xyXG4gICAgY29uc3QgcG9zQXR0ciA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlclByb2dyYW0sICdwb3MnKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NCdWZmZXIpO1xyXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NBdHRyLCB2ZXJ0ZXhTaXplLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zQXR0cik7XHJcbiAgICAvLyBuZWVkIHRvIGR1cGxpY2F0ZSB0aGUgdmVydGV4IGJ1ZmZlcnMganVzdCB0byBhY2Nlc3MgdGhlIG90aGVyIHRyaWFuZ2xlIHBvc2l0aW9ucyA6KFxyXG4gICAgY29uc3QgcHJldlBvc0F0dHIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAncHJldlBvcycpO1xyXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHByZXZQb3NCdWZmZXIpO1xyXG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwcmV2UG9zQXR0ciwgdmVydGV4U2l6ZSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHByZXZQb3NBdHRyKTtcclxuICAgIGNvbnN0IG5leHRQb3NBdHRyID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ25leHRQb3MnKTtcclxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXh0UG9zQnVmZmVyKTtcclxuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIobmV4dFBvc0F0dHIsIHZlcnRleFNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShuZXh0UG9zQXR0cik7XHJcbiAgICBzY3JlZW5TaXplVW5pZm9ybSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXJQcm9ncmFtLCAnc2NyZWVuU2l6ZScpO1xyXG4gICAgbW9kZWxWaWV3UHJvamVjdGlvblVuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgJ21vZGVsVmlld1Byb2plY3Rpb24nKTtcclxuICAgIC8vaW5pdFxyXG4gICAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApO1xyXG4gICAgZ2wuZW5hYmxlKGdsLkJMRU5EKTtcclxuICAgIGdsLmJsZW5kRnVuYyhnbC5PTkUsIGdsLk9ORSk7XHJcbn07XHJcbi8vIGRyYXdcclxuY29uc3QgZHJhd0dMID0gKCkgPT4ge1xyXG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcbiAgICBnbF9tYXRyaXhfMS5tYXQ0LmlkZW50aXR5KG1vZGVsTWF0cml4KTtcclxuICAgIGdsX21hdHJpeF8xLm1hdDQuc2NhbGUobW9kZWxNYXRyaXgsIG1vZGVsTWF0cml4LCBbMSwgLTEsIDFdKTtcclxuICAgIGdsX21hdHJpeF8xLm1hdDQudHJhbnNsYXRlKG1vZGVsTWF0cml4LCBtb2RlbE1hdHJpeCwgdHJhbnNsYXRlKTtcclxuICAgIGdsX21hdHJpeF8xLm1hdDQuc2NhbGUobW9kZWxNYXRyaXgsIG1vZGVsTWF0cml4LCBzY2FsZSk7XHJcbiAgICBnbF9tYXRyaXhfMS5tYXQ0LnRyYW5zbGF0ZShtb2RlbE1hdHJpeCwgbW9kZWxNYXRyaXgsIFstMTAsIDAsIDBdKTtcclxuICAgIC8vbWF0NC5sb29rQXQodmlld01hdHJpeCwgWzAsIDAsIDFdLCBbMCwgMCwgMF0sIFswLCAxLCAwXSk7XHJcbiAgICAvL21hdDQuaW52ZXJ0KHZpZXdNYXRyaXgsIHZpZXdNYXRyaXgpO1xyXG4gICAgY29uc3QgaGFsZldpZHRoID0gY2FudmFzLndpZHRoIC8gMjtcclxuICAgIGNvbnN0IGhhbGZIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gMjtcclxuICAgIGdsX21hdHJpeF8xLm1hdDQub3J0aG8ocHJvamVjdGlvbk1hdHJpeCwgLWhhbGZXaWR0aCwgaGFsZldpZHRoLCAtaGFsZkhlaWdodCwgaGFsZkhlaWdodCwgMCwgMTAwMDApO1xyXG4gICAgZ2xfbWF0cml4XzEubWF0NC5tdWx0aXBseShtb2RlbFZpZXdNYXRyaXgsIHZpZXdNYXRyaXgsIG1vZGVsTWF0cml4KTtcclxuICAgIGdsX21hdHJpeF8xLm1hdDQubXVsdGlwbHkobW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCwgcHJvamVjdGlvbk1hdHJpeCwgbW9kZWxWaWV3TWF0cml4KTtcclxuICAgIGdsLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbSk7XHJcbiAgICBnbC51bmlmb3JtTWF0cml4NGZ2KG1vZGVsVmlld1Byb2plY3Rpb25Vbmlmb3JtLCBmYWxzZSwgbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCk7XHJcbiAgICAvL21heSBhcyB3ZWxsIHVzZSBkcmF3QXJyYXlzIGhlcmUgc2luY2UgdGhlIHZlcnRpY2VzIGhhdmUgaGFkIHRvIGJlIGR1cGxpY2F0ZWRcclxuICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCB2ZXJ0aWNlcy5sZW5ndGggLyB2ZXJ0ZXhTaXplKTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3R0wpO1xyXG59O1xyXG5jb25zdCBzdGFydCA9ICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgY29uc3QgZm9udCA9IHlpZWxkICgwLCBvcGVudHlwZV9qc18xLmxvYWQpKCcuL21lZGlhL1RpbWVsZXNzLnR0ZicpO1xyXG4gICAgY29uc3Qgc3BsaXRCb3VuZGFyeSA9IC0wLjk5O1xyXG4gICAgY29uc3QgZm9udFNpemUgPSAxMjtcclxuICAgIGNvbnN0IHRleHQgPSAnVGVzdCc7XHJcbiAgICBjb25zdCBteUNoYXJzID0gZm9udC5zdHJpbmdUb0dseXBocyh0ZXh0KTtcclxuICAgIGxldCBjaGFyUG9zID0gMDtcclxuICAgIGNvbnN0IGN1cnJWZXJ0aWNlcyA9IFtdO1xyXG4gICAgY29uc3QgbmV4dFZlcnRpY2VzID0gW107XHJcbiAgICBjb25zdCBwcmV2VmVydGljZXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgbXlDaGFyIG9mIG15Q2hhcnMpIHtcclxuICAgICAgICBjb25zdCBhUGF0aCA9IG15Q2hhci5nZXRQYXRoKGNoYXJQb3MsIDAsIGZvbnRTaXplKTtcclxuICAgICAgICBjb25zdCBwb2ludHNHcm91cHMgPSAoMCwgcGF0aFRvUG9pbnRzXzEucGF0aFRvUG9pbnRzKShhUGF0aC50b1BhdGhEYXRhKDMpLCBzcGxpdEJvdW5kYXJ5KTtcclxuICAgICAgICBjaGFyUG9zICs9IChteUNoYXIuYWR2YW5jZVdpZHRoIC8gMTAwMCkgKiBmb250U2l6ZTtcclxuICAgICAgICBjb25zdCBjaGFyUG9seWdvbnMgPSAoMCwgcG9pbnRzVG9Qb2x5Z29uXzEucG9pbnRzVG9Qb2x5Z29ucykocG9pbnRzR3JvdXBzKTtcclxuICAgICAgICAvL3VuZm9ydHVuYXRlbHkgd2UgbmVlZCB0byBpbnRlcHJldCBlYWNoIHZlcnRleCBpbmRpdmlkdWFsbHkgaW4gZWFjaCB0cmlhbmdsZSBzbyB3ZSBtdXN0IGR1cGxpY2F0ZSB0aGUgdmVydGljZXNcclxuICAgICAgICBmb3IgKGNvbnN0IHBvbHlnb24gb2YgY2hhclBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgeyBwMSwgcDIsIHAzIH0gb2YgcG9seWdvbikge1xyXG4gICAgICAgICAgICAgICAgY3VyclZlcnRpY2VzLnB1c2gocDFbMF0sIHAxWzFdLCBwMlswXSwgcDJbMV0sIHAzWzBdLCBwM1sxXSk7XHJcbiAgICAgICAgICAgICAgICBuZXh0VmVydGljZXMucHVzaChwMlswXSwgcDJbMV0sIHAzWzBdLCBwM1sxXSwgcDFbMF0sIHAxWzFdKTtcclxuICAgICAgICAgICAgICAgIHByZXZWZXJ0aWNlcy5wdXNoKHAzWzBdLCBwM1sxXSwgcDFbMF0sIHAxWzFdLCBwMlswXSwgcDJbMV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KGN1cnJWZXJ0aWNlcyk7XHJcbiAgICBuZXh0UG9zID0gbmV3IEZsb2F0MzJBcnJheShuZXh0VmVydGljZXMpO1xyXG4gICAgcHJldlBvcyA9IG5ldyBGbG9hdDMyQXJyYXkocHJldlZlcnRpY2VzKTtcclxuICAgIGxvYWRHTCgpO1xyXG4gICAgd2luZG93Lm9ucmVzaXplID0gcmVzaXplO1xyXG4gICAgcmVzaXplKCk7XHJcbiAgICBkcmF3R0woKTtcclxufSk7XHJcbnN0YXJ0KCk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY3ViaWNCZXppZXJUb1BvaW50cyA9IHZvaWQgMDtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuLi9tYXRocy9jb21tb25cIik7XHJcbmNvbnN0IHBvaW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvcG9pbnRcIik7XHJcbmNvbnN0IGN1YmljQmV6aWVyVG9Qb2ludHMgPSAoYmV6aWVyLCBzcGxpdFRocmVzaG9sZCkgPT4ge1xyXG4gICAgY29uc3QgcG9pbnRzID0gW2dsX21hdHJpeF8xLnZlYzIuY2xvbmUoYmV6aWVyLnAxKSwgZ2xfbWF0cml4XzEudmVjMi5jbG9uZShiZXppZXIucDQpXTtcclxuICAgIGNvbnN0IGN1YmljQmV6aWVyU3BsaXQgPSAoYmV6aWVyLCBtaW4sIG1heCwgaW5zZXJ0SW5kZXgsIGZpcnN0ID0gZmFsc2UpID0+IHtcclxuICAgICAgICBjb25zdCB0aW1lID0gKDAsIGNvbW1vbl8xLmxlcnApKG1pbiwgbWF4LCAwLjUpO1xyXG4gICAgICAgIGNvbnN0IG1pZExlcnAgPSAoMCwgcG9pbnRfMS5sZXJwMikoYmV6aWVyLnAyLCBiZXppZXIucDMsIHRpbWUpO1xyXG4gICAgICAgIGNvbnN0IHBvaW50T25DdXJ2ZSA9ICgwLCBwb2ludF8xLmxlcnAyKSgoMCwgcG9pbnRfMS5sZXJwMikoKDAsIHBvaW50XzEubGVycDIpKGJlemllci5wMSwgYmV6aWVyLnAyLCB0aW1lKSwgbWlkTGVycCwgdGltZSksICgwLCBwb2ludF8xLmxlcnAyKShtaWRMZXJwLCAoMCwgcG9pbnRfMS5sZXJwMikoYmV6aWVyLnAzLCBiZXppZXIucDQsIHRpbWUpLCB0aW1lKSwgdGltZSk7XHJcbiAgICAgICAgY29uc3QgcHJldlBvaW50ID0gcG9pbnRzW2luc2VydEluZGV4IC0gMV07XHJcbiAgICAgICAgY29uc3QgbmV4dFBvaW50ID0gcG9pbnRzW2luc2VydEluZGV4XTtcclxuICAgICAgICBwb2ludHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBwb2ludE9uQ3VydmUpO1xyXG4gICAgICAgIGlmICgoMCwgcG9pbnRfMS5kb3QpKCgwLCBwb2ludF8xLm5vcm1hbGl6ZSkoKDAsIHBvaW50XzEuc3ViKShwcmV2UG9pbnQsIHBvaW50T25DdXJ2ZSkpLCAoMCwgcG9pbnRfMS5ub3JtYWxpemUpKCgwLCBwb2ludF8xLnN1YikobmV4dFBvaW50LCBwb2ludE9uQ3VydmUpKSkgPiBzcGxpdFRocmVzaG9sZCB8fFxyXG4gICAgICAgICAgICBmaXJzdCkge1xyXG4gICAgICAgICAgICBjdWJpY0JlemllclNwbGl0KGJlemllciwgdGltZSwgbWF4LCBpbnNlcnRJbmRleCArIDEpO1xyXG4gICAgICAgICAgICBjdWJpY0JlemllclNwbGl0KGJlemllciwgbWluLCB0aW1lLCBpbnNlcnRJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGN1YmljQmV6aWVyU3BsaXQoYmV6aWVyLCAwLCAxLCAxLCB0cnVlKTtcclxuICAgIHJldHVybiBwb2ludHM7XHJcbn07XHJcbmV4cG9ydHMuY3ViaWNCZXppZXJUb1BvaW50cyA9IGN1YmljQmV6aWVyVG9Qb2ludHM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMucGF0aFRvUG9pbnRzID0gdm9pZCAwO1xyXG5jb25zdCBnbF9tYXRyaXhfMSA9IHJlcXVpcmUoXCJnbC1tYXRyaXhcIik7XHJcbmNvbnN0IGN1YmljQmV6aWVyVG9Qb2ludHNfMSA9IHJlcXVpcmUoXCIuL2N1YmljQmV6aWVyVG9Qb2ludHNcIik7XHJcbmNvbnN0IHF1YWRyYXRpY0JlemllclRvUG9pbnRzXzEgPSByZXF1aXJlKFwiLi9xdWFkcmF0aWNCZXppZXJUb1BvaW50c1wiKTtcclxuY29uc3QgYmxvY2tSZWdleHAgPSAvKD89W2FzdHZ6cW1obGNdKS9naTtcclxuY29uc3QgdmFsdWVzUmVnZXhwID0gLygtP1swLTldKlxcLj9bMC05XSspKD86ZVstK10/XFxkKyk/L2dpO1xyXG5jb25zdCBwYXRoVG9Qb2ludHMgPSAocGF0aFN0ciwgc3BsaXRCb3VuZGFyeSkgPT4ge1xyXG4gICAgY29uc3QgcGF0aEJsb2NrcyA9IHBhdGhTdHIuc3BsaXQoYmxvY2tSZWdleHApO1xyXG4gICAgY29uc3QgcG9pbnRzID0gW107XHJcbiAgICBpZiAocGF0aEJsb2Nrcy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgY3VycmVudFBvbHlnb24gPSBbXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UG9pbnQgPSBnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpO1xyXG4gICAgICAgIHdoaWxlIChwYXRoQmxvY2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBibG9jayA9IHBhdGhCbG9ja3Muc2hpZnQoKTtcclxuICAgICAgICAgICAgaWYgKCEoYmxvY2sgPT09IG51bGwgfHwgYmxvY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJsb2NrLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGJsb2NrLnN1YnN0cmluZygxKS5tYXRjaCh2YWx1ZXNSZWdleHApIHx8IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0Q29tbWFuZCA9IGJsb2NrWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpc2VkQ29tbWFuZCA9IG5leHRDb21tYW5kLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzUmVsYXRpdmUgPSBuZXh0Q29tbWFuZCA9PT0gbm9ybWFsaXNlZENvbW1hbmQ7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobm9ybWFsaXNlZENvbW1hbmQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2wnOiAvL2xpbmVUb1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbSc6IC8vbW92ZVRvXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHBhdGhQYXJ0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFBvaW50ID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKHBhcnNlRmxvYXQocGF0aFBhcnRzLnNoaWZ0KCkpLCBwYXJzZUZsb2F0KHBhdGhQYXJ0cy5zaGlmdCgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1JlbGF0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLmFkZChuZXh0UG9pbnQsIG5leHRQb2ludCwgY3VycmVudFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9seWdvbi5wdXNoKG5leHRQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsX21hdHJpeF8xLnZlYzIuY29weShjdXJyZW50UG9pbnQsIG5leHRQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnaCc6IC8vaG9yaXpvbnRhbExpbmVUb1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXRoUGFydHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0WCA9IHBhcnNlRmxvYXQocGF0aFBhcnRzLnNoaWZ0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWxhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFggKz0gY3VycmVudFBvaW50WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb2x5Z29uLnB1c2goZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKG5leHRYLCBjdXJyZW50UG9pbnRbMV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvaW50WzBdID0gbmV4dFg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndic6IC8vdmVydGljYWxMaW5lVG9cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocGF0aFBhcnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dFkgPSBwYXJzZUZsb2F0KHBhdGhQYXJ0cy5zaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVsYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRZICs9IGN1cnJlbnRQb2ludFsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9seWdvbi5wdXNoKGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhjdXJyZW50UG9pbnRbMF0sIG5leHRZKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb2ludFsxXSA9IG5leHRZO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3onOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jbG9zZVBhdGhcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFBvaW50ID0gY3VycmVudFBvbHlnb25bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbHlnb24ucHVzaChnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGZpcnN0UG9pbnQpKTtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMucHVzaChjdXJyZW50UG9seWdvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbHlnb24gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLnplcm8oY3VycmVudFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ2MnOiAvL2N1YmljIGJlemllclxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChwYXRoUGFydHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZFBvaW50ID0gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKHBhcnNlRmxvYXQocGF0aFBhcnRzLnNoaWZ0KCkpLCBwYXJzZUZsb2F0KHBhdGhQYXJ0cy5zaGlmdCgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRoaXJkUG9pbnQgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMocGFyc2VGbG9hdChwYXRoUGFydHMuc2hpZnQoKSksIHBhcnNlRmxvYXQocGF0aFBhcnRzLnNoaWZ0KCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91cnRoUG9pbnQgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMocGFyc2VGbG9hdChwYXRoUGFydHMuc2hpZnQoKSksIHBhcnNlRmxvYXQocGF0aFBhcnRzLnNoaWZ0KCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVsYXRpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsX21hdHJpeF8xLnZlYzIuYWRkKHNlY29uZFBvaW50LCBzZWNvbmRQb2ludCwgY3VycmVudFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsX21hdHJpeF8xLnZlYzIuYWRkKHRoaXJkUG9pbnQsIHRoaXJkUG9pbnQsIGN1cnJlbnRQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLmFkZChmb3VydGhQb2ludCwgZm91cnRoUG9pbnQsIGN1cnJlbnRQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvbHlnb24ucHVzaCguLi4oMCwgY3ViaWNCZXppZXJUb1BvaW50c18xLmN1YmljQmV6aWVyVG9Qb2ludHMpKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAxOiBjdXJyZW50UG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMjogc2Vjb25kUG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMzogdGhpcmRQb2ludCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHA0OiBmb3VydGhQb2ludFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBzcGxpdEJvdW5kYXJ5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsX21hdHJpeF8xLnZlYzIuY29weShjdXJyZW50UG9pbnQsIGZvdXJ0aFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdxJzogLy9xdWFkcmF0aWMgYmV6aWVyXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHBhdGhQYXJ0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kUG9pbnQgPSBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMocGFyc2VGbG9hdChwYXRoUGFydHMuc2hpZnQoKSksIHBhcnNlRmxvYXQocGF0aFBhcnRzLnNoaWZ0KCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhpcmRQb2ludCA9IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhwYXJzZUZsb2F0KHBhdGhQYXJ0cy5zaGlmdCgpKSwgcGFyc2VGbG9hdChwYXRoUGFydHMuc2hpZnQoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWxhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5hZGQoc2Vjb25kUG9pbnQsIHNlY29uZFBvaW50LCBjdXJyZW50UG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xfbWF0cml4XzEudmVjMi5hZGQodGhpcmRQb2ludCwgdGhpcmRQb2ludCwgY3VycmVudFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9seWdvbi5wdXNoKC4uLigwLCBxdWFkcmF0aWNCZXppZXJUb1BvaW50c18xLnF1YWRyYXRpY0JlemllclRvUG9pbnRzKSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMTogY3VycmVudFBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDI6IHNlY29uZFBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDM6IHRoaXJkUG9pbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgc3BsaXRCb3VuZGFyeSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLmNvcHkoY3VycmVudFBvaW50LCB0aGlyZFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdzJzogLy9jdWJpYyBiZXppZXIgKHNob3J0Y3V0KVxyXG4gICAgICAgICAgICAgICAgY2FzZSAndCc6IC8vcXVhZHJhdGljIGJlemllciAoc2hvcnRjdXQpXHJcbiAgICAgICAgICAgICAgICBjYXNlICdhJzogLy9hcmMgKHNraXApXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9ybWFsaXNlZENvbW1hbmQgKyAnIGlzIG5vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50UG9seWdvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcG9pbnRzLnB1c2goY3VycmVudFBvbHlnb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vY2FsY3VsYXRlIHRoZSBhYWJiIGJhc2VkIG9uIHRoZSBwb2ludHNcclxuICAgIHJldHVybiBwb2ludHM7XHJcbn07XHJcbmV4cG9ydHMucGF0aFRvUG9pbnRzID0gcGF0aFRvUG9pbnRzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnBvaW50c1RvUG9seWdvbnMgPSB2b2lkIDA7XHJcbmNvbnN0IGVhcmN1dF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJlYXJjdXRcIikpO1xyXG5jb25zdCBhYWJiXzEgPSByZXF1aXJlKFwiLi4vYWFiYi9hYWJiXCIpO1xyXG5jb25zdCBwb2ludF8xID0gcmVxdWlyZShcIi4uL21hdGhzL3BvaW50XCIpO1xyXG5jb25zdCBwb2x5Z29uQXJlYV8xID0gcmVxdWlyZShcIi4vcG9seWdvbkFyZWFcIik7XHJcbmNvbnN0IHBvaW50c1RvUG9seWdvbnMgPSAocG9pbnRzKSA9PiB7XHJcbiAgICBjb25zdCBncm91cHMgPSBwb2ludHMubWFwKChwb2ludHNBcnIpID0+ICh7XHJcbiAgICAgICAgcG9pbnRzOiBwb2ludHNBcnIsXHJcbiAgICAgICAgYWFiYjogKDAsIGFhYmJfMS5hYWJiKSguLi5wb2ludHNBcnIpLFxyXG4gICAgICAgIGFyZWE6ICgwLCBwb2x5Z29uQXJlYV8xLnBvbHlnb25BcmVhU2lnbmVkKShwb2ludHNBcnIpLFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgfSkpO1xyXG4gICAgZ3JvdXBzLnNvcnQoKGEsIGIpID0+IE1hdGguYWJzKGIuYXJlYSkgLSBNYXRoLmFicyhhLmFyZWEpKTtcclxuICAgIGNvbnN0IHJvb3QgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGkgLSAxOyBqID49IDA7IC0taikge1xyXG4gICAgICAgICAgICBpZiAoKDAsIHBvaW50XzEuaW5zaWRlKShncm91cHNbal0ucG9pbnRzLCBncm91cHNbaV0ucG9pbnRzWzBdKSAmJiBncm91cHNbaV0uYXJlYSAqIGdyb3Vwc1tqXS5hcmVhIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gZ3JvdXBzW2pdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChncm91cHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcm9vdC5wdXNoKGdyb3Vwc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcG9seWdvbnMgPSBbXTtcclxuICAgIGxldCB0cmlhbmdsZXMgPSBbXTtcclxuICAgIGNvbnN0IHByb2Nlc3MgPSAoZ3JvdXApID0+IHtcclxuICAgICAgICBjb25zdCBjb29yZHMgPSBbXTtcclxuICAgICAgICBjb25zdCBob2xlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IFtdO1xyXG4gICAgICAgIGdyb3VwLnBvaW50cy5mb3JFYWNoKChwb2ludCkgPT4ge1xyXG4gICAgICAgICAgICBjb29yZHMucHVzaCguLi5wb2ludCk7XHJcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHBvaW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBncm91cC5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBjaGlsZC5jaGlsZHJlbi5mb3JFYWNoKHByb2Nlc3MpO1xyXG4gICAgICAgICAgICBob2xlcy5wdXNoKGNvb3Jkcy5sZW5ndGggLyAyKTtcclxuICAgICAgICAgICAgY2hpbGQucG9pbnRzLmZvckVhY2goKHBvaW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb29yZHMucHVzaCguLi5wb2ludCk7XHJcbiAgICAgICAgICAgICAgICBwb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGluZGljZXMgPSAoMCwgZWFyY3V0XzEuZGVmYXVsdCkoY29vcmRzLCBob2xlcyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAxID0gcG9pbnRzW2luZGljZXNbaSArIDBdXTtcclxuICAgICAgICAgICAgY29uc3QgcDIgPSBwb2ludHNbaW5kaWNlc1tpICsgMV1dO1xyXG4gICAgICAgICAgICBjb25zdCBwMyA9IHBvaW50c1tpbmRpY2VzW2kgKyAyXV07XHJcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHAxLFxyXG4gICAgICAgICAgICAgICAgcDIsXHJcbiAgICAgICAgICAgICAgICBwMyxcclxuICAgICAgICAgICAgICAgIGUxOiAoMCwgcG9pbnRfMS5zdWIpKHAyLCBwMSksXHJcbiAgICAgICAgICAgICAgICBlMjogKDAsIHBvaW50XzEuc3ViKShwMywgcDIpLFxyXG4gICAgICAgICAgICAgICAgZTM6ICgwLCBwb2ludF8xLnN1YikocDEsIHAzKSxcclxuICAgICAgICAgICAgICAgIHBvaW50czogW3AxLCBwMiwgcDNdLFxyXG4gICAgICAgICAgICAgICAgY29sb3VyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjU1KSxcclxuICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyNTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIHo6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDI1NSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJvb3QuZm9yRWFjaCgoZ3JvdXApID0+IHtcclxuICAgICAgICBwcm9jZXNzKGdyb3VwKTtcclxuICAgICAgICBwb2x5Z29ucy5wdXNoKHRyaWFuZ2xlcyk7XHJcbiAgICAgICAgdHJpYW5nbGVzID0gW107XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBwb2x5Z29ucztcclxufTtcclxuZXhwb3J0cy5wb2ludHNUb1BvbHlnb25zID0gcG9pbnRzVG9Qb2x5Z29ucztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5wb2x5Z29uQXJlYSA9IGV4cG9ydHMucG9seWdvbkFyZWFTaWduZWQgPSB2b2lkIDA7XHJcbmNvbnN0IHBvaW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvcG9pbnRcIik7XHJcbmNvbnN0IHBvbHlnb25BcmVhU2lnbmVkID0gKHBvaW50cykgPT4ge1xyXG4gICAgaWYgKCFwb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsYXN0SW5kZXggPSBwb2ludHMubGVuZ3RoIC0gMTtcclxuICAgIGxldCBhcmVhID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFzdEluZGV4OyBpKyspIHtcclxuICAgICAgICBhcmVhICs9ICgwLCBwb2ludF8xLmRldGVybWluYW50MikocG9pbnRzW2ldLCBwb2ludHNbaSArIDFdKTtcclxuICAgIH1cclxuICAgIGFyZWEgKz0gKDAsIHBvaW50XzEuZGV0ZXJtaW5hbnQyKShwb2ludHNbbGFzdEluZGV4XSwgcG9pbnRzWzBdKTtcclxuICAgIHJldHVybiBhcmVhIC8gMjtcclxufTtcclxuZXhwb3J0cy5wb2x5Z29uQXJlYVNpZ25lZCA9IHBvbHlnb25BcmVhU2lnbmVkO1xyXG5jb25zdCBwb2x5Z29uQXJlYSA9IChwb2ludHMpID0+IHtcclxuICAgIHJldHVybiBNYXRoLmFicygoMCwgZXhwb3J0cy5wb2x5Z29uQXJlYVNpZ25lZCkocG9pbnRzKSk7XHJcbn07XHJcbmV4cG9ydHMucG9seWdvbkFyZWEgPSBwb2x5Z29uQXJlYTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5xdWFkcmF0aWNCZXppZXJUb1BvaW50cyA9IHZvaWQgMDtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuLi9tYXRocy9jb21tb25cIik7XHJcbmNvbnN0IHBvaW50XzEgPSByZXF1aXJlKFwiLi4vbWF0aHMvcG9pbnRcIik7XHJcbmNvbnN0IHF1YWRyYXRpY0JlemllclRvUG9pbnRzID0gKGJlemllciwgc3BsaXRCb3VuZGFyeSkgPT4ge1xyXG4gICAgY29uc3QgcG9pbnRzID0gW2dsX21hdHJpeF8xLnZlYzIuY2xvbmUoYmV6aWVyLnAxKSwgZ2xfbWF0cml4XzEudmVjMi5jbG9uZShiZXppZXIucDMpXTtcclxuICAgIGNvbnN0IHF1YWRyYXRpY0JlemllclNwbGl0ID0gKGJlemllciwgbWluLCBtYXgsIGluc2VydEluZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGltZSA9ICgwLCBjb21tb25fMS5sZXJwKShtaW4sIG1heCwgMC41KTtcclxuICAgICAgICBjb25zdCBwb2ludE9uQ3VydmUgPSAoMCwgcG9pbnRfMS5sZXJwMikoKDAsIHBvaW50XzEubGVycDIpKGJlemllci5wMSwgYmV6aWVyLnAyLCB0aW1lKSwgKDAsIHBvaW50XzEubGVycDIpKGJlemllci5wMiwgYmV6aWVyLnAzLCB0aW1lKSwgdGltZSk7XHJcbiAgICAgICAgY29uc3QgcHJldlBvaW50ID0gcG9pbnRzW2luc2VydEluZGV4IC0gMV07XHJcbiAgICAgICAgY29uc3QgbmV4dFBvaW50ID0gcG9pbnRzW2luc2VydEluZGV4XTtcclxuICAgICAgICBwb2ludHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBwb2ludE9uQ3VydmUpO1xyXG4gICAgICAgIGlmICgoMCwgcG9pbnRfMS5kb3QpKCgwLCBwb2ludF8xLm5vcm1hbGl6ZSkoKDAsIHBvaW50XzEuc3ViKShwcmV2UG9pbnQsIHBvaW50T25DdXJ2ZSkpLCAoMCwgcG9pbnRfMS5ub3JtYWxpemUpKCgwLCBwb2ludF8xLnN1YikobmV4dFBvaW50LCBwb2ludE9uQ3VydmUpKSkgPiBzcGxpdEJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgIHF1YWRyYXRpY0JlemllclNwbGl0KGJlemllciwgdGltZSwgbWF4LCBpbnNlcnRJbmRleCArIDEpO1xyXG4gICAgICAgICAgICBxdWFkcmF0aWNCZXppZXJTcGxpdChiZXppZXIsIG1pbiwgdGltZSwgaW5zZXJ0SW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBxdWFkcmF0aWNCZXppZXJTcGxpdChiZXppZXIsIDAsIDEsIDEpO1xyXG4gICAgcmV0dXJuIHBvaW50cztcclxufTtcclxuZXhwb3J0cy5xdWFkcmF0aWNCZXppZXJUb1BvaW50cyA9IHF1YWRyYXRpY0JlemllclRvUG9pbnRzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmxlcnAgPSBleHBvcnRzLnRpbWVBdFBvcyA9IGV4cG9ydHMuY2xhbXAgPSBleHBvcnRzLmZyYWN0ID0gZXhwb3J0cy5uZWdGcmFjdCA9IGV4cG9ydHMuRVBTSUxPTiA9IHZvaWQgMDtcclxuZXhwb3J0cy5FUFNJTE9OID0gMC4wMDAwMDE7XHJcbmNvbnN0IG5lZ0ZyYWN0ID0gKHgpID0+IDEuMCAtIHggKyBNYXRoLmZsb29yKHgpO1xyXG5leHBvcnRzLm5lZ0ZyYWN0ID0gbmVnRnJhY3Q7XHJcbmNvbnN0IGZyYWN0ID0gKHgpID0+IHggLSBNYXRoLmZsb29yKHgpO1xyXG5leHBvcnRzLmZyYWN0ID0gZnJhY3Q7XHJcbmNvbnN0IGNsYW1wID0gKGEsIG1pbiwgbWF4KSA9PiBNYXRoLm1heChNYXRoLm1pbihhLCBtYXgpLCBtaW4pO1xyXG5leHBvcnRzLmNsYW1wID0gY2xhbXA7XHJcbmNvbnN0IHRpbWVBdFBvcyA9IChzdGFydFBvcywgZGlyLCBuZXdQb3MpID0+IGRpciA/ICgwLCBleHBvcnRzLmNsYW1wKSgobmV3UG9zIC0gc3RhcnRQb3MpIC8gZGlyLCAwLCAxKSA6IDA7XHJcbmV4cG9ydHMudGltZUF0UG9zID0gdGltZUF0UG9zO1xyXG5jb25zdCBsZXJwID0gKGEsIGIsIHQpID0+IGEgKiAoMSAtIHQpICsgYiAqIHQ7XHJcbmV4cG9ydHMubGVycCA9IGxlcnA7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuaW5zaWRlID0gZXhwb3J0cy5pblJhbmdlID0gZXhwb3J0cy5hdmcgPSBleHBvcnRzLm1heDIgPSBleHBvcnRzLm1pbjIgPSBleHBvcnRzLnRvUHJlY2lzaW9uMiA9IGV4cG9ydHMubGVycDIgPSBleHBvcnRzLm5vcm1hbGl6ZSA9IGV4cG9ydHMubGVuZ3RoID0gZXhwb3J0cy5kb3QgPSBleHBvcnRzLnNpZ24gPSBleHBvcnRzLmFicyA9IGV4cG9ydHMuY2VpbCA9IGV4cG9ydHMuZmxvb3IgPSBleHBvcnRzLnN1YiA9IGV4cG9ydHMuYWRkcyA9IGV4cG9ydHMuYWRkID0gZXhwb3J0cy5kaXZpZGUgPSBleHBvcnRzLm11bHRpcGx5ID0gZXhwb3J0cy5zY2FsZSA9IGV4cG9ydHMuZXF1YWxzID0gZXhwb3J0cy5kZXRlcm1pbmFudDIgPSBleHBvcnRzLmNsYW1wMiA9IHZvaWQgMDtcclxuY29uc3QgZ2xfbWF0cml4XzEgPSByZXF1aXJlKFwiZ2wtbWF0cml4XCIpO1xyXG5jb25zdCBjb21tb25fMSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcclxuY29uc3QgY2xhbXAyID0gKGEsIG1pbiwgbWF4KSA9PiB7XHJcbiAgICBjb25zdCBvdXQgPSBnbF9tYXRyaXhfMS52ZWMyLmNsb25lKGEpO1xyXG4gICAgZ2xfbWF0cml4XzEudmVjMi5taW4ob3V0LCBvdXQsIG1heCk7XHJcbiAgICBnbF9tYXRyaXhfMS52ZWMyLm1heChvdXQsIG91dCwgbWluKTtcclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbmV4cG9ydHMuY2xhbXAyID0gY2xhbXAyO1xyXG5jb25zdCBkZXRlcm1pbmFudDIgPSAocDEsIHAyKSA9PiBwMVswXSAqIHAyWzFdIC0gcDFbMV0gKiBwMlswXTtcclxuZXhwb3J0cy5kZXRlcm1pbmFudDIgPSBkZXRlcm1pbmFudDI7XHJcbmV4cG9ydHMuZXF1YWxzID0gZ2xfbWF0cml4XzEudmVjMi5lcXVhbHM7XHJcbmNvbnN0IHNjYWxlID0gKHAxLCBhKSA9PiBnbF9tYXRyaXhfMS52ZWMyLnNjYWxlKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBhKTtcclxuZXhwb3J0cy5zY2FsZSA9IHNjYWxlO1xyXG5jb25zdCBtdWx0aXBseSA9IChwMSwgcDIpID0+IGdsX21hdHJpeF8xLnZlYzIubXVsdGlwbHkoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEsIHAyKTtcclxuZXhwb3J0cy5tdWx0aXBseSA9IG11bHRpcGx5O1xyXG5jb25zdCBkaXZpZGUgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmRpdmlkZShnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSwgcDIpO1xyXG5leHBvcnRzLmRpdmlkZSA9IGRpdmlkZTtcclxuY29uc3QgYWRkID0gKHAxLCBwMikgPT4gZ2xfbWF0cml4XzEudmVjMi5hZGQoZ2xfbWF0cml4XzEudmVjMi5jcmVhdGUoKSwgcDEsIHAyKTtcclxuZXhwb3J0cy5hZGQgPSBhZGQ7XHJcbmNvbnN0IGFkZHMgPSAocDEsIGEpID0+IGdsX21hdHJpeF8xLnZlYzIuZnJvbVZhbHVlcyhwMVswXSArIGEsIHAxWzFdICsgYSk7XHJcbmV4cG9ydHMuYWRkcyA9IGFkZHM7XHJcbmNvbnN0IHN1YiA9IChwMSwgcDIpID0+IGdsX21hdHJpeF8xLnZlYzIuc3ViKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxLCBwMik7XHJcbmV4cG9ydHMuc3ViID0gc3ViO1xyXG5jb25zdCBmbG9vciA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5mbG9vcihnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBwMSk7XHJcbmV4cG9ydHMuZmxvb3IgPSBmbG9vcjtcclxuY29uc3QgY2VpbCA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5jZWlsKGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCksIHAxKTtcclxuZXhwb3J0cy5jZWlsID0gY2VpbDtcclxuY29uc3QgYWJzID0gKHAxKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmZyb21WYWx1ZXMoTWF0aC5hYnMocDFbMF0pLCBNYXRoLmFicyhwMVsxXSkpO1xyXG5leHBvcnRzLmFicyA9IGFicztcclxuY29uc3Qgc2lnbiA9IChwMSkgPT4gZ2xfbWF0cml4XzEudmVjMi5mcm9tVmFsdWVzKE1hdGguc2lnbihwMVswXSksIE1hdGguc2lnbihwMVsxXSkpO1xyXG5leHBvcnRzLnNpZ24gPSBzaWduO1xyXG5jb25zdCBkb3QgPSAocDEsIHAyKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmRvdChwMSwgcDIpO1xyXG5leHBvcnRzLmRvdCA9IGRvdDtcclxuY29uc3QgbGVuZ3RoID0gKHAxKSA9PiBnbF9tYXRyaXhfMS52ZWMyLmxlbmd0aChwMSk7XHJcbmV4cG9ydHMubGVuZ3RoID0gbGVuZ3RoO1xyXG5jb25zdCBub3JtYWxpemUgPSAocDEpID0+ICgwLCBleHBvcnRzLnNjYWxlKShwMSwgMSAvICgwLCBleHBvcnRzLmxlbmd0aCkocDEpKTtcclxuZXhwb3J0cy5ub3JtYWxpemUgPSBub3JtYWxpemU7XHJcbmNvbnN0IGxlcnAyID0gKGEsIGIsIHQpID0+IGdsX21hdHJpeF8xLnZlYzIubGVycChnbF9tYXRyaXhfMS52ZWMyLmNyZWF0ZSgpLCBhLCBiLCB0KTtcclxuZXhwb3J0cy5sZXJwMiA9IGxlcnAyO1xyXG4vL3dhcm5pbmc6IG11dGF0ZXMgYVxyXG5jb25zdCB0b1ByZWNpc2lvbjIgPSAoYSwgYW1vdW50KSA9PiB7XHJcbiAgICBhWzBdID0gcGFyc2VGbG9hdChhWzBdLnRvUHJlY2lzaW9uKGFtb3VudCkpO1xyXG4gICAgYVsxXSA9IHBhcnNlRmxvYXQoYVsxXS50b1ByZWNpc2lvbihhbW91bnQpKTtcclxuICAgIHJldHVybiBhO1xyXG59O1xyXG5leHBvcnRzLnRvUHJlY2lzaW9uMiA9IHRvUHJlY2lzaW9uMjtcclxuY29uc3QgbWluMiA9ICguLi5vYmpzKSA9PiB7XHJcbiAgICBjb25zdCBbZmlyc3QsIC4uLnJlc3RdID0gb2JqcztcclxuICAgIGNvbnN0IHJlc3VsdCA9IGdsX21hdHJpeF8xLnZlYzIuY2xvbmUoZmlyc3QpO1xyXG4gICAgcmVzdC5mb3JFYWNoKChvYmopID0+IHtcclxuICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLm1pbihyZXN1bHQsIHJlc3VsdCwgb2JqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuZXhwb3J0cy5taW4yID0gbWluMjtcclxuY29uc3QgbWF4MiA9ICguLi5vYmpzKSA9PiB7XHJcbiAgICBjb25zdCBbZmlyc3QsIC4uLnJlc3RdID0gb2JqcztcclxuICAgIGNvbnN0IHJlc3VsdCA9IGdsX21hdHJpeF8xLnZlYzIuY2xvbmUoZmlyc3QpO1xyXG4gICAgcmVzdC5mb3JFYWNoKChvYmopID0+IHtcclxuICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLm1heChyZXN1bHQsIHJlc3VsdCwgb2JqKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuZXhwb3J0cy5tYXgyID0gbWF4MjtcclxuY29uc3QgYXZnID0gKC4uLm9ianMpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGdsX21hdHJpeF8xLnZlYzIuY3JlYXRlKCk7XHJcbiAgICBpZiAob2Jqcy5sZW5ndGgpIHtcclxuICAgICAgICBvYmpzLmZvckVhY2goKG9iaikgPT4ge1xyXG4gICAgICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLmFkZChyZXN1bHQsIHJlc3VsdCwgb2JqKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBnbF9tYXRyaXhfMS52ZWMyLnNjYWxlKHJlc3VsdCwgcmVzdWx0LCAxIC8gb2Jqcy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuZXhwb3J0cy5hdmcgPSBhdmc7XHJcbmNvbnN0IGluUmFuZ2UgPSAocDEsIG1pbiwgbWF4KSA9PiB7XHJcbiAgICByZXR1cm4gIShwMVswXSA+IG1heFswXSB8fCBwMVswXSA8IG1pblswXSB8fCBwMVsxXSA+IG1heFsxXSB8fCBwMVsxXSA8IG1pblsxXSk7XHJcbn07XHJcbmV4cG9ydHMuaW5SYW5nZSA9IGluUmFuZ2U7XHJcbmNvbnN0IGluc2lkZSA9IChwb2ludHMsIHApID0+IHtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBsZXQgY3VyID0gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXTtcclxuICAgIHBvaW50cy5mb3JFYWNoKChuZXh0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcDAgPSBjdXJbMV0gPCBuZXh0WzFdID8gY3VyIDogbmV4dDtcclxuICAgICAgICBjb25zdCBwMSA9IGN1clsxXSA8IG5leHRbMV0gPyBuZXh0IDogY3VyO1xyXG4gICAgICAgIGlmIChwMFsxXSA8IHBbMV0gKyBjb21tb25fMS5FUFNJTE9OICYmIHAxWzFdID4gcFsxXSArIGNvbW1vbl8xLkVQU0lMT04pIHtcclxuICAgICAgICAgICAgaWYgKChwMVswXSAtIHAwWzBdKSAqIChwWzFdIC0gcDBbMV0pID4gKHBbMF0gLSBwMFswXSkgKiAocDFbMV0gLSBwMFsxXSkpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY3VyID0gbmV4dDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNvdW50ICUgMiAhPT0gMDtcclxufTtcclxuZXhwb3J0cy5pbnNpZGUgPSBpbnNpZGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuc3Vic2NyaWJlRHJhZyA9IHZvaWQgMDtcclxuY29uc3Qgc3Vic2NyaWJlRHJhZyA9IChwYXJhbXMpID0+IHtcclxuICAgIGNvbnN0IGRlbHRhID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICBjb25zdCBsYXN0TW91c2VQb3MgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgIGNvbnN0IG1vdXNlbW92ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGRlbHRhLnggPSBlLnBhZ2VYIC0gbGFzdE1vdXNlUG9zLng7XHJcbiAgICAgICAgZGVsdGEueSA9IGUucGFnZVkgLSBsYXN0TW91c2VQb3MueTtcclxuICAgICAgICAoX2EgPSBwYXJhbXMub25kcmFnKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChwYXJhbXMsIGRlbHRhLCBlKTtcclxuICAgICAgICBsYXN0TW91c2VQb3MueCA9IGUucGFnZVg7XHJcbiAgICAgICAgbGFzdE1vdXNlUG9zLnkgPSBlLnBhZ2VZO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG1vdXNldXAgPSAoZSkgPT4ge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNldXApO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbW91c2V1cCk7XHJcbiAgICAgICAgKF9hID0gcGFyYW1zLm9uZHJhZ2VuZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwocGFyYW1zLCBlKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBtb3VzZWRvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBsYXN0TW91c2VQb3MueCA9IGUucGFnZVg7XHJcbiAgICAgICAgbGFzdE1vdXNlUG9zLnkgPSBlLnBhZ2VZO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZW1vdmUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2V1cCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBtb3VzZXVwKTtcclxuICAgICAgICAoX2EgPSBwYXJhbXMub25kcmFnc3RhcnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHBhcmFtcywgZSk7XHJcbiAgICB9O1xyXG4gICAgcGFyYW1zLmVsZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2Vkb3duKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgcGFyYW1zLmVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2Vkb3duKTtcclxuICAgIH07XHJcbn07XHJcbmV4cG9ydHMuc3Vic2NyaWJlRHJhZyA9IHN1YnNjcmliZURyYWc7XHJcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFhYmIiLCJwb2ludF8xIiwicG9pbnRzIiwibWluIiwibWluMiIsIm1heCIsIm1heDIiLCJfX2F3YWl0ZXIiLCJ0aGlzIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwib3BlbnR5cGVfanNfMSIsImdsX21hdHJpeF8xIiwicGF0aFRvUG9pbnRzXzEiLCJwb2ludHNUb1BvbHlnb25fMSIsInN1YnNjcmliZURyYWdfMSIsImZvbnRfdmVydF8xIiwiZm9udF9mcmFnXzEiLCJjYW52YXMiLCJnbCIsInZlcnRpY2VzIiwibmV4dFBvcyIsInByZXZQb3MiLCJwb3NCdWZmZXIiLCJzaGFkZXJQcm9ncmFtIiwibmV4dFBvc0J1ZmZlciIsInByZXZQb3NCdWZmZXIiLCJtb2RlbFZpZXdQcm9qZWN0aW9uVW5pZm9ybSIsInNjcmVlblNpemVVbmlmb3JtIiwidHJhbnNsYXRlIiwidmVjMyIsImZyb21WYWx1ZXMiLCJzY2FsZSIsIm1vZGVsTWF0cml4IiwibWF0NCIsImNyZWF0ZSIsInZpZXdNYXRyaXgiLCJtb2RlbFZpZXdNYXRyaXgiLCJwcm9qZWN0aW9uTWF0cml4IiwibW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCIsInJlc2l6ZSIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ2aWV3cG9ydCIsInVzZVByb2dyYW0iLCJ1bmlmb3JtMmZ2IiwiZHJhd0dMIiwiY2xlYXIiLCJDT0xPUl9CVUZGRVJfQklUIiwiaWRlbnRpdHkiLCJoYWxmV2lkdGgiLCJoYWxmSGVpZ2h0Iiwib3J0aG8iLCJtdWx0aXBseSIsInVuaWZvcm1NYXRyaXg0ZnYiLCJkcmF3QXJyYXlzIiwiVFJJQU5HTEVTIiwibGVuZ3RoIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibXlDaGFycyIsImxvYWQiLCJzdHJpbmdUb0dseXBocyIsImNoYXJQb3MiLCJjdXJyVmVydGljZXMiLCJuZXh0VmVydGljZXMiLCJwcmV2VmVydGljZXMiLCJteUNoYXIiLCJhUGF0aCIsImdldFBhdGgiLCJwb2ludHNHcm91cHMiLCJwYXRoVG9Qb2ludHMiLCJ0b1BhdGhEYXRhIiwiYWR2YW5jZVdpZHRoIiwiY2hhclBvbHlnb25zIiwicG9pbnRzVG9Qb2x5Z29ucyIsInBvbHlnb24iLCJwMSIsInAyIiwicDMiLCJwdXNoIiwiRmxvYXQzMkFycmF5IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJhbnRpYWxpYXMiLCJwcmVtdWx0aXBsaWVkQWxwaGEiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJkZWx0YVkiLCJzdWJzY3JpYmVEcmFnIiwiZWxlbSIsIm9uZHJhZyIsImRlbHRhIiwieCIsInkiLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwidmVydFNoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJzaGFkZXJTb3VyY2UiLCJkZWZhdWx0IiwiY29tcGlsZVNoYWRlciIsIlN0cmluZyIsImdldFNoYWRlckluZm9Mb2ciLCJ0cmltIiwiRXJyb3IiLCJmcmFnU2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJwb3NBdHRyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInByZXZQb3NBdHRyIiwibmV4dFBvc0F0dHIiLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJjbGVhckNvbG9yIiwiZW5hYmxlIiwiQkxFTkQiLCJibGVuZEZ1bmMiLCJPTkUiLCJsb2FkR0wiLCJ3aW5kb3ciLCJvbnJlc2l6ZSIsImN1YmljQmV6aWVyVG9Qb2ludHMiLCJjb21tb25fMSIsImJlemllciIsInNwbGl0VGhyZXNob2xkIiwidmVjMiIsImNsb25lIiwicDQiLCJjdWJpY0JlemllclNwbGl0IiwiaW5zZXJ0SW5kZXgiLCJmaXJzdCIsInRpbWUiLCJsZXJwIiwibWlkTGVycCIsImxlcnAyIiwicG9pbnRPbkN1cnZlIiwicHJldlBvaW50IiwibmV4dFBvaW50Iiwic3BsaWNlIiwiZG90Iiwibm9ybWFsaXplIiwic3ViIiwiY3ViaWNCZXppZXJUb1BvaW50c18xIiwicXVhZHJhdGljQmV6aWVyVG9Qb2ludHNfMSIsImJsb2NrUmVnZXhwIiwidmFsdWVzUmVnZXhwIiwicGF0aFN0ciIsInNwbGl0Qm91bmRhcnkiLCJwYXRoQmxvY2tzIiwic3BsaXQiLCJjdXJyZW50UG9seWdvbiIsImN1cnJlbnRQb2ludCIsImJsb2NrIiwic2hpZnQiLCJwYXRoUGFydHMiLCJzdWJzdHJpbmciLCJtYXRjaCIsIm5leHRDb21tYW5kIiwibm9ybWFsaXNlZENvbW1hbmQiLCJ0b0xvd2VyQ2FzZSIsImlzUmVsYXRpdmUiLCJwYXJzZUZsb2F0IiwiYWRkIiwiY29weSIsIm5leHRYIiwibmV4dFkiLCJmaXJzdFBvaW50IiwiemVybyIsInNlY29uZFBvaW50IiwidGhpcmRQb2ludCIsImZvdXJ0aFBvaW50IiwicXVhZHJhdGljQmV6aWVyVG9Qb2ludHMiLCJjb25zb2xlIiwibG9nIiwiZWFyY3V0XzEiLCJhYWJiXzEiLCJwb2x5Z29uQXJlYV8xIiwiZ3JvdXBzIiwibWFwIiwicG9pbnRzQXJyIiwiYXJlYSIsInBvbHlnb25BcmVhU2lnbmVkIiwiY2hpbGRyZW4iLCJzb3J0IiwiYSIsImIiLCJNYXRoIiwiYWJzIiwicm9vdCIsImkiLCJwYXJlbnQiLCJqIiwiaW5zaWRlIiwicG9seWdvbnMiLCJ0cmlhbmdsZXMiLCJwcm9jZXNzIiwiZ3JvdXAiLCJjb29yZHMiLCJob2xlcyIsImZvckVhY2giLCJwb2ludCIsImNoaWxkIiwiaW5kaWNlcyIsImUxIiwiZTIiLCJlMyIsImNvbG91ciIsInJvdW5kIiwicmFuZG9tIiwieiIsInBvbHlnb25BcmVhIiwibGFzdEluZGV4IiwiZGV0ZXJtaW5hbnQyIiwicXVhZHJhdGljQmV6aWVyU3BsaXQiLCJ0aW1lQXRQb3MiLCJjbGFtcCIsImZyYWN0IiwibmVnRnJhY3QiLCJFUFNJTE9OIiwiZmxvb3IiLCJzdGFydFBvcyIsImRpciIsIm5ld1BvcyIsInQiLCJpblJhbmdlIiwiYXZnIiwidG9QcmVjaXNpb24yIiwic2lnbiIsImNlaWwiLCJhZGRzIiwiZGl2aWRlIiwiZXF1YWxzIiwiY2xhbXAyIiwib3V0IiwiYW1vdW50IiwidG9QcmVjaXNpb24iLCJvYmpzIiwicmVzdCIsIm9iaiIsInAiLCJjb3VudCIsImN1ciIsInAwIiwicGFyYW1zIiwibGFzdE1vdXNlUG9zIiwibW91c2Vtb3ZlIiwiX2EiLCJwYWdlWCIsInBhZ2VZIiwiY2FsbCIsIm1vdXNldXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib25kcmFnZW5kIiwibW91c2Vkb3duIiwib25kcmFnc3RhcnQiXSwic291cmNlUm9vdCI6IiJ9